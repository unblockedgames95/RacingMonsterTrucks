(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";var t,e,i,s,r,n,a,o,h,l,_,u,p,f,c,m;window._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=[].slice,r=function(t,e,s){i.call(this,t,e,s),this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._dirty=!0,this.render=r.prototype.render},n=function(t){return t.jquery||t.length&&t!==window&&t[0]&&(t[0]===window||t[0].nodeType&&t[0].style&&!t.nodeType)},a=r.prototype=i.to({},.1,{}),o=[];r.version="1.10.2",a.constructor=r,a.kill()._gc=!1,r.killTweensOf=r.killDelayedCallsTo=i.killTweensOf,r.getTweensOf=i.getTweensOf,r.ticker=i.ticker,a.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),i.prototype.invalidate.call(this)},a.updateTo=function(t,e){var s,r=this.ratio;for(s in e&&this.timeline&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[s]=t[s];if(this._initted)if(e)this._initted=!1;else if(this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var n=this._time;this.render(0,!0,!1),this._initted=!1,this.render(n,!0,!1)}else if(this._time>0){this._initted=!1,this._init();for(var a,o=1/(1-r),h=this._firstPT;h;)a=h.s+h.c,h.c*=o,h.s=a-h.c,h=h._next}return this},a.render=function(t,e,i){var s,r,n,a,h,l,_,u=this._dirty?this.totalDuration():this._totalDuration,p=this._time,f=this._totalTime,c=this._cycle;if(t>=u?(this._totalTime=u,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=this._duration,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(s=!0,r="onComplete"),0===this._duration&&((0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&(i=!0,this._rawPrevTime>0&&(r="onReverseComplete",e&&(t=-1))),this._rawPrevTime=t)):1e-7>t?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==f||0===this._duration&&this._rawPrevTime>0)&&(r="onReverseComplete",s=this._reversed),0>t?(this._active=!1,0===this._duration&&(this._rawPrevTime>=0&&(i=!0),this._rawPrevTime=t)):this._initted||(i=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(a=this._duration+this._repeatDelay,this._cycle=this._totalTime/a>>0,0!==this._cycle&&this._cycle===this._totalTime/a&&this._cycle--,this._time=this._totalTime-this._cycle*a,this._yoyo&&0!=(1&this._cycle)&&(this._time=this._duration-this._time),this._time>this._duration?this._time=this._duration:0>this._time&&(this._time=0)),this._easeType?(h=this._time/this._duration,(1===(l=this._easeType)||3===l&&h>=.5)&&(h=1-h),3===l&&(h*=2),1===(_=this._easePower)?h*=h:2===_?h*=h*h:3===_?h*=h*h*h:4===_&&(h*=h*h*h*h),this.ratio=1===l?1-h:2===l?h:.5>this._time/this._duration?h/2:1-h/2):this.ratio=this._ease.getRatio(this._time/this._duration)),p!==this._time||i){if(!this._initted){if(this._init(),!this._initted)return;this._time&&!s?this.ratio=this._ease.getRatio(this._time/this._duration):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==p&&t>=0&&(this._active=!0),0===f&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._totalTime||0===this._duration)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||o))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&this._startAt.render(t,e,i),e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o)),this._cycle!==c&&(e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||o)),r&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||o)))}else f!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||o))},r.to=function(t,e,i){return new r(t,e,i)},r.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new r(t,e,i)},r.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new r(t,e,s)},r.staggerTo=r.allTo=function(t,e,a,h,l,_,u){h=h||0;var p,f,c,m,d=a.delay||0,g=[],v=function(){a.onComplete&&a.onComplete.apply(a.onCompleteScope||this,arguments),l.apply(u||this,_||o)};for(t instanceof Array||("string"==typeof t&&(t=i.selector(t)||t),n(t)&&(t=s.call(t,0))),p=t.length,c=0;p>c;c++){for(m in f={},a)f[m]=a[m];f.delay=d,c===p-1&&l&&(f.onComplete=v),g[c]=new r(t[c],e,f),d+=h}return g},r.staggerFrom=r.allFrom=function(t,e,i,s,n,a,o){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,r.staggerTo(t,e,i,s,n,a,o)},r.staggerFromTo=r.allFromTo=function(t,e,i,s,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,r.staggerTo(t,e,s,n,a,o,h)},r.delayedCall=function(t,e,i,s,n){return new r(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:n,overwrite:0})},r.set=function(t,e){return new r(t,0,e)},r.isTweening=function(t){for(var e,s=i.getTweensOf(t),r=s.length;--r>-1;)if((e=s[r])._active||e._startTime===e._timeline._time&&e._timeline._active)return!0;return!1};var h=function(t,e){for(var s=[],r=0,n=t._first;n;)n instanceof i?s[r++]=n:(e&&(s[r++]=n),r=(s=s.concat(h(n,e))).length),n=n._next;return s},l=r.getAllTweens=function(e){return h(t._rootTimeline,e).concat(h(t._rootFramesTimeline,e))};r.killAll=function(t,i,s,r){null==i&&(i=!0),null==s&&(s=!0);var n,a,o,h=l(0!=r),_=h.length,u=i&&s&&r;for(o=0;_>o;o++)a=h[o],(u||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&(t?a.totalTime(a.totalDuration()):a._enabled(!1,!1))},r.killChildTweensOf=function(t,e){if(null!=t){var a,o,h,l,_,u=i._tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),n(t)&&(t=s(t,0)),t instanceof Array)for(l=t.length;--l>-1;)r.killChildTweensOf(t[l],e);else{for(h in a=[],u)for(o=u[h].target.parentNode;o;)o===t&&(a=a.concat(u[h].tweens)),o=o.parentNode;for(_=a.length,l=0;_>l;l++)e&&a[l].totalTime(a[l].totalDuration()),a[l]._enabled(!1,!1)}}};var _=function(t,i,s,r){i=!1!==i,s=!1!==s;for(var n,a,o=l(r=!1!==r),h=i&&s&&r,_=o.length;--_>-1;)a=o[_],(h||a instanceof e||(n=a.target===a.vars.onComplete)&&s||i&&!n)&&a.paused(t)};return r.pauseAll=function(t,e,i){_(!0,t,e,i)},r.resumeAll=function(t,e,i){_(!1,t,e,i)},r.globalTimeScale=function(e){var s=t._rootTimeline,r=i.ticker.time;return arguments.length?(e=e||1e-6,s._startTime=r-(r-s._startTime)*s._timeScale/e,s=t._rootFramesTimeline,r=i.ticker.frame,s._startTime=r-(r-s._startTime)*s._timeScale/e,s._timeScale=t._rootTimeline._timeScale=e,e):s._timeScale},a.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},a.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},a.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},a.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},a.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},a.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},a.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},a.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},r},!0),window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(t,e,i){var s=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,s,r=this.vars;for(s in r)(i=r[s])instanceof Array&&-1!==i.join("").indexOf("{self}")&&(r[s]=this._swapSelfInParams(i));r.tweens instanceof Array&&this.add(r.tweens,0,r.align,r.stagger)},r=[],n=function(t){var e,i={};for(e in t)i[e]=t[e];return i},a=function(t,e,i,s){t._timeline.pause(t._startTime),e&&e.apply(s||t._timeline,i||r)},o=r.slice,h=s.prototype=new e;return s.version="1.10.2",h.constructor=s,h.kill()._gc=!1,h.to=function(t,e,s,r){return e?this.add(new i(t,e,s),r):this.set(t,s,r)},h.from=function(t,e,s,r){return this.add(i.from(t,e,s),r)},h.fromTo=function(t,e,s,r,n){return e?this.add(i.fromTo(t,e,s,r),n):this.set(t,r,n)},h.staggerTo=function(t,e,r,a,h,l,_,u){var p,f=new s({onComplete:l,onCompleteParams:_,onCompleteScope:u});for("string"==typeof t&&(t=i.selector(t)||t),!(t instanceof Array)&&t.length&&t!==window&&t[0]&&(t[0]===window||t[0].nodeType&&t[0].style&&!t.nodeType)&&(t=o.call(t,0)),a=a||0,p=0;t.length>p;p++)r.startAt&&(r.startAt=n(r.startAt)),f.to(t[p],e,n(r),p*a);return this.add(f,h)},h.staggerFrom=function(t,e,i,s,r,n,a,o){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,s,r,n,a,o)},h.staggerFromTo=function(t,e,i,s,r,n,a,o,h){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,s,r,n,a,o,h)},h.call=function(t,e,s,r){return this.add(i.delayedCall(0,t,e,s),r)},h.set=function(t,e,s){return s=this._parseTimeOrLabel(s,0,!0),null==e.immediateRender&&(e.immediateRender=s===this._time&&!this._paused),this.add(new i(t,0,e),s)},s.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var r,n,a=new s(t),o=a._timeline;for(null==e&&(e=!0),o._remove(a,!0),a._startTime=0,a._rawPrevTime=a._time=a._totalTime=o._time,r=o._first;r;)n=r._next,e&&r instanceof i&&r.target===r.vars.onComplete||a.add(r,r._startTime-r._delay),r=n;return o.add(a,0),a},h.add=function(r,n,a,o){var h,l,_,u,p;if("number"!=typeof n&&(n=this._parseTimeOrLabel(n,0,!0,r)),!(r instanceof t)){if(r instanceof Array){for(a=a||"normal",o=o||0,h=n,l=r.length,_=0;l>_;_++)(u=r[_])instanceof Array&&(u=new s({tweens:u})),this.add(u,h),"string"!=typeof u&&"function"!=typeof u&&("sequence"===a?h=u._startTime+u.totalDuration()/u._timeScale:"start"===a&&(u._startTime-=u.delay())),h+=o;return this._uncache(!0)}if("string"==typeof r)return this.addLabel(r,n);if("function"!=typeof r)throw"Cannot add "+r+" into the timeline; it is neither a tween, timeline, function, nor a string.";r=i.delayedCall(0,r)}if(e.prototype.add.call(this,r,n),this._gc&&!this._paused&&this._time===this._duration&&this._time<this.duration())for(p=this;p._gc&&p._timeline;)p._timeline.smoothChildTiming?p.totalTime(p._totalTime,!0):p._enabled(!0,!1),p=p._timeline;return this},h.remove=function(e){if(e instanceof t)return this._remove(e,!1);if(e instanceof Array){for(var i=e.length;--i>-1;)this.remove(e[i]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},h._remove=function(t,i){return e.prototype._remove.call(this,t,i),this._last?this._time>this._last._startTime&&(this._time=this.duration(),this._totalTime=this._totalDuration):this._time=this._totalTime=0,this},h.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},h.insert=h.insertMultiple=function(t,e,i,s){return this.add(t,e||0,i,s)},h.appendMultiple=function(t,e,i,s){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,s)},h.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},h.addPause=function(t,e,i,s){return this.call(a,["{self}",e,i,s],this,t)},h.removeLabel=function(t){return delete this._labels[t],this},h.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},h._parseTimeOrLabel=function(e,i,s,r){var n;if(r instanceof t&&r.timeline===this)this.remove(r);else if(r instanceof Array)for(n=r.length;--n>-1;)r[n]instanceof t&&r[n].timeline===this&&this.remove(r[n]);if("string"==typeof i)return this._parseTimeOrLabel(i,s&&"number"==typeof e&&null==this._labels[i]?e-this.duration():0,s);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=this.duration());else{if(-1===(n=e.indexOf("=")))return null==this._labels[e]?s?this._labels[e]=this.duration()+i:i:this._labels[e]+i;i=parseInt(e.charAt(n-1)+"1",10)*Number(e.substr(n+1)),e=n>1?this._parseTimeOrLabel(e.substr(0,n-1),0,s):this.duration()}return Number(e)+i},h.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},h.stop=function(){return this.paused(!0)},h.gotoAndPlay=function(t,e){return this.play(t,e)},h.gotoAndStop=function(t,e){return this.pause(t,e)},h.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,a,o,h,l=this._dirty?this.totalDuration():this._totalDuration,_=this._time,u=this._startTime,p=this._timeScale,f=this._paused;if(t>=l?(this._totalTime=this._time=l,this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",0===this._duration&&(0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>0&&(o="onReverseComplete"))),this._rawPrevTime=t,t=l+1e-6):1e-7>t?(this._totalTime=this._time=0,(0!==_||0===this._duration&&this._rawPrevTime>0)&&(o="onReverseComplete",n=this._reversed),0>t?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t):(this._rawPrevTime=t,t=0,this._initted||(h=!0))):this._totalTime=this._time=this._rawPrevTime=t,this._time!==_&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==_&&t>0&&(this._active=!0),0===_&&this.vars.onStart&&0!==this._time&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||r)),this._time>=_)for(s=this._first;s&&(a=s._next,!this._paused||f);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;else for(s=this._last;s&&(a=s._prev,!this._paused||f);)(s._active||_>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||r)),o&&(this._gc||(u===this._startTime||p!==this._timeScale)&&(0===this._time||l>=this.totalDuration())&&(n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this.vars[o].apply(this.vars[o+"Scope"]||this,this.vars[o+"Params"]||r)))}},h._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof s&&t._hasPausedChild())return!0;t=t._next}return!1},h.getChildren=function(t,e,s,r){r=r||-9999999999;for(var n=[],a=this._first,o=0;a;)r>a._startTime||(a instanceof i?!1!==e&&(n[o++]=a):(!1!==s&&(n[o++]=a),!1!==t&&(o=(n=n.concat(a.getChildren(!0,e,s))).length))),a=a._next;return n},h.getTweensOf=function(t,e){for(var s=i.getTweensOf(t),r=s.length,n=[],a=0;--r>-1;)(s[r].timeline===this||e&&this._contains(s[r]))&&(n[a++]=s[r]);return n},h._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},h.shiftChildren=function(t,e,i){i=i||0;for(var s,r=this._first,n=this._labels;r;)r._startTime>=i&&(r._startTime+=t),r=r._next;if(e)for(s in n)n[s]>=i&&(n[s]+=t);return this._uncache(!0)},h._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),s=i.length,r=!1;--s>-1;)i[s]._kill(t,e)&&(r=!0);return r},h.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},h.invalidate=function(){for(var t=this._first;t;)t.invalidate(),t=t._next;return this},h._enabled=function(t,i){if(t===this._gc)for(var s=this._first;s;)s._enabled(t,!0),s=s._next;return e.prototype._enabled.call(this,t,i)},h.progress=function(t){return arguments.length?this.totalTime(this.duration()*t,!1):this._time/this.duration()},h.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},h.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,s=0,r=this._last,n=999999999999;r;)e=r._prev,r._dirty&&r.totalDuration(),r._startTime>n&&this._sortChildren&&!r._paused?this.add(r,r._startTime-r._delay):n=r._startTime,0>r._startTime&&!r._paused&&(s-=r._startTime,this._timeline.smoothChildTiming&&(this._startTime+=r._startTime/this._timeScale),this.shiftChildren(-r._startTime,!1,-9999999999),n=0),(i=r._startTime+r._totalDuration/r._timeScale)>s&&(s=i),r=e;this._duration=this._totalDuration=s,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==t&&this.timeScale(this._totalDuration/t),this},h.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},h.rawTime=function(){return this._paused||0!==this._totalTime&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},s},!0),window._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],function(t,e,i){var s=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},r=[],n=new i(null,null,1,0),a=function(t){for(;t;){if(t._paused)return!0;t=t._timeline}return!1},o=s.prototype=new t;return o.constructor=s,o.kill()._gc=!1,s.version="1.10.2",o.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},o.addCallback=function(t,i,s,r){return this.add(e.delayedCall(0,t,s,r),i)},o.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),s=i.length,r=this._parseTimeOrLabel(e);--s>-1;)i[s]._startTime===r&&i[s]._enabled(!1,!1);return this},o.tweenTo=function(t,i){i=i||{};var s,a,o={ease:n,overwrite:2,useFrames:this.usesFrames(),immediateRender:!1};for(s in i)o[s]=i[s];return o.time=this._parseTimeOrLabel(t),a=new e(this,Math.abs(Number(o.time)-this._time)/this._timeScale||.001,o),o.onStart=function(){a.target.paused(!0),a.vars.time!==a.target.time()&&a.duration(Math.abs(a.vars.time-a.target.time())/a.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||a,i.onStartParams||r)},a},o.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],onCompleteScope:this},i.immediateRender=!1!==i.immediateRender;var s=this.tweenTo(e,i);return s.duration(Math.abs(s.vars.time-t)/this._timeScale||.001)},o.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var s,n,a,o,h,l,_=this._dirty?this.totalDuration():this._totalDuration,u=this._duration,p=this._time,f=this._totalTime,c=this._startTime,m=this._timeScale,d=this._rawPrevTime,g=this._paused,v=this._cycle;if(t>=_?(this._locked||(this._totalTime=_,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,o="onComplete",0===u&&(0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(h=!0,this._rawPrevTime>0&&(o="onReverseComplete"))),this._rawPrevTime=t,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=u,t=u+1e-6)):1e-7>t?(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==p||0===u&&this._rawPrevTime>0&&!this._locked)&&(o="onReverseComplete",n=this._reversed),0>t?(this._active=!1,0===u&&this._rawPrevTime>=0&&this._first&&(h=!0),this._rawPrevTime=t):(this._rawPrevTime=t,t=0,this._initted||(h=!0))):(this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(l=u+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=u-this._time),this._time>u?(this._time=u,t=u+1e-6):0>this._time?this._time=t=0:t=this._time))),this._cycle!==v&&!this._locked){var y=this._yoyo&&0!=(1&v),T=y===(this._yoyo&&0!=(1&this._cycle)),x=this._totalTime,w=this._cycle,b=this._rawPrevTime,P=this._time;if(this._totalTime=v*u,v>this._cycle?y=!y:this._totalTime+=u,this._time=p,this._rawPrevTime=0===u?d-1e-5:d,this._cycle=v,this._locked=!0,p=y?0:u,this.render(p,e,0===u),e||this._gc||this.vars.onRepeat&&this.vars.onRepeat.apply(this.vars.onRepeatScope||this,this.vars.onRepeatParams||r),T&&(p=y?u+1e-6:-1e-6,this.render(p,!0,!1)),this._locked=!1,this._paused&&!g)return;this._time=P,this._totalTime=x,this._cycle=w,this._rawPrevTime=b}if(this._time!==p&&this._first||i||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==f&&t>0&&(this._active=!0),0===f&&this.vars.onStart&&0!==this._totalTime&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||r)),this._time>=p)for(s=this._first;s&&(a=s._next,!this._paused||g);)(s._active||s._startTime<=this._time&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;else for(s=this._last;s&&(a=s._prev,!this._paused||g);)(s._active||p>=s._startTime&&!s._paused&&!s._gc)&&(s._reversed?s.render((s._dirty?s.totalDuration():s._totalDuration)-(t-s._startTime)*s._timeScale,e,i):s.render((t-s._startTime)*s._timeScale,e,i)),s=a;this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||r)),o&&(this._locked||this._gc||(c===this._startTime||m!==this._timeScale)&&(0===this._time||_>=this.totalDuration())&&(n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this.vars[o].apply(this.vars[o+"Scope"]||this,this.vars[o+"Params"]||r)))}else f!==this._totalTime&&this._onUpdate&&(e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||r))},o.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var s,r,n=[],o=this.getChildren(t,e,i),h=0,l=o.length;for(s=0;l>s;s++)(r=o[s])._paused||r._timeline._time>=r._startTime&&r._timeline._time<r._startTime+r._totalDuration/r._timeScale&&(a(r._timeline)||(n[h++]=r));return n},o.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),s=i.length;for(e=0;s>e;e++)if(i[e].time>t)return i[e].name;return null},o.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(t>e[i].time)return e[i].name;return null},o.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort(function(t,e){return t.time-e.time}),e},o.progress=function(t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),!1):this._time/this.duration()},o.totalProgress=function(t){return arguments.length?this.totalTime(this.totalDuration()*t,!1):this._totalTime/this.totalDuration()},o.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},o.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},o.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},o.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},o.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},s},!0),t=180/Math.PI,e=Math.PI/180,i=[],s=[],r=[],n={},a=function(t,e,i,s){this.a=t,this.b=e,this.c=i,this.d=s,this.da=s-t,this.ca=i-t,this.ba=e-t},o=function(t,e,i,s){var r={a:t},n={},a={},o={c:s},h=(t+e)/2,l=(e+i)/2,_=(i+s)/2,u=(h+l)/2,p=(l+_)/2,f=(p-u)/8;return r.b=h+(t-h)/4,n.b=u+f,r.c=n.a=(r.b+n.b)/2,n.c=a.a=(u+p)/2,a.b=p-f,o.b=_+(s-_)/4,a.c=o.a=(a.b+o.b)/2,[r,n,a,o]},h=function(t,e,n,a,h){var l,_,u,p,f,c,m,d,g,v,y,T,x,w=t.length-1,b=0,P=t[0].a;for(l=0;w>l;l++)_=(f=t[b]).a,u=f.d,p=t[b+1].d,h?(y=i[l],x=.25*((T=s[l])+y)*e/(a?.5:r[l]||.5),d=u-((c=u-(u-_)*(a?.5*e:0!==y?x/y:0))+(((m=u+(p-u)*(a?.5*e:0!==T?x/T:0))-c)*(3*y/(y+T)+.5)/4||0))):d=u-((c=u-.5*(u-_)*e)+(m=u+.5*(p-u)*e))/2,c+=d,m+=d,f.c=g=c,f.b=0!==l?P:P=f.a+.6*(f.c-f.a),f.da=u-_,f.ca=g-_,f.ba=P-_,n?(v=o(_,P,g,u),t.splice(b,1,v[0],v[1],v[2],v[3]),b+=4):b++,P=m;(f=t[b]).b=P,f.c=P+.4*(f.d-P),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=P-f.a,n&&(v=o(f.a,P,f.c,f.d),t.splice(b,1,v[0],v[1],v[2],v[3]))},l=function(t,e,r,n){var o,h,l,_,u,p,f=[];if(n)for(h=(t=[n].concat(t)).length;--h>-1;)"string"==typeof(p=t[h][e])&&"="===p.charAt(1)&&(t[h][e]=n[e]+Number(p.charAt(0)+p.substr(2)));if(0>(o=t.length-2))return f[0]=new a(t[0][e],0,0,t[-1>o?0:1][e]),f;for(h=0;o>h;h++)l=t[h][e],_=t[h+1][e],f[h]=new a(l,0,0,_),r&&(u=t[h+2][e],i[h]=(i[h]||0)+(_-l)*(_-l),s[h]=(s[h]||0)+(u-_)*(u-_));return f[h]=new a(t[h][e],0,0,t[h+1][e]),f},_=function(t,e,a,o,_,u){var p,f,c,m,d,g,v,y,T={},x=[],w=u||t[0];for(f in _="string"==typeof _?","+_+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==e&&(e=1),t[0])x.push(f);if(t.length>1){for(y=t[t.length-1],v=!0,p=x.length;--p>-1;)if(f=x[p],Math.abs(w[f]-y[f])>.05){v=!1;break}v&&(t=t.concat(),u&&t.unshift(u),t.push(t[1]),u=t[t.length-3])}for(i.length=s.length=r.length=0,p=x.length;--p>-1;)f=x[p],n[f]=-1!==_.indexOf(","+f+","),T[f]=l(t,f,n[f],u);for(p=i.length;--p>-1;)i[p]=Math.sqrt(i[p]),s[p]=Math.sqrt(s[p]);if(!o){for(p=x.length;--p>-1;)if(n[f])for(g=(c=T[x[p]]).length-1,m=0;g>m;m++)d=c[m+1].da/s[m]+c[m].da/i[m],r[m]=(r[m]||0)+d*d;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=x.length,m=a?4:1;--p>-1;)c=T[f=x[p]],h(c,e,a,o,n[f]),v&&(c.splice(0,m),c.splice(c.length-m,m));return T},u=function(t,e,i){var s,r,n,o,h,l,_,u,p,f,c,m={},d="cubic"===(e=e||"soft")?3:2,g="soft"===e,v=[];if(g&&i&&(t=[i].concat(t)),null==t||d+1>t.length)throw"invalid Bezier data";for(p in t[0])v.push(p);for(l=v.length;--l>-1;){for(m[p=v[l]]=h=[],f=0,u=t.length,_=0;u>_;_++)s=null==i?t[_][p]:"string"==typeof(c=t[_][p])&&"="===c.charAt(1)?i[p]+Number(c.charAt(0)+c.substr(2)):Number(c),g&&_>1&&u-1>_&&(h[f++]=(s+h[f-2])/2),h[f++]=s;for(u=f-d+1,f=0,_=0;u>_;_+=d)s=h[_],r=h[_+1],n=h[_+2],o=2===d?0:h[_+3],h[f++]=c=3===d?new a(s,r,n,o):new a(s,(2*r+s)/3,(2*r+n)/3,n);h.length=f}return m},p=function(t,e,i){for(var s,r,n,a,o,h,l,_,u,p,f,c=1/i,m=t.length;--m>-1;)for(n=(p=t[m]).a,a=p.d-n,o=p.c-n,h=p.b-n,s=r=0,_=1;i>=_;_++)s=r-(r=((l=c*_)*l*a+3*(u=1-l)*(l*o+u*h))*l),e[f=m*i+_-1]=(e[f]||0)+s*s},f=function(t,e){var i,s,r,n,a=[],o=[],h=0,l=0,_=(e=e>>0||6)-1,u=[],f=[];for(i in t)p(t[i],a,e);for(r=a.length,s=0;r>s;s++)h+=Math.sqrt(a[s]),f[n=s%e]=h,n===_&&(l+=h,u[n=s/e>>0]=f,o[n]=l,h=0,f=[]);return{length:l,lengths:o,segments:u}},c=window._gsDefine.plugin({propName:"bezier",priority:-1,API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._round={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var s,r,n,a,o,h=e.values||[],l={},p=h[0],c=e.autoRotate||i.vars.orientToBezier;for(s in this._autoRotate=c?c instanceof Array?c:[["x","y","rotation",!0===c?0:Number(c)||0]]:null,p)this._props.push(s);for(n=this._props.length;--n>-1;)s=this._props[n],this._overwriteProps.push(s),r=this._func[s]="function"==typeof t[s],l[s]=r?t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)]():parseFloat(t[s]),o||l[s]!==h[0][s]&&(o=l);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?_(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,o):u(h,e.type,l),this._segCount=this._beziers[s].length,this._timeRes){var m=f(this._beziers,this._timeRes);this._length=m.length,this._lengths=m.lengths,this._segments=m.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(c=this._autoRotate)for(c[0]instanceof Array||(this._autoRotate=c=[c]),n=c.length;--n>-1;)for(a=0;3>a;a++)s=c[n][a],this._func[s]="function"==typeof t[s]&&t[s.indexOf("set")||"function"!=typeof t["get"+s.substr(3)]?s:"get"+s.substr(3)];return!0},set:function(e){var i,s,r,n,a,o,h,l,_,u,p=this._segCount,f=this._func,c=this._target;if(this._timeRes){if(_=this._lengths,u=this._curSeg,e*=this._length,r=this._li,e>this._l2&&p-1>r){for(l=p-1;l>r&&e>=(this._l2=_[++r]););this._l1=_[r-1],this._li=r,this._curSeg=u=this._segments[r],this._s2=u[this._s1=this._si=0]}else if(this._l1>e&&r>0){for(;r>0&&(this._l1=_[--r])>=e;);0===r&&this._l1>e?this._l1=0:r++,this._l2=_[r],this._li=r,this._curSeg=u=this._segments[r],this._s1=u[(this._si=u.length-1)-1]||0,this._s2=u[this._si]}if(i=r,e-=this._l1,r=this._si,e>this._s2&&u.length-1>r){for(l=u.length-1;l>r&&e>=(this._s2=u[++r]););this._s1=u[r-1],this._si=r}else if(this._s1>e&&r>0){for(;r>0&&(this._s1=u[--r])>=e;);0===r&&this._s1>e?this._s1=0:r++,this._s2=u[r],this._si=r}o=(r+(e-this._s1)/(this._s2-this._s1))*this._prec}else o=(e-(i=0>e?0:e>=1?p-1:p*e>>0)*(1/p))*p;for(s=1-o,r=this._props.length;--r>-1;)n=this._props[r],h=(o*o*(a=this._beziers[n][i]).da+3*s*(o*a.ca+s*a.ba))*o+a.a,this._round[n]&&(h=h+(h>0?.5:-.5)>>0),f[n]?c[n](h):c[n]=h;if(this._autoRotate){var m,d,g,v,y,T,x,w=this._autoRotate;for(r=w.length;--r>-1;)n=w[r][2],T=w[r][3]||0,x=!0===w[r][4]?1:t,a=this._beziers[w[r][0]],m=this._beziers[w[r][1]],a&&m&&(a=a[i],m=m[i],d=a.a+(a.b-a.a)*o,d+=((v=a.b+(a.c-a.b)*o)-d)*o,v+=(a.c+(a.d-a.c)*o-v)*o,g=m.a+(m.b-m.a)*o,g+=((y=m.b+(m.c-m.b)*o)-g)*o,y+=(m.c+(m.d-m.c)*o-y)*o,h=Math.atan2(y-g,v-d)*x+T,f[n]?c[n](h):c[n]=h)}}}),m=c.prototype,c.bezierThrough=_,c.cubicToQuadratic=o,c._autoCSS=!0,c.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},c._cssRegister=function(){var t=window._gsDefine.globals.CSSPlugin;if(t){var i=t._internals,s=i._parseToProxy,r=i._setPluginRatio,n=i.CSSPropTween;i._registerComplexSpecialProp("bezier",{parser:function(t,i,a,o,h,l){i instanceof Array&&(i={values:i}),l=new c;var _,u,p,f=i.values,m=f.length-1,d=[],g={};if(0>m)return h;for(_=0;m>=_;_++)p=s(t,f[_],o,h,l,m!==_),d[_]=p.end;for(u in i)g[u]=i[u];return g.values=d,(h=new n(t,"bezier",0,0,p.pt,2)).data=p,h.plugin=l,h.setRatio=r,0===g.autoRotate&&(g.autoRotate=!0),!g.autoRotate||g.autoRotate instanceof Array||(_=!0===g.autoRotate?0:Number(g.autoRotate)*e,g.autoRotate=null!=p.end.left?[["left","top","rotation",_,!0]]:null!=p.end.x&&[["x","y","rotation",_,!0]]),g.autoRotate&&(o._transform||o._enableTransforms(!1),p.autoRotate=o._target._gsTransform),l._onInitTween(p.proxy,g,o._tween),h}})}},m._roundProps=function(t,e){for(var i=this._overwriteProps,s=i.length;--s>-1;)(t[i[s]]||t.bezier||t.bezierThrough)&&(this._round[i[s]]=e)},m._kill=function(t){var e,i,s=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=s.length;--i>-1;)s[i]===e&&s.splice(i,1);return this._super._kill.call(this,t)},window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(t,e){var i,s,r,n,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},o={},h=a.prototype=new t("css");h.constructor=a,a.version="1.10.2",a.API=2,a.defaultTransformPerspective=0,h="px",a.suffixMap={top:h,right:h,bottom:h,left:h,width:h,height:h,fontSize:h,padding:h,margin:h,perspective:h};var l,_,u,p,f,c,m=/(?:\d|\-\d|\.\d|\-\.\d)+/g,d=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,g=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,v=/[^\d\-\.]/g,y=/(?:\d|\-|\+|=|#|\.)*/g,T=/opacity *= *([^)]*)/,x=/opacity:([^;]*)/,w=/alpha\(opacity *=.+?\)/i,b=/^(rgb|hsl)/,P=/([A-Z])/g,S=/-([a-z])/gi,R=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,k=function(t,e){return e.toUpperCase()},A=/(?:Left|Right|Width)/i,C=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,O=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,M=/,(?=[^\)]*(?:\(|$))/gi,D=Math.PI/180,I=180/Math.PI,F={},X=document,N=X.createElement("div"),L=X.createElement("img"),E=a._internals={_specialProps:o},z=navigator.userAgent,Y=function(){var t,e=z.indexOf("Android"),i=X.createElement("div");return u=-1!==z.indexOf("Safari")&&-1===z.indexOf("Chrome")&&(-1===e||Number(z.substr(e+8,1))>3),f=u&&6>Number(z.substr(z.indexOf("Version/")+8,1)),p=-1!==z.indexOf("Firefox"),/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(z),c=parseFloat(RegExp.$1),i.innerHTML="<a style='top:1px;opacity:.55;'>a</a>",!!(t=i.getElementsByTagName("a")[0])&&/^0.55/.test(t.style.opacity)}(),U=function(t){return T.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},B=function(t){window.console&&console.log(t)},j="",V="",q=function(t,e){var i,s,r=(e=e||N).style;if(void 0!==r[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],s=5;--s>-1&&void 0===r[i[s]+t];);return s>=0?(j="-"+(V=3===s?"ms":i[s]).toLowerCase()+"-",V+t):null},Z=X.defaultView?X.defaultView.getComputedStyle:function(){},W=a.getStyle=function(t,e,i,s,r){var n;return Y||"opacity"!==e?(!s&&t.style[e]?n=t.style[e]:(i=i||Z(t,null))?n=(t=i.getPropertyValue(e.replace(P,"-$1").toLowerCase()))||i.length?t:i[e]:t.currentStyle&&(n=t.currentStyle[e]),null==r||n&&"none"!==n&&"auto"!==n&&"auto auto"!==n?n:r):U(t)},$=function(t,e,i,s,r){if("px"===s||!s)return i;if("auto"===s||!i)return 0;var n,a=A.test(e),o=t,h=N.style,l=0>i;return l&&(i=-i),"%"===s&&-1!==e.indexOf("border")?n=i/100*(a?t.clientWidth:t.clientHeight):(h.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;","%"!==s&&o.appendChild?h[a?"borderLeftWidth":"borderTopWidth"]=i+s:(o=t.parentNode||X.body,h[a?"width":"height"]=i+s),o.appendChild(N),n=parseFloat(N[a?"offsetWidth":"offsetHeight"]),o.removeChild(N),0!==n||r||(n=$(t,e,i,s,!0))),l?-n:n},G=function(t,e,i){if("absolute"!==W(t,"position",i))return 0;var s="left"===e?"Left":"Top",r=W(t,"margin"+s,i);return t["offset"+s]-($(t,e,parseFloat(r),r.replace(y,""))||0)},Q=function(t,e){var i,s,r={};if(e=e||Z(t,null))if(i=e.length)for(;--i>-1;)r[e[i].replace(S,k)]=e.getPropertyValue(e[i]);else for(i in e)r[i]=e[i];else if(e=t.currentStyle||t.style)for(i in e)r[i.replace(S,k)]=e[i];return Y||(r.opacity=U(t)),s=bt(t,e,!1),r.rotation=s.rotation*I,r.skewX=s.skewX*I,r.scaleX=s.scaleX,r.scaleY=s.scaleY,r.x=s.x,r.y=s.y,wt&&(r.z=s.z,r.rotationX=s.rotationX*I,r.rotationY=s.rotationY*I,r.scaleZ=s.scaleZ),r.filters&&delete r.filters,r},H=function(t,e,i,s,r){var n,a,o,h={},l=t.style;for(a in i)"cssText"!==a&&"length"!==a&&isNaN(a)&&(e[a]!==(n=i[a])||r&&r[a])&&-1===a.indexOf("Origin")&&("number"==typeof n||"string"==typeof n)&&(h[a]="auto"!==n||"left"!==a&&"top"!==a?""!==n&&"auto"!==n&&"none"!==n||"string"!=typeof e[a]||""===e[a].replace(v,"")?n:0:G(t,a),void 0!==l[a]&&(o=new ut(l,a,l[a],o)));if(s)for(a in s)"className"!==a&&(h[a]=s[a]);return{difs:h,firstMPT:o}},K={width:["Left","Right"],height:["Top","Bottom"]},J=["marginLeft","marginRight","marginTop","marginBottom"],tt=function(t,e,i){var s=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),r=K[e],n=r.length;for(i=i||Z(t,null);--n>-1;)s-=parseFloat(W(t,"padding"+r[n],i,!0))||0,s-=parseFloat(W(t,"border"+r[n]+"Width",i,!0))||0;return s},et=function(t,e){(null==t||""===t||"auto"===t||"auto auto"===t)&&(t="0 0");var i=t.split(" "),s=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],r=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];return null==r?r="0":"center"===r&&(r="50%"),("center"===s||isNaN(parseFloat(s))&&-1===(s+"").indexOf("="))&&(s="50%"),e&&(e.oxp=-1!==s.indexOf("%"),e.oyp=-1!==r.indexOf("%"),e.oxr="="===s.charAt(1),e.oyr="="===r.charAt(1),e.ox=parseFloat(s.replace(v,"")),e.oy=parseFloat(r.replace(v,""))),s+" "+r+(i.length>2?" "+i[2]:"")},it=function(t,e){return"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)},st=function(t,e){return null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*Number(t.substr(2))+e:parseFloat(t)},rt=function(t,e,i,s){var r,n,a,o;return null==t?o=e:"number"==typeof t?o=t*D:(r=2*Math.PI,n=t.split("_"),a=Number(n[0].replace(v,""))*(-1===t.indexOf("rad")?D:1)-("="===t.charAt(1)?0:e),n.length&&(s&&(s[i]=e+a),-1!==t.indexOf("short")&&((a%=r)!==a%(r/2)&&(a=0>a?a+r:a-r)),-1!==t.indexOf("_cw")&&0>a?a=(a+9999999999*r)%r-(0|a/r)*r:-1!==t.indexOf("ccw")&&a>0&&(a=(a-9999999999*r)%r-(0|a/r)*r)),o=e+a),1e-6>o&&o>-1e-6&&(o=0),o},nt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},at=function(t,e,i){return 0|255*(1>6*(t=0>t?t+1:t>1?t-1:t)?e+6*(i-e)*t:.5>t?i:2>3*t?e+6*(i-e)*(2/3-t):e)+.5},ot=function(t){var e,i,s,r,n,a;return t&&""!==t?"number"==typeof t?[t>>16,255&t>>8,255&t]:(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),nt[t]?nt[t]:"#"===t.charAt(0)?(4===t.length&&(e=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+e+e+i+i+s+s),[(t=parseInt(t.substr(1),16))>>16,255&t>>8,255&t]):"hsl"===t.substr(0,3)?(t=t.match(m),r=Number(t[0])%360/360,n=Number(t[1])/100,e=2*(a=Number(t[2])/100)-(i=.5>=a?a*(n+1):a+n-a*n),t.length>3&&(t[3]=Number(t[3])),t[0]=at(r+1/3,e,i),t[1]=at(r,e,i),t[2]=at(r-1/3,e,i),t):((t=t.match(m)||nt.transparent)[0]=Number(t[0]),t[1]=Number(t[1]),t[2]=Number(t[2]),t.length>3&&(t[3]=Number(t[3])),t)):nt.black},ht="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(h in nt)ht+="|"+h+"\\b";ht=RegExp(ht+")","gi");var lt=function(t,e,i,s){if(null==t)return function(t){return t};var r,n=e?(t.match(ht)||[""])[0]:"",a=t.split(n).join("").match(g)||[],o=t.substr(0,t.indexOf(a[0])),h=")"===t.charAt(t.length-1)?")":"",l=-1!==t.indexOf(" ")?" ":",",_=a.length,u=_>0?a[0].replace(m,""):"";return _?r=e?function(t){var e,p,f,c;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(c=t.replace(M,"|").split("|"),f=0;c.length>f;f++)c[f]=r(c[f]);return c.join(",")}if(e=(t.match(ht)||[n])[0],f=(p=t.split(e).join("").match(g)||[]).length,_>f--)for(;_>++f;)p[f]=i?p[0|(f-1)/2]:a[f];return o+p.join(l)+l+e+h+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,n,p;if("number"==typeof t)t+=u;else if(s&&M.test(t)){for(n=t.replace(M,"|").split("|"),p=0;n.length>p;p++)n[p]=r(n[p]);return n.join(",")}if(p=(e=t.match(g)||[]).length,_>p--)for(;_>++p;)e[p]=i?e[0|(p-1)/2]:a[p];return o+e.join(l)+h}:function(t){return t}},_t=function(t){return t=t.split(","),function(e,i,s,r,n,a,o){var h,l=(i+"").split(" ");for(o={},h=0;4>h;h++)o[t[h]]=l[h]=l[h]||l[(h-1)/2>>0];return r.parse(e,o,n,a)}},ut=(E._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,s,r,n=this.data,a=n.proxy,o=n.firstMPT;o;)e=a[o.v],o.r?e=e>0?0|e+.5:0|e-.5:1e-6>e&&e>-1e-6&&(e=0),o.t[o.p]=e,o=o._next;if(n.autoRotate&&(n.autoRotate.rotation=a.rotation),1===t)for(o=n.firstMPT;o;){if((i=o.t).type){if(1===i.type){for(r=i.xs0+i.s+i.xs1,s=1;i.l>s;s++)r+=i["xn"+s]+i["xs"+(s+1)];i.e=r}}else i.e=i.s+i.xs0;o=o._next}},function(t,e,i,s,r){this.t=t,this.p=e,this.v=i,this.r=r,s&&(s._prev=this,this._next=s)}),pt=(E._parseToProxy=function(t,e,i,s,r,n){var a,o,h,l,_,u=s,p={},f={},c=i._transform,m=F;for(i._transform=null,F=e,s=_=i.parse(t,e,s,r),F=m,n&&(i._transform=c,u&&(u._prev=null,u._prev&&(u._prev._next=null)));s&&s!==u;){if(1>=s.type&&(f[o=s.p]=s.s+s.c,p[o]=s.s,n||(l=new ut(s,"s",o,l,s.r),s.c=0),1===s.type))for(a=s.l;--a>0;)h="xn"+a,f[o=s.p+"_"+h]=s.data[h],p[o]=s[h],n||(l=new ut(s,h,o,l,s.rxp[h]));s=s._next}return{proxy:p,end:f,firstMPT:l,pt:_}},E.CSSPropTween=function(t,e,s,r,a,o,h,l,_,u,p){this.t=t,this.p=e,this.s=s,this.c=r,this.n=h||e,t instanceof pt||n.push(this.n),this.r=l,this.type=o||0,_&&(this.pr=_,i=!0),this.b=void 0===u?s:u,this.e=void 0===p?s+r:p,a&&(this._next=a,a._prev=this)}),ft=a.parseComplex=function(t,e,i,s,r,n,a,o,h,_){a=new pt(t,e,0,0,a,_?2:1,null,!1,o,i=i||n||"",s),s+="";var u,p,f,c,g,v,y,T,x,w,P,S,R=i.split(", ").join(",").split(" "),k=s.split(", ").join(",").split(" "),A=R.length,C=!1!==l;for((-1!==s.indexOf(",")||-1!==i.indexOf(","))&&(R=R.join(" ").replace(M,", ").split(" "),k=k.join(" ").replace(M,", ").split(" "),A=R.length),A!==k.length&&(A=(R=(n||"").split(" ")).length),a.plugin=h,a.setRatio=_,u=0;A>u;u++)if(c=R[u],g=k[u],(T=parseFloat(c))||0===T)a.appendXtra("",T,it(g,T),g.replace(d,""),C&&-1!==g.indexOf("px"),!0);else if(r&&("#"===c.charAt(0)||nt[c]||b.test(c)))S=","===g.charAt(g.length-1)?"),":")",c=ot(c),g=ot(g),(x=c.length+g.length>6)&&!Y&&0===g[3]?(a["xs"+a.l]+=a.l?" transparent":"transparent",a.e=a.e.split(k[u]).join("transparent")):(Y||(x=!1),a.appendXtra(x?"rgba(":"rgb(",c[0],g[0]-c[0],",",!0,!0).appendXtra("",c[1],g[1]-c[1],",",!0).appendXtra("",c[2],g[2]-c[2],x?",":S,!0),x&&(c=4>c.length?1:c[3],a.appendXtra("",c,(4>g.length?1:g[3])-c,S,!1)));else if(v=c.match(m)){if(!(y=g.match(d))||y.length!==v.length)return a;for(f=0,p=0;v.length>p;p++)P=v[p],w=c.indexOf(P,f),a.appendXtra(c.substr(f,w-f),Number(P),it(y[p],P),"",C&&"px"===c.substr(w+P.length,2),0===p),f=w+P.length;a["xs"+a.l]+=c.substr(f)}else a["xs"+a.l]+=a.l?" "+c:c;if(-1!==s.indexOf("=")&&a.data){for(S=a.xs0+a.data.s,u=1;a.l>u;u++)S+=a["xs"+u]+a.data["xn"+u];a.e=S+a["xs"+u]}return a.l||(a.type=-1,a.xs0=a.e),a.xfirst||a},ct=9;for((h=pt.prototype).l=h.pr=0;--ct>0;)h["xn"+ct]=0,h["xs"+ct]="";h.xs0="",h._next=h._prev=h.xfirst=h.data=h.plugin=h.setRatio=h.rxp=null,h.appendXtra=function(t,e,i,s,r,n){var a=this,o=a.l;return a["xs"+o]+=n&&o?" "+t:t||"",i||0===o||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=s||"",o>0?(a.data["xn"+o]=e+i,a.rxp["xn"+o]=r,a["xn"+o]=e,a.plugin||(a.xfirst=new pt(a,"xn"+o,e,i,a.xfirst||a,0,a.n,r,a.pr),a.xfirst.xs0=0),a):(a.data={s:e+i},a.rxp={},a.s=e,a.c=i,a.r=r,a)):(a["xs"+o]+=e+(s||""),a)};var mt=function(t,e){e=e||{},this.p=e.prefix&&q(t)||t,o[t]=o[this.p]=this,this.format=e.formatter||lt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},dt=E._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var s,r=t.split(","),n=e.defaultValue;for(i=i||[n],s=0;r.length>s;s++)e.prefix=0===s&&e.prefix,e.defaultValue=i[s]||n,new mt(r[s],e)},gt=function(t){if(!o[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";dt(t,{parser:function(t,i,s,r,n,a,h){var l=(window.GreenSockGlobals||window).com.greensock.plugins[e];return l?(l._cssRegister(),o[s].parse(t,i,s,r,n,a,h)):(B("Error: "+e+" js file not loaded."),n)}})}};(h=mt.prototype).parseComplex=function(t,e,i,s,r,n){var a,o,h,l,_,u=this.keyword;if(this.multi&&(M.test(i)||M.test(e)?(o=e.replace(M,"|").split("|"),h=i.replace(M,"|").split("|")):u&&(o=[e],h=[i])),h){for(l=h.length>o.length?h.length:o.length,a=0;l>a;a++)e=o[a]=o[a]||this.dflt,i=h[a]=h[a]||this.dflt,u&&(e.indexOf(u)!==(_=i.indexOf(u))&&((i=-1===_?h:o)[a]+=" "+u));e=o.join(", "),i=h.join(", ")}return ft(t,this.p,e,i,this.clrs,this.dflt,s,this.pr,r,n)},h.parse=function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format(W(t,this.p,r,!1,this.dflt)),this.format(e),n,a)},a.registerSpecialProp=function(t,e,i){dt(t,{parser:function(t,s,r,n,a,o){var h=new pt(t,r,0,0,a,2,r,!1,i);return h.plugin=o,h.setRatio=e(t,s,n._tween,r),h},priority:i})};var vt="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),yt=q("transform"),Tt=j+"transform",xt=q("transformOrigin"),wt=null!==q("perspective"),bt=function(t,e,i,s){if(t._gsTransform&&i&&!s)return t._gsTransform;var r,n,o,h,l,_,u,p,f,c,m,d,g,v=i&&t._gsTransform||{skewY:0},y=0>v.scaleX,T=2e-5,x=1e5,w=1e-4-Math.PI,b=Math.PI-1e-4,P=wt&&(parseFloat(W(t,xt,e,!1,"0 0 0").split(" ")[2])||v.zOrigin)||0;for(yt?r=W(t,Tt,e,!0):t.currentStyle&&(r=(r=t.currentStyle.filter.match(C))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),v.x||0,v.y||0].join(","):""),o=(n=(r||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[]).length;--o>-1;)h=Number(n[o]),n[o]=(l=h-(h|=0))?(0|l*x+(0>l?-.5:.5))/x+h:h;if(16===n.length){var S=n[8],R=n[9],k=n[10],A=n[12],O=n[13],M=n[14];if(v.zOrigin&&(A=S*(M=-v.zOrigin)-n[12],O=R*M-n[13],M=k*M+v.zOrigin-n[14]),!i||s||null==v.rotationX){var D,I,F,X,N,L,E,z=n[0],Y=n[1],U=n[2],B=n[3],j=n[4],V=n[5],q=n[6],Z=n[7],$=n[11],G=v.rotationX=Math.atan2(q,k),Q=w>G||G>b;G&&(D=j*(X=Math.cos(-G))+S*(N=Math.sin(-G)),I=V*X+R*N,F=q*X+k*N,S=j*-N+S*X,R=V*-N+R*X,k=q*-N+k*X,$=Z*-N+$*X,j=D,V=I,q=F),(G=v.rotationY=Math.atan2(S,z))&&(L=w>G||G>b,I=Y*(X=Math.cos(-G))-R*(N=Math.sin(-G)),F=U*X-k*N,R=Y*N+R*X,k=U*N+k*X,$=B*N+$*X,z=D=z*X-S*N,Y=I,U=F),(G=v.rotation=Math.atan2(Y,V))&&(E=w>G||G>b,z=z*(X=Math.cos(-G))+j*(N=Math.sin(-G)),I=Y*X+V*N,V=Y*-N+V*X,q=U*-N+q*X,Y=I),E&&Q?v.rotation=v.rotationX=0:E&&L?v.rotation=v.rotationY=0:L&&Q&&(v.rotationY=v.rotationX=0),v.scaleX=(0|Math.sqrt(z*z+Y*Y)*x+.5)/x,v.scaleY=(0|Math.sqrt(V*V+R*R)*x+.5)/x,v.scaleZ=(0|Math.sqrt(q*q+k*k)*x+.5)/x,v.skewX=0,v.perspective=$?1/(0>$?-$:$):0,v.x=A,v.y=O,v.z=M}}else if(!(wt&&!s&&n.length&&v.x===n[4]&&v.y===n[5]&&(v.rotationX||v.rotationY)||void 0!==v.x&&"none"===W(t,"display",e))){var H=n.length>=6,K=H?n[0]:1,J=n[1]||0,tt=n[2]||0,et=H?n[3]:1;v.x=n[4]||0,v.y=n[5]||0,_=Math.sqrt(K*K+J*J),u=Math.sqrt(et*et+tt*tt),p=K||J?Math.atan2(J,K):v.rotation||0,f=tt||et?Math.atan2(tt,et)+p:v.skewX||0,c=_-Math.abs(v.scaleX||0),m=u-Math.abs(v.scaleY||0),Math.abs(f)>Math.PI/2&&Math.abs(f)<1.5*Math.PI&&(y?(_*=-1,f+=0>=p?Math.PI:-Math.PI,p+=0>=p?Math.PI:-Math.PI):(u*=-1,f+=0>=f?Math.PI:-Math.PI)),d=(p-v.rotation)%Math.PI,g=(f-v.skewX)%Math.PI,(void 0===v.skewX||c>T||-T>c||m>T||-T>m||d>w&&b>d&&!1|d*x||g>w&&b>g&&!1|g*x)&&(v.scaleX=_,v.scaleY=u,v.rotation=p,v.skewX=f),wt&&(v.rotationX=v.rotationY=v.z=0,v.perspective=parseFloat(a.defaultTransformPerspective)||0,v.scaleZ=1)}for(o in v.zOrigin=P,v)T>v[o]&&v[o]>-T&&(v[o]=0);return i&&(t._gsTransform=v),v},Pt=function(t){var e,i,s=this.data,r=-s.rotation,n=r+s.skewX,a=1e5,o=(0|Math.cos(r)*s.scaleX*a)/a,h=(0|Math.sin(r)*s.scaleX*a)/a,l=(0|Math.sin(n)*-s.scaleY*a)/a,_=(0|Math.cos(n)*s.scaleY*a)/a,u=this.t.style,p=this.t.currentStyle;if(p){i=h,h=-l,l=-i,e=p.filter,u.filter="";var f,m,d=this.t.offsetWidth,g=this.t.offsetHeight,v="absolute"!==p.position,x="progid:DXImageTransform.Microsoft.Matrix(M11="+o+", M12="+h+", M21="+l+", M22="+_,w=s.x,b=s.y;if(null!=s.ox&&(w+=(f=(s.oxp?.01*d*s.ox:s.ox)-d/2)-(f*o+(m=(s.oyp?.01*g*s.oy:s.oy)-g/2)*h),b+=m-(f*l+m*_)),v)x+=", Dx="+((f=d/2)-(f*o+(m=g/2)*h)+w)+", Dy="+(m-(f*l+m*_)+b)+")";else{var P,S,R,k=8>c?1:-1;for(f=s.ieOffsetX||0,m=s.ieOffsetY||0,s.ieOffsetX=Math.round((d-((0>o?-o:o)*d+(0>h?-h:h)*g))/2+w),s.ieOffsetY=Math.round((g-((0>_?-_:_)*g+(0>l?-l:l)*d))/2+b),ct=0;4>ct;ct++)R=(i=-1!==(P=p[S=J[ct]]).indexOf("px")?parseFloat(P):$(this.t,S,parseFloat(P),P.replace(y,""))||0)!==s[S]?2>ct?-s.ieOffsetX:-s.ieOffsetY:2>ct?f-s.ieOffsetX:m-s.ieOffsetY,u[S]=(s[S]=Math.round(i-R*(0===ct||2===ct?1:k)))+"px";x+=", sizingMethod='auto expand')"}u.filter=-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?e.replace(O,x):x+" "+e,(0===t||1===t)&&1===o&&0===h&&0===l&&1===_&&(v&&-1===x.indexOf("Dx=0, Dy=0")||T.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf("gradient(")&&u.removeAttribute("filter"))}},St=function(){var t,e,i,s,r,n,a,o,h,l,_,u,f,c,m,d,g,v,y,T,x,w,b,P,S,R,k,A=this.data,C=this.t.style,O=A.rotation,M=A.scaleX,D=A.scaleY,I=A.scaleZ;if(p&&(S=C.top?"top":C.bottom?"bottom":parseFloat(W(this.t,"top",null,!1))?"bottom":"top",x=W(this.t,S,null,!1),R=parseFloat(x)||0,k=x.substr((R+"").length)||"px",A._ffFix=!A._ffFix,C[S]=(A._ffFix?R+.05:R-.05)+k),O||A.skewX)t=y=Math.cos(O),r=T=Math.sin(O),A.skewX&&(O-=A.skewX,y=Math.cos(O),T=Math.sin(O)),e=-T,n=y;else{if(!A.rotationY&&!A.rotationX&&1===I)return void(C[yt]="translate3d("+A.x+"px,"+A.y+"px,"+A.z+"px)"+(1!==M||1!==D?" scale("+M+","+D+")":""));t=n=1,e=r=0}_=1,i=s=a=o=h=l=u=f=c=0,m=(d=A.perspective)?-1/d:0,g=A.zOrigin,v=1e5,(O=A.rotationY)&&(y=Math.cos(O),h=_*-(T=Math.sin(O)),f=m*-T,i=t*T,a=r*T,_*=y,m*=y,t*=y,r*=y),(O=A.rotationX)&&(x=e*(y=Math.cos(O))+i*(T=Math.sin(O)),w=n*y+a*T,b=l*y+_*T,P=c*y+m*T,i=e*-T+i*y,a=n*-T+a*y,_=l*-T+_*y,m=c*-T+m*y,e=x,n=w,l=b,c=P),1!==I&&(i*=I,a*=I,_*=I,m*=I),1!==D&&(e*=D,n*=D,l*=D,c*=D),1!==M&&(t*=M,r*=M,h*=M,f*=M),g&&(s=i*(u-=g),o=a*u,u=_*u+g),s=(x=(s+=A.x)-(s|=0))?(0|x*v+(0>x?-.5:.5))/v+s:s,o=(x=(o+=A.y)-(o|=0))?(0|x*v+(0>x?-.5:.5))/v+o:o,u=(x=(u+=A.z)-(u|=0))?(0|x*v+(0>x?-.5:.5))/v+u:u,C[yt]="matrix3d("+[(0|t*v)/v,(0|r*v)/v,(0|h*v)/v,(0|f*v)/v,(0|e*v)/v,(0|n*v)/v,(0|l*v)/v,(0|c*v)/v,(0|i*v)/v,(0|a*v)/v,(0|_*v)/v,(0|m*v)/v,s,o,u,d?1+-u/d:1].join(",")+")"},Rt=function(){var t,e,i,s,r,n,a,o,h,l=this.data,_=this.t,u=_.style;p&&(t=u.top?"top":u.bottom?"bottom":parseFloat(W(_,"top",null,!1))?"bottom":"top",e=W(_,t,null,!1),i=parseFloat(e)||0,s=e.substr((i+"").length)||"px",l._ffFix=!l._ffFix,u[t]=(l._ffFix?i+.05:i-.05)+s),l.rotation||l.skewX?(n=(r=l.rotation)-l.skewX,a=1e5,o=l.scaleX*a,h=l.scaleY*a,u[yt]="matrix("+(0|Math.cos(r)*o)/a+","+(0|Math.sin(r)*o)/a+","+(0|Math.sin(n)*-h)/a+","+(0|Math.cos(n)*h)/a+","+l.x+","+l.y+")"):u[yt]="matrix("+l.scaleX+",0,0,"+l.scaleY+","+l.x+","+l.y+")"};dt("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D",{parser:function(t,e,i,s,n,a,o){if(s._transform)return n;var h,l,_,u,p,f,c,m=s._transform=bt(t,r,!0,o.parseTransform),d=t.style,g=vt.length,v=o,y={};if("string"==typeof v.transform&&yt)_=d.cssText,d[yt]=v.transform,d.display="block",h=bt(t,null,!1),d.cssText=_;else if("object"==typeof v){if(h={scaleX:st(null!=v.scaleX?v.scaleX:v.scale,m.scaleX),scaleY:st(null!=v.scaleY?v.scaleY:v.scale,m.scaleY),scaleZ:st(null!=v.scaleZ?v.scaleZ:v.scale,m.scaleZ),x:st(v.x,m.x),y:st(v.y,m.y),z:st(v.z,m.z),perspective:st(v.transformPerspective,m.perspective)},null!=(c=v.directionalRotation))if("object"==typeof c)for(_ in c)v[_]=c[_];else v.rotation=c;h.rotation=rt("rotation"in v?v.rotation:"shortRotation"in v?v.shortRotation+"_short":"rotationZ"in v?v.rotationZ:m.rotation*I,m.rotation,"rotation",y),wt&&(h.rotationX=rt("rotationX"in v?v.rotationX:"shortRotationX"in v?v.shortRotationX+"_short":m.rotationX*I||0,m.rotationX,"rotationX",y),h.rotationY=rt("rotationY"in v?v.rotationY:"shortRotationY"in v?v.shortRotationY+"_short":m.rotationY*I||0,m.rotationY,"rotationY",y)),h.skewX=null==v.skewX?m.skewX:rt(v.skewX,m.skewX),h.skewY=null==v.skewY?m.skewY:rt(v.skewY,m.skewY),(l=h.skewY-m.skewY)&&(h.skewX+=l,h.rotation+=l)}for(null!=v.force3D&&(m.force3D=v.force3D,f=!0),(p=m.force3D||m.z||m.rotationX||m.rotationY||h.z||h.rotationX||h.rotationY||h.perspective)||null==v.scale||(h.scaleZ=1);--g>-1;)((u=h[i=vt[g]]-m[i])>1e-6||-1e-6>u||null!=F[i])&&(f=!0,n=new pt(m,i,m[i],u,n),i in y&&(n.e=y[i]),n.xs0=0,n.plugin=a,s._overwriteProps.push(n.n));return((u=v.transformOrigin)||wt&&p&&m.zOrigin)&&(yt?(f=!0,i=xt,u=(u||W(t,i,r,!1,"50% 50%"))+"",(n=new pt(d,i,0,0,n,-1,"transformOrigin")).b=d[i],n.plugin=a,wt?(_=m.zOrigin,u=u.split(" "),m.zOrigin=(u.length>2&&(0===_||"0px"!==u[2])?parseFloat(u[2]):_)||0,n.xs0=n.e=d[i]=u[0]+" "+(u[1]||"50%")+" 0px",(n=new pt(m,"zOrigin",0,0,n,-1,n.n)).b=_,n.xs0=n.e=m.zOrigin):n.xs0=n.e=d[i]=u):et(u+"",m)),f&&(s._transformType=p||3===this._transformType?3:2),n},prefix:!0}),dt("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),dt("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,a){e=this.format(e);var o,h,l,_,u,p,f,c,m,d,g,v,y,T,x,w,b=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],P=t.style;for(m=parseFloat(t.offsetWidth),d=parseFloat(t.offsetHeight),o=e.split(" "),h=0;b.length>h;h++)this.p.indexOf("border")&&(b[h]=q(b[h])),-1!==(u=_=W(t,b[h],r,!1,"0px")).indexOf(" ")&&(_=u.split(" "),u=_[0],_=_[1]),p=l=o[h],f=parseFloat(u),v=u.substr((f+"").length),(y="="===p.charAt(1))?(c=parseInt(p.charAt(0)+"1",10),p=p.substr(2),c*=parseFloat(p),g=p.substr((c+"").length-(0>c?1:0))||""):(c=parseFloat(p),g=p.substr((c+"").length)),""===g&&(g=s[i]||v),g!==v&&(T=$(t,"borderLeft",f,v),x=$(t,"borderTop",f,v),"%"===g?(u=T/m*100+"%",_=x/d*100+"%"):"em"===g?(u=T/(w=$(t,"borderLeft",1,"em"))+"em",_=x/w+"em"):(u=T+"px",_=x+"px"),y&&(p=parseFloat(u)+c+g,l=parseFloat(_)+c+g)),a=ft(P,b[h],u+" "+_,p+" "+l,!1,"0px",a);return a},prefix:!0,formatter:lt("0px 0px 0px 0px",!1,!0)}),dt("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,s,n,a){var o,h,l,_,u,p,f="background-position",m=r||Z(t,null),d=this.format((m?c?m.getPropertyValue(f+"-x")+" "+m.getPropertyValue(f+"-y"):m.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),g=this.format(e);if(-1!==d.indexOf("%")!=(-1!==g.indexOf("%"))&&((p=W(t,"backgroundImage").replace(R,""))&&"none"!==p)){for(o=d.split(" "),h=g.split(" "),L.setAttribute("src",p),l=2;--l>-1;)(_=-1!==(d=o[l]).indexOf("%"))!==(-1!==h[l].indexOf("%"))&&(u=0===l?t.offsetWidth-L.width:t.offsetHeight-L.height,o[l]=_?parseFloat(d)/100*u+"px":parseFloat(d)/u*100+"%");d=o.join(" ")}return this.parseComplex(t.style,d,g,n,a)},formatter:et}),dt("backgroundSize",{defaultValue:"0 0",formatter:et}),dt("perspective",{defaultValue:"0px",prefix:!0}),dt("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),dt("transformStyle",{prefix:!0}),dt("backfaceVisibility",{prefix:!0}),dt("margin",{parser:_t("marginTop,marginRight,marginBottom,marginLeft")}),dt("padding",{parser:_t("paddingTop,paddingRight,paddingBottom,paddingLeft")}),dt("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,s,n,a){var o,h,l;return 9>c?(h=t.currentStyle,l=8>c?" ":",",o="rect("+h.clipTop+l+h.clipRight+l+h.clipBottom+l+h.clipLeft+")",e=this.format(e).split(",").join(l)):(o=this.format(W(t,this.p,r,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,o,e,n,a)}}),dt("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),dt("autoRound,strictUnits",{parser:function(t,e,i,s,r){return r}}),dt("border",{defaultValue:"0px solid #000",parser:function(t,e,i,s,n,a){return this.parseComplex(t.style,this.format(W(t,"borderTopWidth",r,!1,"0px")+" "+W(t,"borderTopStyle",r,!1,"solid")+" "+W(t,"borderTopColor",r,!1,"#000")),this.format(e),n,a)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(ht)||["#000"])[0]}}),dt("float,cssFloat,styleFloat",{parser:function(t,e,i,s,r){var n=t.style,a="cssFloat"in n?"cssFloat":"styleFloat";return new pt(n,a,0,0,r,-1,i,!1,0,n[a],e)}});var kt=function(t){var e,i=this.t,s=i.filter||W(this.data,"filter"),r=0|this.s+this.c*t;100===r&&(-1===s.indexOf("atrix(")&&-1===s.indexOf("radient(")?(i.removeAttribute("filter"),e=!W(this.data,"filter")):(i.filter=s.replace(w,""),e=!0)),e||(this.xn1&&(i.filter=s=s||"alpha(opacity="+r+")"),-1===s.indexOf("opacity")?0===r&&this.xn1||(i.filter+=" alpha(opacity="+r+")"):i.filter=s.replace(T,"opacity="+r))};dt("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,s,n,a){var o=parseFloat(W(t,"opacity",r,!1,"1")),h=t.style,l="autoAlpha"===i;return e=parseFloat(e),l&&1===o&&"hidden"===W(t,"visibility",r)&&0!==e&&(o=0),Y?n=new pt(h,"opacity",o,e-o,n):((n=new pt(h,"opacity",100*o,100*(e-o),n)).xn1=l?1:0,h.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=a,n.setRatio=kt),l&&((n=new pt(h,"visibility",0,0,n,-1,null,!1,0,0!==o?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",s._overwriteProps.push(n.n)),n}});var At=function(t,e){e&&(t.removeProperty?t.removeProperty(e.replace(P,"-$1").toLowerCase()):t.removeAttribute(e))},Ct=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.className=0===t?this.b:this.e;for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:At(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.className!==this.e&&(this.t.className=this.e)};dt("className",{parser:function(t,e,s,n,a,o,h){var l,_,u,p,f,c=t.className,m=t.style.cssText;if((a=n._classNamePT=new pt(t,s,0,0,a,2)).setRatio=Ct,a.pr=-11,i=!0,a.b=c,_=Q(t,r),u=t._gsClassPT){for(p={},f=u.data;f;)p[f.p]=1,f=f._next;u.setRatio(1)}return t._gsClassPT=a,a.e="="!==e.charAt(1)?e:c.replace(RegExp("\\s*\\b"+e.substr(2)+"\\b"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),n._tween._duration&&(t.className=a.e,l=H(t,_,Q(t),h,p),t.className=c,a.data=l.firstMPT,t.style.cssText=m,a=a.xfirst=n.parse(t,l.difs,a,o)),a}});var Ot=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration){if("all"===this.e)return this.t.style.cssText="",void(this.t._gsTransform&&delete this.t._gsTransform);for(var e,i=this.t.style,s=this.e.split(","),r=s.length,n=o.transform.parse;--r>-1;)e=s[r],o[e]&&(e=o[e].parse===n?yt:o[e].p),At(i,e)}};for(dt("clearProps",{parser:function(t,e,s,r,n){return(n=new pt(t,s,0,0,n,2)).setRatio=Ot,n.e=e,n.pr=-10,n.data=r._tween,i=!0,n}}),h="bezier,throwProps,physicsProps,physics2D".split(","),ct=h.length;ct--;)gt(h[ct]);(h=a.prototype)._firstPT=null,h._onInitTween=function(t,e,o){if(!t.nodeType)return!1;this._target=t,this._tween=o,this._vars=e,l=e.autoRound,i=!1,s=e.suffixMap||a.suffixMap,r=Z(t,""),n=this._overwriteProps;var h,p,c,m,d,g,v,y,T,w=t.style;if(_&&""===w.zIndex&&(("auto"===(h=W(t,"zIndex",r))||""===h)&&(w.zIndex=0)),"string"==typeof e&&(m=w.cssText,h=Q(t,r),w.cssText=m+";"+e,h=H(t,h,Q(t)).difs,!Y&&x.test(e)&&(h.opacity=parseFloat(RegExp.$1)),e=h,w.cssText=m),this._firstPT=p=this.parse(t,e,null),this._transformType){for(T=3===this._transformType,yt?u&&(_=!0,""===w.zIndex&&(("auto"===(v=W(t,"zIndex",r))||""===v)&&(w.zIndex=0)),f&&(w.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(T?"visible":"hidden"))):w.zoom=1,c=p;c&&c._next;)c=c._next;y=new pt(t,"transform",0,0,null,2),this._linkCSSP(y,null,c),y.setRatio=T&&wt?St:yt?Rt:Pt,y.data=this._transform||bt(t,r,!0),n.pop()}if(i){for(;p;){for(g=p._next,c=m;c&&c.pr>p.pr;)c=c._next;(p._prev=c?c._prev:d)?p._prev._next=p:m=p,(p._next=c)?c._prev=p:d=p,p=g}this._firstPT=m}return!0},h.parse=function(t,e,i,n){var a,h,_,u,p,f,c,m,d,g,v=t.style;for(a in e)f=e[a],(h=o[a])?i=h.parse(t,f,a,this,i,n,e):(p=W(t,a,r)+"",d="string"==typeof f,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||d&&b.test(f)?(d||(f=((f=ot(f)).length>3?"rgba(":"rgb(")+f.join(",")+")"),i=ft(v,a,p,f,!0,"transparent",i,0,n)):!d||-1===f.indexOf(" ")&&-1===f.indexOf(",")?(c=(_=parseFloat(p))||0===_?p.substr((_+"").length):"",(""===p||"auto"===p)&&("width"===a||"height"===a?(_=tt(t,a,r),c="px"):"left"===a||"top"===a?(_=G(t,a,r),c="px"):(_="opacity"!==a?0:1,c="")),(g=d&&"="===f.charAt(1))?(u=parseInt(f.charAt(0)+"1",10),f=f.substr(2),u*=parseFloat(f),m=f.replace(y,"")):(u=parseFloat(f),m=d&&f.substr((u+"").length)||""),""===m&&(m=s[a]||c),f=u||0===u?(g?u+_:u)+m:e[a],c!==m&&""!==m&&(u||0===u)&&(_||0===_)&&(_=$(t,a,_,c),"%"===m?((_/=$(t,a,100,"%")/100)>100&&(_=100),!0!==e.strictUnits&&(p=_+"%")):"em"===m?_/=$(t,a,1,"em"):(u=$(t,a,u,m),m="px"),g&&(u||0===u)&&(f=u+_+m)),g&&(u+=_),!_&&0!==_||!u&&0!==u?void 0!==v[a]&&(f||"NaN"!=f+""&&null!=f)?(i=new pt(v,a,u||_||0,0,i,-1,a,!1,0,p,f)).xs0="none"!==f||"display"!==a&&-1===a.indexOf("Style")?f:p:B("invalid "+a+" tween value: "+e[a]):(i=new pt(v,a,_,u-_,i,0,a,!1!==l&&("px"===m||"zIndex"===a),0,p,f)).xs0=m):i=ft(v,a,p,f,!0,null,i,0,n)),n&&i&&!i.plugin&&(i.plugin=n);return i},h.setRatio=function(t){var e,i,s,r=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;r;){if(e=r.c*t+r.s,r.r?e=e>0?0|e+.5:0|e-.5:1e-6>e&&e>-1e-6&&(e=0),r.type)if(1===r.type)if(2===(s=r.l))r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2;else if(3===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3;else if(4===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4;else if(5===s)r.t[r.p]=r.xs0+e+r.xs1+r.xn1+r.xs2+r.xn2+r.xs3+r.xn3+r.xs4+r.xn4+r.xs5;else{for(i=r.xs0+e+r.xs1,s=1;r.l>s;s++)i+=r["xn"+s]+r["xs"+(s+1)];r.t[r.p]=i}else-1===r.type?r.t[r.p]=r.xs0:r.setRatio&&r.setRatio(t);else r.t[r.p]=e+r.xs0;r=r._next}else for(;r;)2!==r.type?r.t[r.p]=r.b:r.setRatio(t),r=r._next;else for(;r;)2!==r.type?r.t[r.p]=r.e:r.setRatio(t),r=r._next},h._enableTransforms=function(t){this._transformType=t||3===this._transformType?3:2,this._transform=this._transform||bt(this._target,r,!0)},h._linkCSSP=function(t,e,i,s){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,s=!0),i?i._next=t:s||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},h._kill=function(e){var i,s,r,n=e;if(e.autoAlpha||e.alpha){for(s in n={},e)n[s]=e[s];n.opacity=1,n.autoAlpha&&(n.visibility=1)}return e.className&&(i=this._classNamePT)&&((r=i.xfirst)&&r._prev?this._linkCSSP(r._prev,i._next,r._prev._prev):r===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,r._prev),this._classNamePT=null),t.prototype._kill.call(this,n)};var Mt=function(t,e,i){var s,r,n,a;if(t.slice)for(r=t.length;--r>-1;)Mt(t[r],e,i);else for(r=(s=t.childNodes).length;--r>-1;)a=(n=s[r]).type,n.style&&(e.push(Q(n)),i&&i.push(n)),1!==a&&9!==a&&11!==a||!n.childNodes.length||Mt(n,e,i)};return a.cascadeTo=function(t,i,s){var r,n,a,o=e.to(t,i,s),h=[o],l=[],_=[],u=[],p=e._internals.reservedProps;for(t=o._targets||o.target,Mt(t,l,u),o.render(i,!0),Mt(t,_),o.render(0,!0),o._enabled(!0),r=u.length;--r>-1;)if((n=H(u[r],l[r],_[r])).firstMPT){for(a in n=n.difs,s)p[a]&&(n[a]=s[a]);h.push(e.to(u[r],i,n))}return h},t.activate([a]),a},!0),function(){var t=window._gsDefine.plugin({propName:"roundProps",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}).prototype;t._onInitAllProps=function(){for(var t,e,i,s=this._tween,r=s.vars.roundProps instanceof Array?s.vars.roundProps:s.vars.roundProps.split(","),n=r.length,a={},o=s._propLookup.roundProps;--n>-1;)a[r[n]]=1;for(n=r.length;--n>-1;)for(t=r[n],e=s._firstPT;e;)i=e._next,e.pg?e.t._roundProps(a,!0):e.n===t&&(this._add(e.t,t,e.s,e.c),i&&(i._prev=e._prev),e._prev?e._prev._next=i:s._firstPT===e&&(s._firstPT=i),e._next=e._prev=null,s._propLookup[t]=o),e=i;return!1},t._add=function(t,e,i,s){this._addTween(t,e,i,i+s,e,!0),this._overwriteProps.push(e)}}(),window._gsDefine.plugin({propName:"attr",API:2,init:function(t,e){var i;if("function"!=typeof t.setAttribute)return!1;for(i in this._target=t,this._proxy={},e)this._addTween(this._proxy,i,parseFloat(t.getAttribute(i)),e[i],i)&&this._overwriteProps.push(i);return!0},set:function(t){this._super.setRatio.call(this,t);for(var e,i=this._overwriteProps,s=i.length;--s>-1;)e=i[s],this._target.setAttribute(e,this._proxy[e]+"")}}),window._gsDefine.plugin({propName:"directionalRotation",API:2,init:function(t,e){"object"!=typeof e&&(e={rotation:e}),this.finals={};var i,s,r,n,a,o=!0===e.useRadians?2*Math.PI:360;for(i in e)"useRadians"!==i&&(s=(a=(e[i]+"").split("_"))[0],r=parseFloat("function"!=typeof t[i]?t[i]:t[i.indexOf("set")||"function"!=typeof t["get"+i.substr(3)]?i:"get"+i.substr(3)]()),n=(this.finals[i]="string"==typeof s&&"="===s.charAt(1)?r+parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)):Number(s)||0)-r,a.length&&(-1!==(s=a.join("_")).indexOf("short")&&((n%=o)!==n%(o/2)&&(n=0>n?n+o:n-o)),-1!==s.indexOf("_cw")&&0>n?n=(n+9999999999*o)%o-(0|n/o)*o:-1!==s.indexOf("ccw")&&n>0&&(n=(n-9999999999*o)%o-(0|n/o)*o)),(n>1e-6||-1e-6>n)&&(this._addTween(t,i,r,r+n,i),this._overwriteProps.push(i)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,window._gsDefine("easing.Back",["easing.Ease"],function(t){var e,i,s,r=window.GreenSockGlobals||window,n=r.com.greensock,a=2*Math.PI,o=Math.PI/2,h=n._class,l=function(e,i){var s=h("easing."+e,function(){},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,s},_=t.register||function(){},u=function(t,e,i,s){var r=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new s},!0);return _(r,t),r},p=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},f=function(e,i){var s=h("easing."+e,function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1},!0),r=s.prototype=new t;return r.constructor=s,r.getRatio=i,r.config=function(t){return new s(t)},s},c=u("Back",f("BackOut",function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1}),f("BackIn",function(t){return t*t*((this._p1+1)*t-this._p1)}),f("BackInOut",function(t){return 1>(t*=2)?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)})),m=h("easing.SlowMo",function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i},!0),d=m.prototype=new t;return d.constructor=m,d.getRatio=function(t){var e=t+(.5-t)*this._p;return this._p1>t?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),d.config=m.config=function(t,e,i){return new m(t,e,i)},(d=(e=h("easing.SteppedEase",function(t){t=t||1,this._p1=1/t,this._p2=t+1},!0)).prototype=new t).constructor=e,d.getRatio=function(t){return 0>t?t=0:t>=1&&(t=.999999999),(this._p2*t>>0)*this._p1},d.config=e.config=function(t){return new e(t)},i=h("easing.RoughEase",function(e){for(var i,s,r,n,a,o,h=(e=e||{}).taper||"none",l=[],_=0,u=0|(e.points||20),f=u,c=!1!==e.randomize,m=!0===e.clamp,d=e.template instanceof t?e.template:null,g="number"==typeof e.strength?.4*e.strength:.4;--f>-1;)i=c?Math.random():1/u*f,s=d?d.getRatio(i):i,"none"===h?r=g:"out"===h?r=(n=1-i)*n*g:"in"===h?r=i*i*g:.5>i?r=.5*(n=2*i)*n*g:r=.5*(n=2*(1-i))*n*g,c?s+=Math.random()*r-.5*r:f%2?s+=.5*r:s-=.5*r,m&&(s>1?s=1:0>s&&(s=0)),l[_++]={x:i,y:s};for(l.sort(function(t,e){return t.x-e.x}),o=new p(1,1,null),f=u;--f>-1;)a=l[f],o=new p(a.x,a.y,o);this._prev=new p(0,0,0!==o.t?o:o.next)},!0),(d=i.prototype=new t).constructor=i,d.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&e.t>=t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},d.config=function(t){return new i(t)},i.ease=new i,u("Bounce",l("BounceOut",function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}),l("BounceIn",function(t){return 1/2.75>(t=1-t)?1-7.5625*t*t:2/2.75>t?1-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}),l("BounceInOut",function(t){var e=.5>t;return t=1/2.75>(t=e?1-2*t:2*t-1)?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5})),u("Circ",l("CircOut",function(t){return Math.sqrt(1-(t-=1)*t)}),l("CircIn",function(t){return-(Math.sqrt(1-t*t)-1)}),l("CircInOut",function(t){return 1>(t*=2)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)})),u("Elastic",(s=function(e,i,s){var r=h("easing."+e,function(t,e){this._p1=t||1,this._p2=e||s,this._p3=this._p2/a*(Math.asin(1/this._p1)||0)},!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t,e){return new r(t,e)},r})("ElasticOut",function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*a/this._p2)+1},.3),s("ElasticIn",function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2)},.3),s("ElasticInOut",function(t){return 1>(t*=2)?-.5*this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*a/this._p2):.5*this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*a/this._p2)+1},.45)),u("Expo",l("ExpoOut",function(t){return 1-Math.pow(2,-10*t)}),l("ExpoIn",function(t){return Math.pow(2,10*(t-1))-.001}),l("ExpoInOut",function(t){return 1>(t*=2)?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))})),u("Sine",l("SineOut",function(t){return Math.sin(t*o)}),l("SineIn",function(t){return 1-Math.cos(t*o)}),l("SineInOut",function(t){return-.5*(Math.cos(Math.PI*t)-1)})),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),_(r.SlowMo,"SlowMo","ease,"),_(i,"RoughEase","ease,"),_(e,"SteppedEase","ease,"),c},!0)}),function(t){"use strict";var e,i,s,r,n,a=t.GreenSockGlobals||t,o=function(t){var e,i=t.split("."),s=a;for(e=0;i.length>e;e++)s[i[e]]=s=s[i[e]]||{};return s},h=o("com.greensock"),l=[].slice,_=function(){},u={},p=function(e,i,s,r){this.sc=u[e]?u[e].sc:[],u[e]=this,this.gsClass=null,this.func=s;var n=[];this.check=function(h){for(var l,_,f,c,m=i.length,d=m;--m>-1;)(l=u[i[m]]||new p(i[m],[])).gsClass?(n[m]=l.gsClass,d--):h&&l.sc.push(this);if(0===d&&s)for(f=(_=("com.greensock."+e).split(".")).pop(),c=o(_.join("."))[f]=this.gsClass=s.apply(s,n),r&&(a[f]=c,"function"==typeof define&&define.amd?define((t.GreenSockAMDPath?t.GreenSockAMDPath+"/":"")+e.split(".").join("/"),[],function(){return c}):"undefined"!=typeof module&&module.exports&&(module.exports=c)),m=0;this.sc.length>m;m++)this.sc[m].check()},this.check(!0)},f=t._gsDefine=function(t,e,i,s){return new p(t,e,i,s)},c=h._class=function(t,e,i){return e=e||function(){},f(t,[],function(){return e},i),e};f.globals=a;var m=[0,0,1,1],d=[],g=c("easing.Ease",function(t,e,i,s){this._func=t,this._type=i||0,this._power=s||0,this._params=e?m.concat(e):m},!0),v=g.map={},y=g.register=function(t,e,i,s){for(var r,n,a,o,l=e.split(","),_=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--_>-1;)for(n=l[_],r=s?c("easing."+n,null,!0):h.easing[n]||{},a=u.length;--a>-1;)o=u[a],v[n+"."+o]=v[o+n]=r[o]=t.getRatio?t:t[o]||new t};for((s=g.prototype)._calcEnd=!1,s.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,s=1===e?1-t:2===e?t:.5>t?2*t:2*(1-t);return 1===i?s*=s:2===i?s*=s*s:3===i?s*=s*s*s:4===i&&(s*=s*s*s*s),1===e?1-s:2===e?s:.5>t?s/2:1-s/2},i=(e=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--i>-1;)s=e[i]+",Power"+i,y(new g(null,null,1,i),s,"easeOut",!0),y(new g(null,null,2,i),s,"easeIn"+(0===i?",easeNone":"")),y(new g(null,null,3,i),s,"easeInOut");v.linear=h.easing.Linear.easeIn,v.swing=h.easing.Quad.easeInOut;var T=c("events.EventDispatcher",function(t){this._listeners={},this._eventTarget=t||this});(s=T.prototype).addEventListener=function(t,e,i,s,a){a=a||0;var o,h,l=this._listeners[t],_=0;for(null==l&&(this._listeners[t]=l=[]),h=l.length;--h>-1;)(o=l[h]).c===e&&o.s===i?l.splice(h,1):0===_&&a>o.pr&&(_=h+1);l.splice(_,0,{c:e,s:i,up:s,pr:a}),this!==r||n||r.wake()},s.removeEventListener=function(t,e){var i,s=this._listeners[t];if(s)for(i=s.length;--i>-1;)if(s[i].c===e)return void s.splice(i,1)},s.dispatchEvent=function(t){var e,i,s,r=this._listeners[t];if(r)for(e=r.length,i=this._eventTarget;--e>-1;)(s=r[e]).up?s.c.call(s.s||i,{type:t,target:i}):s.c.call(s.s||i)};var x=t.requestAnimationFrame,w=t.cancelAnimationFrame,b=Date.now||function(){return(new Date).getTime()},P=b();for(i=(e=["ms","moz","webkit","o"]).length;--i>-1&&!x;)x=t[e[i]+"RequestAnimationFrame"],w=t[e[i]+"CancelAnimationFrame"]||t[e[i]+"CancelRequestAnimationFrame"];c("Ticker",function(t,e){var i,s,a,o,h,l=this,u=b(),p=!1!==e&&x,f=function(t){P=b(),l.time=(P-u)/1e3;var e,r=l.time-h;(!i||r>0||!0===t)&&(l.frame++,h+=r+(r>=o?.004:o-r),e=!0),!0!==t&&(a=s(f)),e&&l.dispatchEvent("tick")};T.call(l),this.time=this.frame=0,this.tick=function(){f(!0)},this.sleep=function(){null!=a&&(p&&w?w(a):clearTimeout(a),s=_,a=null,l===r&&(n=!1))},this.wake=function(){null!==a&&l.sleep(),s=0===i?_:p&&x?x:function(t){return setTimeout(t,0|1e3*(h-l.time)+1)},l===r&&(n=!0),f(2)},this.fps=function(t){return arguments.length?(o=1/((i=t)||60),h=this.time+o,void l.wake()):i},this.useRAF=function(t){return arguments.length?(l.sleep(),p=t,void l.fps(i)):p},l.fps(t),setTimeout(function(){p&&(!a||5>l.frame)&&l.useRAF(!1)},1500)}),(s=h.Ticker.prototype=new h.events.EventDispatcher).constructor=h.Ticker;var S=c("core.Animation",function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,L){n||r.wake();var i=this.vars.useFrames?N:L;i.add(this,i._time),this.vars.paused&&this.paused(!0)}});r=S.ticker=new h.Ticker,(s=S.prototype)._dirty=s._gc=s._initted=s._paused=!1,s._totalTime=s._time=0,s._rawPrevTime=-1,s._next=s._last=s._onUpdate=s._timeline=s.timeline=null,s._paused=!1;var R=function(){b()-P>2e3&&r.wake(),setTimeout(R,2e3)};R(),s.play=function(t,e){return arguments.length&&this.seek(t,e),this.reversed(!1).paused(!1)},s.pause=function(t,e){return arguments.length&&this.seek(t,e),this.paused(!0)},s.resume=function(t,e){return arguments.length&&this.seek(t,e),this.paused(!1)},s.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},s.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},s.reverse=function(t,e){return arguments.length&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},s.render=function(){},s.invalidate=function(){return this},s._enabled=function(t,e){return n||r.wake(),this._gc=!t,this._active=t&&!this._paused&&this._totalTime>0&&this._totalTime<this._totalDuration,!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},s._kill=function(){return this._enabled(!1,!1)},s.kill=function(t,e){return this._kill(t,e),this},s._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},s._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},s.eventCallback=function(t,e,i,s){if("on"===(t||"").substr(0,2)){var r=this.vars;if(1===arguments.length)return r[t];null==e?delete r[t]:(r[t]=e,r[t+"Params"]=i instanceof Array&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,r[t+"Scope"]=s),"onUpdate"===t&&(this._onUpdate=e)}return this},s.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},s.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},s.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},s.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},s.totalTime=function(t,e,i){if(n||r.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(0>t&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var s=this._totalDuration,a=this._timeline;if(t>s&&!i&&(t=s),this._startTime=(this._paused?this._pauseTime:a._time)-(this._reversed?s-t:t)/this._timeScale,a._dirty||this._uncache(!1),a._timeline)for(;a._timeline;)a._timeline._time!==(a._startTime+a._totalTime)/a._timeScale&&a.totalTime(a._totalTime,!0),a=a._timeline}this._gc&&this._enabled(!0,!1),this._totalTime!==t&&this.render(t,e,!1)}return this},s.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},s.timeScale=function(t){if(!arguments.length)return this._timeScale;if(t=t||1e-6,this._timeline&&this._timeline.smoothChildTiming){var e=this._pauseTime,i=e||0===e?e:this._timeline.totalTime();this._startTime=i-(i-this._startTime)*this._timeScale/t}return this._timeScale=t,this._uncache(!1)},s.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._totalTime,!0)),this):this._reversed},s.paused=function(t){if(!arguments.length)return this._paused;if(t!=this._paused&&this._timeline){n||t||r.wake();var e=this._timeline,i=e.rawTime(),s=i-this._pauseTime;!t&&e.smoothChildTiming&&(this._startTime+=s,this._uncache(!1)),this._pauseTime=t?i:null,this._paused=t,this._active=!t&&this._totalTime>0&&this._totalTime<this._totalDuration,t||0===s||0===this._duration||this.render(e.smoothChildTiming?this._totalTime:(i-this._startTime)/this._timeScale,!0,!0)}return this._gc&&!t&&this._enabled(!0,!1),this};var k=c("core.SimpleTimeline",function(t){S.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0});(s=k.prototype=new S).constructor=k,s.kill()._gc=!1,s._first=s._last=null,s._sortChildren=!1,s.add=s.insert=function(t,e){var i,s;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),i=this._last,this._sortChildren)for(s=t._startTime;i&&i._startTime>s;)i=i._prev;return i?(t._next=i._next,i._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=i,this._timeline&&this._uncache(!0),this},s._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t.timeline=null,t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),this._timeline&&this._uncache(!0)),this},s.render=function(t,e,i){var s,r=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;r;)s=r._next,(r._active||t>=r._startTime&&!r._paused)&&(r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=s},s.rawTime=function(){return n||r.wake(),this._totalTime};var A=c("TweenLite",function(e,i,s){if(S.call(this,i,s),this.render=A.prototype.render,null==e)throw"Cannot tween a null target.";this.target=e="string"!=typeof e?e:A.selector(e)||e;var r,n,a,o=e.jquery||e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType),h=this.vars.overwrite;if(this._overwrite=h=null==h?X[A.defaultOverwrite]:"number"==typeof h?h>>0:X[h],(o||e instanceof Array)&&"number"!=typeof e[0])for(this._targets=a=l.call(e,0),this._propLookup=[],this._siblings=[],r=0;a.length>r;r++)(n=a[r])?"string"!=typeof n?n.length&&n!==t&&n[0]&&(n[0]===t||n[0].nodeType&&n[0].style&&!n.nodeType)?(a.splice(r--,1),this._targets=a=a.concat(l.call(n,0))):(this._siblings[r]=E(n,this,!1),1===h&&this._siblings[r].length>1&&z(n,this,null,1,this._siblings[r])):"string"==typeof(n=a[r--]=A.selector(n))&&a.splice(r+1,1):a.splice(r--,1);else this._propLookup={},this._siblings=E(e,this,!1),1===h&&this._siblings.length>1&&z(e,this,null,1,this._siblings);(this.vars.immediateRender||0===i&&0===this._delay&&!1!==this.vars.immediateRender)&&this.render(-this._delay,!1,!0)},!0),C=function(e){return e.length&&e!==t&&e[0]&&(e[0]===t||e[0].nodeType&&e[0].style&&!e.nodeType)};(s=A.prototype=new S).constructor=A,s.kill()._gc=!1,s.ratio=0,s._firstPT=s._targets=s._overwrittenProps=s._startAt=null,s._notifyPluginsOfEnabled=!1,A.version="1.10.2",A.defaultEase=s._ease=new g(null,null,1,1),A.defaultOverwrite="auto",A.ticker=r,A.autoSleep=!0,A.selector=t.$||t.jQuery||function(e){return t.$?(A.selector=t.$,t.$(e)):t.document?t.document.getElementById("#"===e.charAt(0)?e.substr(1):e):e};var O=A._internals={},M=A._plugins={},D=A._tweenLookup={},I=0,F=O.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},X={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},N=S._rootFramesTimeline=new k,L=S._rootTimeline=new k;L._startTime=r.time,N._startTime=r.frame,L._active=N._active=!0,S._updateRoot=function(){if(L.render((r.time-L._startTime)*L._timeScale,!1,!1),N.render((r.frame-N._startTime)*N._timeScale,!1,!1),!(r.frame%120)){var t,e,i;for(i in D){for(t=(e=D[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete D[i]}if((!(i=L._first)||i._paused)&&A.autoSleep&&!N._first&&1===r._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||r.sleep()}}},r.addEventListener("tick",S._updateRoot);var E=function(t,e,i){var s,r,n=t._gsTweenID;if(D[n||(t._gsTweenID=n="t"+I++)]||(D[n]={target:t,tweens:[]}),e&&((s=D[n].tweens)[r=s.length]=e,i))for(;--r>-1;)s[r]===e&&s.splice(r,1);return D[n].tweens},z=function(t,e,i,s,r){var n,a,o,h;if(1===s||s>=4){for(h=r.length,n=0;h>n;n++)if((o=r[n])!==e)o._gc||o._enabled(!1,!1)&&(a=!0);else if(5===s)break;return a}var l,_=e._startTime+1e-10,u=[],p=0,f=0===e._duration;for(n=r.length;--n>-1;)(o=r[n])===e||o._gc||o._paused||(o._timeline!==e._timeline?(l=l||Y(e,0,f),0===Y(o,l,f)&&(u[p++]=o)):_>=o._startTime&&o._startTime+o.totalDuration()/o._timeScale+1e-10>_&&((f||!o._initted)&&2e-10>=_-o._startTime||(u[p++]=o)));for(n=p;--n>-1;)o=u[n],2===s&&o._kill(i,t)&&(a=!0),(2!==s||!o._firstPT&&o._initted)&&o._enabled(!1,!1)&&(a=!0);return a},Y=function(t,e,i){for(var s=t._timeline,r=s._timeScale,n=t._startTime,a=1e-10;s._timeline;){if(n+=s._startTime,r*=s._timeScale,s._paused)return-100;s=s._timeline}return(n/=r)>e?n-e:i&&n===e||!t._initted&&2*a>n-e?a:(n+=t.totalDuration()/t._timeScale/r)>e+a?0:n-e-a};s._init=function(){var t,e,i,s,r=this.vars,n=this._overwrittenProps,a=this._duration,o=r.immediateRender,h=r.ease;if(r.startAt){if(this._startAt&&this._startAt.render(-1,!0),r.startAt.overwrite=0,r.startAt.immediateRender=!0,this._startAt=A.to(this.target,0,r.startAt),o)if(this._time>0)this._startAt=null;else if(0!==a)return}else if(r.runBackwards&&r.immediateRender&&0!==a)if(this._startAt)this._startAt.render(-1,!0),this._startAt=null;else if(0===this._time){for(s in i={},r)F[s]&&"autoCSS"!==s||(i[s]=r[s]);return i.overwrite=0,void(this._startAt=A.to(this.target,0,i))}if(this._ease=h?h instanceof g?r.easeParams instanceof Array?h.config.apply(h,r.easeParams):h:"function"==typeof h?new g(h,r.easeParams):v[h]||A.defaultEase:A.defaultEase,this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(t=this._targets.length;--t>-1;)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],n?n[t]:null)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,n);if(e&&A._onPluginEvent("_onInitAllProps",this),n&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),r.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=r.onUpdate,this._initted=!0},s._initProps=function(e,i,s,r){var n,a,o,h,l,_;if(null==e)return!1;for(n in this.vars.css||e.style&&e!==t&&e.nodeType&&M.css&&!1!==this.vars.autoCSS&&function(t,e){var i,s={};for(i in t)F[i]||i in e&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!M[i]||M[i]&&M[i]._autoCSS)||(s[i]=t[i],delete t[i]);t.css=s}(this.vars,e),this.vars){if(_=this.vars[n],F[n])_ instanceof Array&&-1!==_.join("").indexOf("{self}")&&(this.vars[n]=_=this._swapSelfInParams(_,this));else if(M[n]&&(h=new M[n])._onInitTween(e,this.vars[n],this)){for(this._firstPT=l={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:!0,n:n,pg:!0,pr:h._priority},a=h._overwriteProps.length;--a>-1;)i[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(o=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0)}else this._firstPT=i[n]=l={_next:this._firstPT,t:e,p:n,f:"function"==typeof e[n],n:n,pg:!1,pr:0},l.s=l.f?e[n.indexOf("set")||"function"!=typeof e["get"+n.substr(3)]?n:"get"+n.substr(3)]():parseFloat(e[n]),l.c="string"==typeof _&&"="===_.charAt(1)?parseInt(_.charAt(0)+"1",10)*Number(_.substr(2)):Number(_)-l.s||0;l&&l._next&&(l._next._prev=l)}return r&&this._kill(r,e)?this._initProps(e,i,s,r):this._overwrite>1&&this._firstPT&&s.length>1&&z(e,this,i,this._overwrite,s)?(this._kill(i,e),this._initProps(e,i,s,r)):o},s.render=function(t,e,i){var s,r,n,a=this._time;if(t>=this._duration)this._totalTime=this._time=this._duration,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(s=!0,r="onComplete"),0===this._duration&&((0===t||0>this._rawPrevTime)&&this._rawPrevTime!==t&&(i=!0,this._rawPrevTime>0&&(r="onReverseComplete",e&&(t=-1))),this._rawPrevTime=t);else if(1e-7>t)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===this._duration&&this._rawPrevTime>0)&&(r="onReverseComplete",s=this._reversed),0>t?(this._active=!1,0===this._duration&&(this._rawPrevTime>=0&&(i=!0),this._rawPrevTime=t)):this._initted||(i=!0);else if(this._totalTime=this._time=t,this._easeType){var o=t/this._duration,h=this._easeType,l=this._easePower;(1===h||3===h&&o>=.5)&&(o=1-o),3===h&&(o*=2),1===l?o*=o:2===l?o*=o*o:3===l?o*=o*o*o:4===l&&(o*=o*o*o*o),this.ratio=1===h?1-o:2===h?o:.5>t/this._duration?o/2:1-o/2}else this.ratio=this._ease.getRatio(t/this._duration);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted)return;this._time&&!s?this.ratio=this._ease.getRatio(this._time/this._duration):s&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,e,i):r||(r="_dummyGS")),this.vars.onStart&&(0!==this._time||0===this._duration)&&(e||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||d))),n=this._firstPT;n;)n.f?n.t[n.p](n.c*this.ratio+n.s):n.t[n.p]=n.c*this.ratio+n.s,n=n._next;this._onUpdate&&(0>t&&this._startAt&&this._startAt.render(t,e,i),e||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||d)),r&&(this._gc||(0>t&&this._startAt&&!this._onUpdate&&this._startAt.render(t,e,i),s&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[r]&&this.vars[r].apply(this.vars[r+"Scope"]||this,this.vars[r+"Params"]||d)))}},s._kill=function(t,e){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._enabled(!1,!1);var i,s,r,n,a,o,h,l;if(((e="string"!=typeof e?e||this._targets||this.target:A.selector(e)||e)instanceof Array||C(e))&&"number"!=typeof e[0])for(i=e.length;--i>-1;)this._kill(t,e[i])&&(o=!0);else{if(this._targets){for(i=this._targets.length;--i>-1;)if(e===this._targets[i]){a=this._propLookup[i]||{},this._overwrittenProps=this._overwrittenProps||[],s=this._overwrittenProps[i]=t?this._overwrittenProps[i]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,s=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){for(r in h=t||a,l=t!==s&&"all"!==s&&t!==a&&(null==t||!0!==t._tempKill),h)(n=a[r])&&(n.pg&&n.t._kill(h)&&(o=!0),n.pg&&0!==n.t._overwriteProps.length||(n._prev?n._prev._next=n._next:n===this._firstPT&&(this._firstPT=n._next),n._next&&(n._next._prev=n._prev),n._next=n._prev=null),delete a[r]),l&&(s[r]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return o},s.invalidate=function(){return this._notifyPluginsOfEnabled&&A._onPluginEvent("_onDisable",this),this._firstPT=null,this._overwrittenProps=null,this._onUpdate=null,this._startAt=null,this._initted=this._active=this._notifyPluginsOfEnabled=!1,this._propLookup=this._targets?{}:[],this},s._enabled=function(t,e){if(n||r.wake(),t&&this._gc){var i,s=this._targets;if(s)for(i=s.length;--i>-1;)this._siblings[i]=E(s[i],this,!0);else this._siblings=E(this.target,this,!0)}return S.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&A._onPluginEvent(t?"_onEnable":"_onDisable",this)},A.to=function(t,e,i){return new A(t,e,i)},A.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new A(t,e,i)},A.fromTo=function(t,e,i,s){return s.startAt=i,s.immediateRender=0!=s.immediateRender&&0!=i.immediateRender,new A(t,e,s)},A.delayedCall=function(t,e,i,s,r){return new A(e,0,{delay:t,onComplete:e,onCompleteParams:i,onCompleteScope:s,onReverseComplete:e,onReverseCompleteParams:i,onReverseCompleteScope:s,immediateRender:!1,useFrames:r,overwrite:0})},A.set=function(t,e){return new A(t,0,e)},A.killTweensOf=A.killDelayedCallsTo=function(t,e){for(var i=A.getTweensOf(t),s=i.length;--s>-1;)i[s]._kill(e,t)},A.getTweensOf=function(t){if(null==t)return[];var e,i,s,r;if(((t="string"!=typeof t?t:A.selector(t)||t)instanceof Array||C(t))&&"number"!=typeof t[0]){for(e=t.length,i=[];--e>-1;)i=i.concat(A.getTweensOf(t[e]));for(e=i.length;--e>-1;)for(r=i[e],s=e;--s>-1;)r===i[s]&&i.splice(e,1)}else for(e=(i=E(t).concat()).length;--e>-1;)i[e]._gc&&i.splice(e,1);return i};var U=c("plugins.TweenPlugin",function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=U.prototype},!0);if(s=U.prototype,U.version="1.10.1",U.API=2,s._firstPT=null,s._addTween=function(t,e,i,s,r,n){var a,o;return null!=s&&(a="number"==typeof s||"="!==s.charAt(1)?Number(s)-i:parseInt(s.charAt(0)+"1",10)*Number(s.substr(2)))?(this._firstPT=o={_next:this._firstPT,t:t,p:e,s:i,c:a,f:"function"==typeof t[e],n:r||e,r:n},o._next&&(o._next._prev=o),o):void 0},s.setRatio=function(t){for(var e,i=this._firstPT;i;)e=i.c*t+i.s,i.r?e=0|e+(e>0?.5:-.5):1e-6>e&&e>-1e-6&&(e=0),i.f?i.t[i.p](e):i.t[i.p]=e,i=i._next},s._kill=function(t){var e,i=this._overwriteProps,s=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;s;)null!=t[s.n]&&(s._next&&(s._next._prev=s._prev),s._prev?(s._prev._next=s._next,s._prev=null):this._firstPT===s&&(this._firstPT=s._next)),s=s._next;return!1},s._roundProps=function(t,e){for(var i=this._firstPT;i;)(t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&(i.r=e),i=i._next},A._onPluginEvent=function(t,e){var i,s,r,n,a,o=e._firstPT;if("_onInitAllProps"===t){for(;o;){for(a=o._next,s=r;s&&s.pr>o.pr;)s=s._next;(o._prev=s?s._prev:n)?o._prev._next=o:r=o,(o._next=s)?s._prev=o:n=o,o=a}o=e._firstPT=r}for(;o;)o.pg&&"function"==typeof o.t[t]&&o.t[t]()&&(i=!0),o=o._next;return i},U.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===U.API&&(M[(new t[e])._propName]=t[e]);return!0},f.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,s=t.priority||0,r=t.overwriteProps,n={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},a=c("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",function(){U.call(this,i,s),this._overwriteProps=r||[]},!0===t.global),o=a.prototype=new U(i);for(e in o.constructor=a,a.API=t.API,n)"function"==typeof t[e]&&(o[n[e]]=t[e]);return a.version=t.version,U.activate([a]),a},e=t._gsQueue){for(i=0;e.length>i;i++)e[i]();for(s in u)u[s].func||t.console.log("GSAP encountered missing dependency: com.greensock."+s)}n=!1}(window);
!function(r,n,t,o,e,a){var i=t.pow(o,6),u=t.pow(2,52),f=2*u,c=o-1;function h(r){var n,t=r.length,e=this,a=0,i=e.i=e.j=0,u=e.S=[];for(t||(r=[t++]);a<o;)u[a]=a++;for(a=0;a<o;a++)u[a]=u[i=c&i+r[a%t]+(n=u[a])],u[i]=n;(e.g=function(r){for(var n,t=0,a=e.i,i=e.j,u=e.S;r--;)n=u[a=c&a+1],t=t*o+u[c&(u[a]=u[i=c&i+n])+(u[i]=n)];return e.i=a,e.j=i,t})(o)}function g(r,n){for(var t,o=r+"",e=0;e<o.length;)n[c&e]=c&(t^=19*n[c&e])+o.charCodeAt(e++);return p(n)}function p(r){return String.fromCharCode.apply(0,r)}t.seedrandom=function(e,a){var c=[],s=g(function r(n,t){var o,e=[],a=(typeof n)[0];if(t&&"o"==a)for(o in n)try{e.push(r(n[o],t-1))}catch(r){}return e.length?e:"s"==a?n:n+"\0"}(a?[e,p(n)]:0 in arguments?e:function(t){try{return r.crypto.getRandomValues(t=new Uint8Array(o)),p(t)}catch(t){return[+new Date,r,r.navigator.plugins,r.screen,p(n)]}}(),3),c),v=new h(c);return g(p(v.S),n),t.random=function(){for(var r=v.g(6),n=i,t=0;r<u;)r=(r+t)*o,n*=o,t=v.g(1);for(;r>=f;)r/=2,n/=2,t>>>=1;return(r+t)/n},s},g(t.random(),n)}(this,[],Math,256);
!function(){var e={},o=null,t=!0,i=!1;try{"undefined"!=typeof AudioContext?o=new AudioContext:"undefined"!=typeof webkitAudioContext?o=new webkitAudioContext:t=!1}catch(e){t=!1}if(!t)if("undefined"!=typeof Audio)try{new Audio}catch(e){i=!0}else i=!0;if(t){var n=void 0===o.createGain?o.createGainNode():o.createGain();n.gain.value=1,n.connect(o.destination)}var r=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=t,this.ctx=o,this.noAudio=i,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};r.prototype={volume:function(e){if((e=parseFloat(e))>=0&&e<=1){for(var o in this._volume=e,t&&(n.gain.value=e),this._howls)if(this._howls.hasOwnProperty(o)&&!1===this._howls[o]._webAudio)for(var i=0;i<this._howls[o]._audioNode.length;i++)this._howls[o]._audioNode[i].volume=this._howls[o]._volume*this._volume;return this}return t?n.gain.value:this._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){for(var o in this._muted=e,t&&(n.gain.value=e?0:this._volume),this._howls)if(this._howls.hasOwnProperty(o)&&!1===this._howls[o]._webAudio)for(var i=0;i<this._howls[o]._audioNode.length;i++)this._howls[o]._audioNode[i].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!o||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var t=function(){var i=o.createBuffer(1,1,22050),n=o.createBufferSource();n.buffer=i,n.connect(o.destination),void 0===n.start?n.noteOn(0):n.start(0),setTimeout(function(){n.playbackState!==n.PLAYING_STATE&&n.playbackState!==n.FINISHED_STATE||(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchend",t,!1))},0)};return window.addEventListener("touchend",t,!1),e}}};var a=null,u={};i||(a=new Audio,u={mp3:!!a.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var d=new r(u),s=function(e){this._autoplay=e.autoplay||!1,this._buffer=e.buffer||!1,this._duration=e.duration||0,this._format=e.format||null,this._loop=e.loop||!1,this._loaded=!1,this._sprite=e.sprite||{},this._src=e.src||"",this._pos3d=e.pos3d||[0,0,-.5],this._volume=void 0!==e.volume?e.volume:1,this._urls=e.urls||[],this._rate=e.rate||1,this._model=e.model||null,this._onload=[e.onload||function(){}],this._onloaderror=[e.onloaderror||function(){}],this._onend=[e.onend||function(){}],this._onpause=[e.onpause||function(){}],this._onplay=[e.onplay||function(){}],this._onendTimer=[],this._webAudio=t&&!this._buffer,this._audioNode=[],this._webAudio&&this._setupAudioNode(),void 0!==o&&o&&d.iOSAutoEnable&&d._enableiOSAudio(),d._howls.push(this),this.load()};if(s.prototype={load:function(){var e=this,o=null;if(i)e.on("loaderror",new Error("No audio support."));else{for(var t=0;t<e._urls.length;t++){var n,a;if(e._format)n=e._format;else{if(a=e._urls[t],(n=/^data:audio\/([^;,]+);/i.exec(a))||(n=/\.([^.]+)$/.exec(a.split("?",1)[0])),!n)return void e.on("loaderror",new Error("Could not extract format from passed URLs, please add format parameter."));n=n[1].toLowerCase()}if(u[n]){o=e._urls[t];break}}if(o){if(e._src=o,e._webAudio)l(e,o);else{var s=new Audio;s.addEventListener("error",function(){s.error&&4===s.error.code&&(r.noAudio=!0),e.on("loaderror",{type:s.error?s.error.code:0})},!1),e._audioNode.push(s),s.src=o,s._pos=0,s.preload="auto",s.volume=d._muted?0:e._volume*d.volume();var f=function(){e._duration=Math.ceil(10*s.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),s.removeEventListener("canplaythrough",f,!1)};s.addEventListener("canplaythrough",f,!1),s.load()}return e}e.on("loaderror",new Error("No codec support for selected audio sources."))}},urls:function(e){return e?(this.stop(),this._urls="string"==typeof e?[e]:e,this._loaded=!1,this.load(),this):this._urls},play:function(e,t){var i=this;return"function"==typeof e&&(t=e),e&&"function"!=typeof e||(e="_default"),i._loaded?i._sprite[e]?(i._inactiveNode(function(n){n._sprite=e;var r=n._pos>0?n._pos:i._sprite[e][0]/1e3,a=0;i._webAudio?(a=i._sprite[e][1]/1e3-n._pos,n._pos>0&&(r=i._sprite[e][0]/1e3+r)):a=i._sprite[e][1]/1e3-(r-i._sprite[e][0]/1e3);var u,s,l,f,_,p,h,v=!(!i._loop&&!i._sprite[e][2]),m="string"==typeof t?t:Math.round(Date.now()*Math.random())+"";if(s={id:m,sprite:e,loop:v},u=setTimeout(function(){!i._webAudio&&v&&i.stop(s.id).play(e,s.id),i._webAudio&&!v&&(i._nodeById(s.id).paused=!0,i._nodeById(s.id)._pos=0,i._clearEndTimer(s.id)),i._webAudio||v||i.stop(s.id),i.on("end",m)},a/i._rate*1e3),i._onendTimer.push({timer:u,id:s.id}),i._webAudio){var y=i._sprite[e][0]/1e3,b=i._sprite[e][1]/1e3;n.id=m,n.paused=!1,c(i,[v,y,b],m),i._playStart=o.currentTime,n.gain.value=i._volume,void 0===n.bufferSource.start?v?n.bufferSource.noteGrainOn(0,r,86400):n.bufferSource.noteGrainOn(0,r,a):v?n.bufferSource.start(0,r,86400):n.bufferSource.start(0,r,a)}else{if(4!==n.readyState&&(n.readyState||!navigator.isCocoonJS))return i._clearEndTimer(m),l=i,f=e,_=t,h=function(){l.play(f,_),p.removeEventListener("canplaythrough",h,!1)},(p=n).addEventListener("canplaythrough",h,!1),i;n.readyState=4,n.id=m,n.currentTime=r,n.muted=d._muted||n.muted,n.volume=i._volume*d.volume(),setTimeout(function(){n.play()},0)}return i.on("play"),"function"==typeof t&&t(m),i}),i):("function"==typeof t&&t(),i):(i.on("load",function(){i.play(e,t)}),i)},pause:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.pause(e)}),o;o._clearEndTimer(e);var t=e?o._nodeById(e):o._activeNode();if(t)if(t._pos=o.pos(null,e),o._webAudio){if(!t.bufferSource||t.paused)return o;t.paused=!0,void 0===t.bufferSource.stop?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else t.pause();return o.on("pause"),o},stop:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.stop(e)}),o;o._clearEndTimer(e);var t=e?o._nodeById(e):o._activeNode();if(t)if(t._pos=0,o._webAudio){if(!t.bufferSource||t.paused)return o;t.paused=!0,void 0===t.bufferSource.stop?t.bufferSource.noteOff(0):t.bufferSource.stop(0)}else isNaN(t.duration)||(t.pause(),t.currentTime=0);return o},mute:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.mute(e)}),o;var t=e?o._nodeById(e):o._activeNode();return t&&(o._webAudio?t.gain.value=0:t.muted=!0),o},unmute:function(e){var o=this;if(!o._loaded)return o.on("play",function(){o.unmute(e)}),o;var t=e?o._nodeById(e):o._activeNode();return t&&(o._webAudio?t.gain.value=o._volume:t.muted=!1),o},volume:function(e,o){var t=this;if((e=parseFloat(e))>=0&&e<=1){if(t._volume=e,!t._loaded)return t.on("play",function(){t.volume(e,o)}),t;var i=o?t._nodeById(o):t._activeNode();return i&&(t._webAudio?i.gain.value=e:i.volume=e*d.volume()),t}return t._volume},loop:function(e){return"boolean"==typeof e?(this._loop=e,this):this._loop},sprite:function(e){return"object"==typeof e?(this._sprite=e,this):this._sprite},pos:function(e,t){var i=this;if(!i._loaded)return i.on("load",function(){i.pos(e)}),"number"==typeof e?i:i._pos||0;e=parseFloat(e);var n=t?i._nodeById(t):i._activeNode();if(n)return e>=0?(i.pause(t),n._pos=e,i.play(n._sprite,t),i):i._webAudio?n._pos+(o.currentTime-i._playStart):n.currentTime;if(e>=0)return i;for(var r=0;r<i._audioNode.length;r++)if(i._audioNode[r].paused&&4===i._audioNode[r].readyState)return i._webAudio?i._audioNode[r]._pos:i._audioNode[r].currentTime},pos3d:function(e,o,t,i){var n=this;if(o=void 0!==o&&o?o:0,t=void 0!==t&&t?t:-.5,!n._loaded)return n.on("play",function(){n.pos3d(e,o,t,i)}),n;if(!(e>=0||e<0))return n._pos3d;if(n._webAudio){var r=i?n._nodeById(i):n._activeNode();r&&(n._pos3d=[e,o,t],r.panner.setPosition(e,o,t),r.panner.panningModel=n._model||"HRTF")}return n},fade:function(e,o,t,i,n){var r=this,a=Math.abs(e-o),u=e>o?"down":"up",d=a/.01,s=t/d;if(!r._loaded)return r.on("load",function(){r.fade(e,o,t,i,n)}),r;r.volume(e,n);for(var l=1;l<=d;l++)!function(){var e=r._volume+("up"===u?.01:-.01)*l,t=Math.round(1e3*e)/1e3,a=o;setTimeout(function(){r.volume(t,n),t===a&&i&&i()},s*l)}()},fadeIn:function(e,o,t){return this.volume(0).play().fade(0,e,o,t)},fadeOut:function(e,o,t,i){var n=this;return n.fade(n._volume,e,o,function(){t&&t(),n.pause(i),n.on("end")},i)},_nodeById:function(e){for(var o=this._audioNode[0],t=0;t<this._audioNode.length;t++)if(this._audioNode[t].id===e){o=this._audioNode[t];break}return o},_activeNode:function(){for(var e=null,o=0;o<this._audioNode.length;o++)if(!this._audioNode[o].paused){e=this._audioNode[o];break}return this._drainPool(),e},_inactiveNode:function(e){for(var o,t=null,i=0;i<this._audioNode.length;i++)if(this._audioNode[i].paused&&4===this._audioNode[i].readyState){e(this._audioNode[i]),t=!0;break}if(this._drainPool(),!t)if(this._webAudio)o=this._setupAudioNode(),e(o);else{this.load(),o=this._audioNode[this._audioNode.length-1];var n=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",r=function(){o.removeEventListener(n,r,!1),e(o)};o.addEventListener(n,r,!1)}},_drainPool:function(){var e,o=0;for(e=0;e<this._audioNode.length;e++)this._audioNode[e].paused&&o++;for(e=this._audioNode.length-1;e>=0&&!(o<=5);e--)this._audioNode[e].paused&&(this._webAudio&&this._audioNode[e].disconnect(0),o--,this._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var o=-1,t=0;t<this._onendTimer.length;t++)if(this._onendTimer[t].id===e){o=t;break}var i=this._onendTimer[o];i&&(clearTimeout(i.timer),this._onendTimer.splice(o,1))},_setupAudioNode:function(){var e=this._audioNode,t=this._audioNode.length;return e[t]=void 0===o.createGain?o.createGainNode():o.createGain(),e[t].gain.value=this._volume,e[t].paused=!0,e[t]._pos=0,e[t].readyState=4,e[t].connect(n),e[t].panner=o.createPanner(),e[t].panner.panningModel=this._model||"equalpower",e[t].panner.setPosition(this._pos3d[0],this._pos3d[1],this._pos3d[2]),e[t].panner.connect(e[t]),e[t]},on:function(e,o){var t=this["_on"+e];if("function"==typeof o)t.push(o);else for(var i=0;i<t.length;i++)o?t[i].call(this,o):t[i].call(this);return this},off:function(e,o){var t=this["_on"+e];if(o){for(var i=0;i<t.length;i++)if(o===t[i]){t.splice(i,1);break}}else this["_on"+e]=[];return this},unload:function(){for(var o=this,t=o._audioNode,i=0;i<o._audioNode.length;i++)t[i].paused||(o.stop(t[i].id),o.on("end",t[i].id)),o._webAudio?t[i].disconnect(0):t[i].src="";for(i=0;i<o._onendTimer.length;i++)clearTimeout(o._onendTimer[i].timer);var n=d._howls.indexOf(o);null!==n&&n>=0&&d._howls.splice(n,1),delete e[o._src],o=null}},t)var l=function(o,t){if(t in e)return o._duration=e[t].duration,void _(o);if(/^data:[^;]+;base64,/.test(t)){for(var i=atob(t.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);f(n.buffer,o,t)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){f(a.response,o,t)},a.onerror=function(){o._webAudio&&(o._buffer=!0,o._webAudio=!1,o._audioNode=[],delete o._gainNode,delete e[t],o.load())};try{a.send()}catch(e){a.onerror()}}},f=function(t,i,n){o.decodeAudioData(t,function(o){o&&(e[n]=o,_(i,o))},function(e){i.on("loaderror",e)})},_=function(e,o){e._duration=o?o.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},c=function(t,i,n){var r=t._nodeById(n);r.bufferSource=o.createBufferSource(),r.bufferSource.buffer=e[t._src],r.bufferSource.connect(r.panner),r.bufferSource.loop=i[0],i[0]&&(r.bufferSource.loopStart=i[1],r.bufferSource.loopEnd=i[1]+i[2]),r.bufferSource.playbackRate.value=t._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:d,Howl:s}}),"undefined"!=typeof exports&&(exports.Howler=d,exports.Howl=s),"undefined"!=typeof window&&(window.Howler=d,window.Howl=s)}();
var vis=function(){var i,e,n={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(i in n)if(i in document){e=n[i];break}return function(n){return n&&document.addEventListener(e,n),!document[i]}}();vis(function(){vis()?setTimeout(function(){visibleResume()},300):visiblePause()});var notIE=void 0===document.documentMode,isChromium=window.chrome;notIE&&!isChromium||(window.addEventListener?(window.addEventListener("focus",function(i){setTimeout(function(){visibleResume()},300)},!1),window.addEventListener("blur",function(i){visiblePause()},!1)):(window.attachEvent("focus",function(i){setTimeout(function(){visibleResume()},300)}),window.attachEvent("blur",function(i){visiblePause()})));
var Utils;!function(a){var e=function(){function a(a,e,t,r,s,i){void 0===i&&(i=!0),this.oAssetData={},this.assetsLoaded=0,this.totalAssets=e.length,this.ctx=t,this.canvasWidth=r,this.canvasHeight=s,this.showBar=i,this.topLeftX=this.canvasWidth/2-r/4,this.topLeftY=360,this.showBar&&(ctx.strokeStyle="#3C459A",ctx.lineWidth=2,ctx.fillStyle="#FF9A00",ctx.moveTo(this.topLeftX,this.topLeftY),ctx.lineTo(this.topLeftX+r/2,this.topLeftY+0),ctx.lineTo(this.topLeftX+r/2,this.topLeftY+20),ctx.lineTo(this.topLeftX+0,this.topLeftY+20),ctx.lineTo(this.topLeftX+0,this.topLeftY+0),ctx.stroke());for(var o=0;o<e.length;o++)this.loadImage(e[o])}return a.prototype.loadImage=function(a){var e=this,t=new Image;t.onload=function(){e.oAssetData[a.id]={},e.oAssetData[a.id].img=t,e.oAssetData[a.id].oData={};var r=e.getSpriteSize(a.file);0!=r[0]?(e.oAssetData[a.id].oData.spriteWidth=r[0],e.oAssetData[a.id].oData.spriteHeight=r[1]):(e.oAssetData[a.id].oData.spriteWidth=e.oAssetData[a.id].img.width,e.oAssetData[a.id].oData.spriteHeight=e.oAssetData[a.id].img.height),a.oAnims&&(e.oAssetData[a.id].oData.oAnims=a.oAnims),a.oAtlasData?e.oAssetData[a.id].oData.oAtlasData=a.oAtlasData:e.oAssetData[a.id].oData.oAtlasData={none:{x:0,y:0,width:e.oAssetData[a.id].oData.spriteWidth,height:e.oAssetData[a.id].oData.spriteHeight}},++e.assetsLoaded,e.showBar&&ctx.fillRect(e.topLeftX+2,e.topLeftY+2,(e.canvasWidth/2-4)/e.totalAssets*e.assetsLoaded,16),e.checkLoadComplete()},t.src=a.file},a.prototype.getSpriteSize=function(a){for(var e=new Array,t="",r="",s=0,i=a.lastIndexOf("."),o=!0;o;)i--,0==s&&this.isNumber(a.charAt(i))?t=a.charAt(i)+t:0==s&&t.length>0&&"x"==a.charAt(i)?(i--,s=1,r=a.charAt(i)+r):1==s&&this.isNumber(a.charAt(i))?r=a.charAt(i)+r:1==s&&r.length>0&&"_"==a.charAt(i)?(o=!1,e=[parseInt(r),parseInt(t)]):(o=!1,e=[0,0]);return e},a.prototype.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},a.prototype.checkLoadComplete=function(){this.assetsLoaded==this.totalAssets&&this.loadedCallback()},a.prototype.onReady=function(a){this.loadedCallback=a},a.prototype.getImg=function(a){return this.oAssetData[a].img},a.prototype.getData=function(a){return this.oAssetData[a]},a}();a.AssetLoader=e}(Utils||(Utils={})),function(a){var e=function(){function a(a,e,t,r){this.x=0,this.y=0,this.rotation=0,this.radius=10,this.removeMe=!1,this.frameInc=0,this.animType="loop",this.offsetX=0,this.offsetY=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.oImgData=a,this.oAnims=this.oImgData.oData.oAnims,this.fps=e,this.radius=t,this.animId=r,this.centreX=Math.round(this.oImgData.oData.spriteWidth/2),this.centreY=Math.round(this.oImgData.oData.spriteHeight/2)}return a.prototype.updateAnimation=function(a){this.frameInc+=this.fps*a},a.prototype.changeImgData=function(a,e){this.oImgData=a,this.oAnims=this.oImgData.oData.oAnims,this.animId=e,this.centreX=Math.round(this.oImgData.oData.spriteWidth/2),this.centreY=Math.round(this.oImgData.oData.spriteHeight/2),this.resetAnim()},a.prototype.resetAnim=function(){this.frameInc=0},a.prototype.setFrame=function(a){this.fixedFrame=a},a.prototype.setAnimType=function(a,e,t){switch(void 0===t&&(t=!0),this.animId=e,this.animType=a,t&&this.resetAnim(),a){case"loop":break;case"once":this.maxIdx=this.oAnims[this.animId].length-1}},a.prototype.render=function(a){if(a.save(),a.translate(this.x,this.y),a.rotate(this.rotation),a.scale(this.scaleX,this.scaleY),a.globalAlpha=this.alpha,null!=this.animId){var e=this.oAnims[this.animId].length,t=Math.floor(this.frameInc);this.curFrame=this.oAnims[this.animId][t%e];var r=this.curFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.curFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;if("once"==this.animType&&t>this.maxIdx){this.fixedFrame=this.oAnims[this.animId][e-1],this.animId=null,null!=this.animEndedFunc&&this.animEndedFunc();r=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight}}else r=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;a.drawImage(this.oImgData.img,r,s,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,-this.centreX+this.offsetX,-this.centreY+this.offsetY,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight),a.restore()},a.prototype.renderSimple=function(a){if(null!=this.animId){var e=this.oAnims[this.animId].length,t=Math.floor(this.frameInc);this.curFrame=this.oAnims[this.animId][t%e];var r=this.curFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.curFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;if("once"==this.animType&&t>this.maxIdx){this.fixedFrame=this.oAnims[this.animId][e-1],this.animId=null,null!=this.animEndedFunc&&this.animEndedFunc();r=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight}}else r=this.fixedFrame*this.oImgData.oData.spriteWidth%this.oImgData.img.width,s=Math.floor(this.fixedFrame/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;a.drawImage(this.oImgData.img,r,s,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,this.x-(this.centreX-this.offsetX)*this.scaleX,this.y-(this.centreY-this.offsetY)*this.scaleY,this.oImgData.oData.spriteWidth*this.scaleX,this.oImgData.oData.spriteHeight*this.scaleY)},a}();a.AnimSprite=e}(Utils||(Utils={})),function(a){var e=function(){function a(a,e,t){void 0===t&&(t=0),this.x=0,this.y=0,this.rotation=0,this.radius=10,this.removeMe=!1,this.offsetX=0,this.offsetY=0,this.scaleX=1,this.scaleY=1,this.oImgData=a,this.radius=e,this.setFrame(t)}return a.prototype.setFrame=function(a){this.frameNum=a},a.prototype.render=function(a){a.save(),a.translate(this.x,this.y),a.rotate(this.rotation),a.scale(this.scaleX,this.scaleY);var e=this.frameNum*this.oImgData.oData.spriteWidth%this.oImgData.img.width,t=Math.floor(this.frameNum/(this.oImgData.img.width/this.oImgData.oData.spriteWidth))*this.oImgData.oData.spriteHeight;a.drawImage(this.oImgData.img,e,t,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight,-this.oImgData.oData.spriteWidth/2+this.offsetX,-this.oImgData.oData.spriteHeight/2+this.offsetY,this.oImgData.oData.spriteWidth,this.oImgData.oData.spriteHeight),a.restore()},a}();a.BasicSprite=e}(Utils||(Utils={})),function(a){var e=function(){function a(a,e){var t=this;this.canvasX=0,this.canvasY=0,this.canvasScaleX=1,this.canvasScaleY=1,this.prevHitTime=0,this.pauseIsOn=!1,this.isDown=!1,this.isDetectingKeys=!1,this.isBugBrowser=e,this.keyDownEvtFunc=function(a){t.keyDown(a)},this.keyUpEvtFunc=function(a){t.keyUp(a)},a.addEventListener("touchstart",function(a){for(var e=0;e<a.changedTouches.length;e++)t.hitDown(a,a.changedTouches[e].pageX,a.changedTouches[e].pageY,a.changedTouches[e].identifier)},!1),a.addEventListener("touchend",function(a){for(var e=0;e<a.changedTouches.length;e++)t.hitUp(a,a.changedTouches[e].pageX,a.changedTouches[e].pageY,a.changedTouches[e].identifier)},!1),a.addEventListener("touchmove",function(a){for(var e=0;e<a.changedTouches.length;e++)t.move(a,a.changedTouches[e].pageX,a.changedTouches[e].pageY,a.changedTouches[e].identifier,!0)},!1),a.addEventListener("mousedown",function(a){t.isDown=!0,t.hitDown(a,a.pageX,a.pageY,1)},!1),a.addEventListener("mouseup",function(a){t.isDown=!1,t.hitUp(a,a.pageX,a.pageY,1)},!1),a.addEventListener("mousemove",function(a){t.move(a,a.pageX,a.pageY,1,t.isDown)},!1),this.aHitAreas=new Array,this.aKeys=new Array}return a.prototype.setCanvas=function(a,e,t,r){this.canvasX=a,this.canvasY=e,this.canvasScaleX=t,this.canvasScaleY=r},a.prototype.hitDown=function(a,e,t,r){if(a.preventDefault(),a.stopPropagation(),!this.pauseIsOn){var s=(new Date).getTime();e=(e-this.canvasX)*this.canvasScaleX,t=(t-this.canvasY)*this.canvasScaleY;for(var i=0;i<this.aHitAreas.length;i++)if(this.aHitAreas[i].rect&&e>this.aHitAreas[i].area[0]&&t>this.aHitAreas[i].area[1]&&e<this.aHitAreas[i].area[2]&&t<this.aHitAreas[i].area[3]){if(this.aHitAreas[i].aTouchIdentifiers.push(r),this.aHitAreas[i].oData.hasLeft=!1,!this.aHitAreas[i].oData.isDown){if(this.aHitAreas[i].oData.isDown=!0,this.aHitAreas[i].oData.x=e,this.aHitAreas[i].oData.y=t,s-this.prevHitTime<500&&("game"!=gameState||"pause"==this.aHitAreas[i].id)&&isBugBrowser)return;this.aHitAreas[i].callback(this.aHitAreas[i].id,this.aHitAreas[i].oData)}break}this.prevHitTime=s}},a.prototype.hitUp=function(a,e,t,r){if(ios9FirstTouch||(playSound("silence"),ios9FirstTouch=!0),!this.pauseIsOn){a.preventDefault(),a.stopPropagation(),e=(e-this.canvasX)*this.canvasScaleX,t=(t-this.canvasY)*this.canvasScaleY;for(var s=0;s<this.aHitAreas.length;s++)if(this.aHitAreas[s].rect&&e>this.aHitAreas[s].area[0]&&t>this.aHitAreas[s].area[1]&&e<this.aHitAreas[s].area[2]&&t<this.aHitAreas[s].area[3]){for(var i=0;i<this.aHitAreas[s].aTouchIdentifiers.length;i++)this.aHitAreas[s].aTouchIdentifiers[i]==r&&(this.aHitAreas[s].aTouchIdentifiers.splice(i,1),i-=1);0==this.aHitAreas[s].aTouchIdentifiers.length&&(this.aHitAreas[s].oData.isDown=!1,this.aHitAreas[s].oData.multiTouch&&(this.aHitAreas[s].oData.x=e,this.aHitAreas[s].oData.y=t,this.aHitAreas[s].callback(this.aHitAreas[s].id,this.aHitAreas[s].oData)));break}}},a.prototype.move=function(a,e,t,r,s){if(!this.pauseIsOn&&s){e=(e-this.canvasX)*this.canvasScaleX,t=(t-this.canvasY)*this.canvasScaleY;for(var i=0;i<this.aHitAreas.length;i++)if(this.aHitAreas[i].rect)if(e>this.aHitAreas[i].area[0]&&t>this.aHitAreas[i].area[1]&&e<this.aHitAreas[i].area[2]&&t<this.aHitAreas[i].area[3])this.aHitAreas[i].oData.hasLeft=!1,this.aHitAreas[i].oData.isDown||(this.aHitAreas[i].oData.isDown=!0,this.aHitAreas[i].oData.x=e,this.aHitAreas[i].oData.y=t,this.aHitAreas[i].aTouchIdentifiers.push(r),this.aHitAreas[i].oData.multiTouch&&this.aHitAreas[i].callback(this.aHitAreas[i].id,this.aHitAreas[i].oData)),this.aHitAreas[i].oData.isDraggable&&(this.aHitAreas[i].oData.isBeingDragged=!0,this.aHitAreas[i].oData.x=e,this.aHitAreas[i].oData.y=t,this.aHitAreas[i].callback(this.aHitAreas[i].id,this.aHitAreas[i].oData),this.aHitAreas[i].oData.isBeingDragged=!1);else if(this.aHitAreas[i].oData.isDown&&!this.aHitAreas[i].oData.hasLeft){for(var o=0;o<this.aHitAreas[i].aTouchIdentifiers.length;o++)this.aHitAreas[i].aTouchIdentifiers[o]==r&&(this.aHitAreas[i].aTouchIdentifiers.splice(o,1),o-=1);0==this.aHitAreas[i].aTouchIdentifiers.length&&(this.aHitAreas[i].oData.hasLeft=!0,this.aHitAreas[i].oData.isBeingDragged||(this.aHitAreas[i].oData.isDown=!1),this.aHitAreas[i].oData.multiTouch&&this.aHitAreas[i].callback(this.aHitAreas[i].id,this.aHitAreas[i].oData))}}},a.prototype.keyDown=function(a){for(var e=0;e<this.aKeys.length;e++)a.keyCode==this.aKeys[e].keyCode&&(this.aKeys[e].oData.isDown=!0,this.aKeys[e].callback(this.aKeys[e].id,this.aKeys[e].oData))},a.prototype.keyUp=function(a){for(var e=0;e<this.aKeys.length;e++)a.keyCode==this.aKeys[e].keyCode&&(this.aKeys[e].oData.isDown=!1,this.aKeys[e].callback(this.aKeys[e].id,this.aKeys[e].oData))},a.prototype.addKey=function(a,e,t,r){var s=this;this.isDetectingKeys||(window.focus(),window.addEventListener("keydown",function(a){s.keyDown(a)},!1),window.addEventListener("keyup",function(a){s.keyUp(a)},!1),this.isDetectingKeys=!0),null==t&&(t=new Object),this.aKeys.push({id:a,callback:e,oData:t,keyCode:r})},a.prototype.removeKey=function(a){for(var e=0;e<this.aKeys.length;e++)this.aKeys[e].id==a&&(this.aKeys.splice(e,1),e-=1)},a.prototype.addHitArea=function(a,e,t,r,s,i){void 0===i&&(i=!1),null==t&&(t=new Object),i&&this.removeHitArea(a),s.scale||(s.scale=1);var o=new Array;switch(r){case"image":var g;g=new Array(s.aPos[0]-s.oImgData.oData.oAtlasData[s.id].width/2*s.scale,s.aPos[1]-s.oImgData.oData.oAtlasData[s.id].height/2*s.scale,s.aPos[0]+s.oImgData.oData.oAtlasData[s.id].width/2*s.scale,s.aPos[1]+s.oImgData.oData.oAtlasData[s.id].height/2*s.scale),this.aHitAreas.push({id:a,aTouchIdentifiers:o,callback:e,oData:t,rect:!0,area:g});break;case"rect":this.aHitAreas.push({id:a,aTouchIdentifiers:o,callback:e,oData:t,rect:!0,area:s.aRect})}},a.prototype.checkKeyFocus=function(){window.focus(),this.aKeys.length>0&&(window.removeEventListener("keydown",this.keyDownEvtFunc,!1),window.removeEventListener("keyup",this.keyUpEvtFunc,!1),window.addEventListener("keydown",this.keyDownEvtFunc,!1),window.addEventListener("keyup",this.keyUpEvtFunc,!1))},a.prototype.removeHitArea=function(a){for(var e=0;e<this.aHitAreas.length;e++)this.aHitAreas[e].id==a&&(this.aHitAreas.splice(e,1),e-=1)},a.prototype.resetAll=function(){for(var a=0;a<this.aHitAreas.length;a++)this.aHitAreas[a].oData.isDown=!1,this.aHitAreas[a].oData.isBeingDragged=!1,this.aHitAreas[a].aTouchIdentifiers=new Array;this.isDown=!1},a}();a.UserInput=e}(Utils||(Utils={})),function(a){var e=function(){function a(a){this.updateFreq=10,this.updateInc=0,this.frameAverage=0,this.display=1,this.log="",this.render=function(a){this.frameAverage+=this.delta/this.updateFreq,++this.updateInc>=this.updateFreq&&(this.updateInc=0,this.display=this.frameAverage,this.frameAverage=0),a.textAlign="left",ctx.font="10px Helvetica",a.fillStyle="#333333",a.beginPath(),a.rect(0,this.canvasHeight-15,40,15),a.closePath(),a.fill(),a.fillStyle="#ffffff",a.fillText(Math.round(1e3/(1e3*this.display))+" fps "+this.log,5,this.canvasHeight-5)},this.canvasHeight=a}return a.prototype.update=function(a){this.delta=a},a}();a.FpsMeter=e}(Utils||(Utils={})),function(a){var e=function(){function a(a){this.x=0,this.y=0,this.targY=0,this.incY=0,this.renderState="none",this.oImgData=assetLib.getData(a)}return a.prototype.setMapPos=function(){switch(Math.seedrandom(pinPage),pinPage%4){case 0:this.oMapPosData={leftX:Math.random()*(this.oImgData.img.width-canvas.width),leftY:Math.random()*(this.oImgData.img.height-canvas.height),scaleX:1,scaleY:1,rightX:0,rightY:0};break;case 1:this.oMapPosData={leftX:Math.random()*(this.oImgData.img.width-canvas.width),leftY:Math.random()*(this.oImgData.img.height-canvas.height),scaleX:-1,scaleY:1,rightX:-canvas.width,rightY:0};break;case 2:this.oMapPosData={leftX:Math.random()*(this.oImgData.img.width-canvas.width),leftY:Math.random()*(this.oImgData.img.height-canvas.height),scaleX:1,scaleY:-1,rightX:0,rightY:-canvas.height};break;case 3:this.oMapPosData={leftX:Math.random()*(this.oImgData.img.width-canvas.width),leftY:Math.random()*(this.oImgData.img.height-canvas.height),scaleX:-1,scaleY:-1,rightX:-canvas.width,rightY:-canvas.height}}},a.prototype.update=function(a){switch(this.renderState){case"menuScroll":this.incY+=5*a,this.x=this.x-50*Math.sin(this.incY/10)*a,this.y=this.y-50*a}},a.prototype.render=function(a){switch(this.renderState){case"menuScroll":this.x=this.x%canvas.width,this.y=this.y%canvas.height,this.x<0&&(this.x+=canvas.width),this.y<0&&(this.y+=canvas.height),a.drawImage(this.oImgData.img,this.x,this.y,canvas.width,canvas.height,0,0,canvas.width,canvas.height);break;case"none":a.drawImage(this.oImgData.img,0,0);break;case"map":ctx.save(),ctx.scale(this.oMapPosData.scaleX,this.oMapPosData.scaleY),a.drawImage(this.oImgData.img,this.oMapPosData.leftX,this.oMapPosData.leftY,canvas.width,canvas.height,this.oMapPosData.rightX,this.oMapPosData.rightY,canvas.width,canvas.height),ctx.restore()}},a}();a.Background=e}(Elements||(Elements={})),function(a){var e=function(){function a(a,e,t){this.inc=0,this.oSplashScreenImgData=a,this.canvasWidth=e,this.canvasHeight=t,this.posY=-this.canvasHeight,TweenLite.to(this,.5,{posY:0})}return a.prototype.render=function(a,e){this.inc+=5*e,a.drawImage(this.oSplashScreenImgData.img,0,0-this.posY)},a}();a.Splash=e}(Elements||(Elements={})),function(a){var e=function(){function e(a,e){this.number1Space=21,this.timer=.3,this.endTime=0,this.posY=0,this.numberSpace=17,this.incY=0,this.flareRot=0,this.messageX=1400,this.aUpgradePos=new Array([227,122],[100,126],[273,180],[150,172],[93,145]),this.oTitleElementsImgData=assetLib.getData("titleElements"),this.oPanelsImgData=assetLib.getData("panels"),this.oNumbers1ImgData=assetLib.getData("numbers1"),this.oTopFlareImgData=assetLib.getData("topFlare"),this.oUiElementsImgData=assetLib.getData("uiElements"),this.oUiButsImgData=assetLib.getData("uiButs"),this.oCarLogosImgData=assetLib.getData("carLogos"),this.oColoursImgData=assetLib.getData("colours"),this.oHudElementsImgData=assetLib.getData("hudElements"),this.oTruckElementsImgData=assetLib.getData("truckElements"),this.oFlagsImgData=assetLib.getData("flags"),this.panelType=a,this.aButs=e}return e.prototype.titleTween=function(){this.titlePos={x0:-500,x1:-500,x2:-500,x3:-300,y3:400},this.posY=canvas.width,TweenLite.to(this.titlePos,.5,{x0:0,ease:"Back.easeOut"}),TweenLite.to(this.titlePos,.5,{delay:.2,x1:0,ease:"Back.easeOut"}),TweenLite.to(this.titlePos,.5,{delay:.4,x2:0,ease:"Back.easeOut"}),TweenLite.to(this.titlePos,1.5,{x3:0,y3:0,ease:"Quint.easeOut"}),TweenLite.to(this,.5,{delay:.6,posY:0,ease:"Exp.easeOut"})},e.prototype.update=function(a){this.incY+=10*a},e.prototype.startTween1=function(){this.posY=700,TweenLite.to(this,.5,{posY:0,ease:"Quint.easeOut"})},e.prototype.startTween2=function(){this.posY=700,TweenLite.to(this,.5,{posY:0,ease:"Quint.easeOut"})},e.prototype.newMapMessage=function(){this.messageX=1400,this.messageTween=TweenLite.to(this,.3,{messageX:canvas.width/2,ease:"Cubic.easeOut",onComplete:this.removeMessageAtEnd,onCompleteParams:[this]})},e.prototype.removeMessageAtEnd=function(a){a.messageTween=gameComplete?TweenLite.to(a,.3,{messageX:-700,ease:"Cubic.easeIn",delay:5}):TweenLite.to(a,.3,{messageX:-700,ease:"Cubic.easeIn",delay:2})},e.prototype.garageScrollEvent=function(e){"left"==e&&oUserCareerData.curCarId>0?(oUserCareerData.curCarId--,(userCar=new a.Car(!0,aUserGarageData[oUserCareerData.curCarId])).staticLand()):"right"==e&&oUserCareerData.curCarId<aUserGarageData.length-1&&(oUserCareerData.curCarId++,(userCar=new a.Car(!0,aUserGarageData[oUserCareerData.curCarId])).staticLand())},e.prototype.shopScrollEvent=function(e){"left"==e&&curShopCarId>0?(curShopCarId--,(userCar=new a.Car(!0,aCarBaseData[curShopCarId])).staticLand()):"right"==e&&curShopCarId<aCarBaseData.length-1&&(curShopCarId++,(userCar=new a.Car(!0,aCarBaseData[curShopCarId])).staticLand())},e.prototype.customiseScrollEvent=function(a){"right"==a&&curRimScroll<8?(curRimScroll=9,playSound("click")):curRimScroll=0},e.prototype.render=function(a,e){switch(void 0===e&&(e=!0),e||this.addButs(a),this.flareRot+=delta/10,this.panelType){case"start":var t=0;a.save(),a.globalAlpha=1,a.translate(429+this.titlePos.x3,230+this.titlePos.y3),a.scale(2,2),a.rotate(this.flareRot),a.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),a.restore(),a.save(),a.globalAlpha=1,a.translate(429+this.titlePos.x3,230+this.titlePos.y3),a.scale(2,2),a.rotate(-this.flareRot),a.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),a.restore();var r=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.racingText].x,s=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.racingText].y,i=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.racingText].width,o=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.racingText].height;ctx.drawImage(this.oTitleElementsImgData.img,r,s,i,o,245-i/2+this.titlePos.x0,31-o/2,i,o);r=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.monsterText].x,s=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.monsterText].y,i=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.monsterText].width,o=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.monsterText].height;ctx.drawImage(this.oTitleElementsImgData.img,r,s,i,o,249-i/2+this.titlePos.x1,90-o/2,i,o);r=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.titleTruck].x,s=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.titleTruck].y,i=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.titleTruck].width,o=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.titleTruck].height;ctx.drawImage(this.oTitleElementsImgData.img,r,s,i,o,467-i/2+this.titlePos.x3,260-o/2+this.titlePos.y3,i,o);r=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.trucksText].x,s=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.trucksText].y,i=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.trucksText].width,o=this.oTitleElementsImgData.oData.oAtlasData[oImageIds.trucksText].height;ctx.drawImage(this.oTitleElementsImgData.img,r,s,i,o,207-i/2+this.titlePos.x2,160-o/2,i,o);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o);var g=Math.abs(Math.sin(50*this.flareRot))/2;ctx.save(),ctx.globalAlpha=g,ctx.translate(604,411+this.posY);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,-i/2,-o/2,i,o),ctx.restore();break;case"credits":ctx.fillStyle="rgba(0, 0, 0, 0.35)",ctx.fillRect(0,0,canvas.width,canvas.height);var h=(t=5)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);break;case"stats":this.renderTopFlare();h=(t=6)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight,r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o),a.drawImage(this.oPanelsImgData.img,h,m,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);var n=Math.floor(aPinDisplay.length/pinsPerMap-.1);gameComplete&&(n=10);for(var d=0;d<n;d++){t=oImageIds.cup0;d>8?t=oImageIds.cup3:d>5?t=oImageIds.cup2:d>2&&(t=oImageIds.cup1);r=this.oUiElementsImgData.oData.oAtlasData[t].x,s=this.oUiElementsImgData.oData.oAtlasData[t].y,i=this.oUiElementsImgData.oData.oAtlasData[t].width,o=this.oUiElementsImgData.oData.oAtlasData[t].height;var u=0,l=0;d>4&&(l=160,u=-650),ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,92-i/2+u+130*d,133.5-o/2+l+this.posY,i,o)}for(d=0;d<oUserCareerData.cash.toString().length;d++){h=(t=parseFloat(oUserCareerData.cash.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,41+d*this.number1Space*.8,6+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}var c=Math.floor(oUserCareerData.levelNum/100);for(d=0;d<c.toString().length;d++){h=(t=parseFloat(c.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+d*this.number1Space*.4,6+this.posY,.4*this.oNumbers1ImgData.oData.spriteWidth,.4*this.oNumbers1ImgData.oData.spriteHeight)}c=(oUserCareerData.levelNum-100*c)/100;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o);break;case"racePreview":h=(t=3)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);r=this.oCarLogosImgData.oData.oAtlasData["id"+userCar.oCarTypeData.body].x,s=this.oCarLogosImgData.oData.oAtlasData["id"+userCar.oCarTypeData.body].y,i=this.oCarLogosImgData.oData.oAtlasData["id"+userCar.oCarTypeData.body].width,o=this.oCarLogosImgData.oData.oAtlasData["id"+userCar.oCarTypeData.body].height;ctx.drawImage(this.oCarLogosImgData.img,r,s,i,o,180-i/2,400-o/2+this.posY,i,o);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.vsText].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.vsText].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.vsText].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.vsText].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,290-i/2,400-o/2+this.posY,i,o);r=this.oCarLogosImgData.oData.oAtlasData["id"+enemyCar.oCarTypeData.body].x,s=this.oCarLogosImgData.oData.oAtlasData["id"+enemyCar.oCarTypeData.body].y,i=this.oCarLogosImgData.oData.oAtlasData["id"+enemyCar.oCarTypeData.body].width,o=this.oCarLogosImgData.oData.oAtlasData["id"+enemyCar.oCarTypeData.body].height;if(ctx.drawImage(this.oCarLogosImgData.img,r,s,i,o,403-i/2,400-o/2+this.posY,i,o),"career"==raceType||"prevCareer"==raceType){for(oUserCareerData.careerRace,d=0;d<oUserCareerData.careerStage-1;d++)getRaceNumInStage(d+1);this.showRaceData()}t=oImageIds["careerRacePin"+getDifficulty(aPinDisplay[d])],r=this.oUiElementsImgData.oData.oAtlasData[t].x,s=this.oUiElementsImgData.oData.oAtlasData[t].y,i=this.oUiElementsImgData.oData.oAtlasData[t].width,o=this.oUiElementsImgData.oData.oAtlasData[t].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,603-i/2,113-o/2+this.posY,i,o);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceStartBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceStartBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceStartBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.raceStartBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o);g=Math.abs(Math.sin(50*this.flareRot))/2;ctx.save(),ctx.globalAlpha=g,ctx.translate(604,411+this.posY);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,-i/2,-o/2,i,o),ctx.restore();break;case"raceSelect":a.fillStyle=aMapColours[pinPage%aMapColours.length]+(Math.sin(25*this.flareRot)/15+.25)+")",a.fillRect(0,0,canvas.width,canvas.height);h=(t=0)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);for(d=0;d<oUserCareerData.cash.toString().length;d++){h=(t=parseFloat(oUserCareerData.cash.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,41+d*this.number1Space*.8,6+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(c=Math.floor(oUserCareerData.levelNum/100),d=0;d<c.toString().length;d++){h=(t=parseFloat(c.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+d*this.number1Space*.4,6+this.posY,.4*this.oNumbers1ImgData.oData.spriteWidth,.4*this.oNumbers1ImgData.oData.spriteHeight)}c=(oUserCareerData.levelNum-100*c)/100;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;if(ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o),this.showPins(),this.messageX>-700){var D=oImageIds.newLocationMessage;gameComplete&&(D=oImageIds.gameCompleteMessage);r=this.oHudElementsImgData.oData.oAtlasData[D].x,s=this.oHudElementsImgData.oData.oAtlasData[D].y,i=this.oHudElementsImgData.oData.oAtlasData[D].width,o=this.oHudElementsImgData.oData.oAtlasData[D].height;ctx.drawImage(this.oHudElementsImgData.img,r,s,i,o,this.messageX-i/2,207-o/2,i,o);var I=1e3*pinPage;for(d=0;d<I.toString().length;d++){h=(t=parseFloat(I.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,this.messageX-28+d*this.number1Space*.8,277+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}}break;case"garage":this.renderTopFlare();h=(t=7)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m+1,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight-2,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);for(d=0;d<oUserCareerData.cash.toString().length;d++){h=(t=parseFloat(oUserCareerData.cash.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,41+d*this.number1Space*.8,6+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(c=Math.floor(oUserCareerData.levelNum/100),d=0;d<c.toString().length;d++){h=(t=parseFloat(c.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+d*this.number1Space*.4,6+this.posY,.4*this.oNumbers1ImgData.oData.spriteWidth,.4*this.oNumbers1ImgData.oData.spriteHeight)}c=(oUserCareerData.levelNum-100*c)/100;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o);var p=oImageIds.sellBut;1==aUserGarageData.length&&(p=oImageIds.lockedSellBut);r=this.oUiButsImgData.oData.oAtlasData[p].x,s=this.oUiButsImgData.oData.oAtlasData[p].y,i=this.oUiButsImgData.oData.oAtlasData[p].width,o=this.oUiButsImgData.oData.oAtlasData[p].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,183-o/2+this.posY,i,o);var w=getSellCost();for(d=0;d<w.toString().length;d++){h=(t=parseFloat(w.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,591+d*this.number1Space*.8,164+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}var y=0;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,238.7+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].engine*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,273.7+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].gearBox*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,308.7+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].grip*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,343.7+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].weight*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,378.7+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].nitro*i,o+y);for(d=0;d<getRating(aUserGarageData[oUserCareerData.curCarId]).toString().length;d++){h=(t=parseFloat(getRating(aUserGarageData[oUserCareerData.curCarId]).toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,649+d*this.number1Space*.55,408.7+this.posY,.55*this.oNumbers1ImgData.oData.spriteWidth,.55*this.oNumbers1ImgData.oData.spriteHeight)}r=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].x,s=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].y,i=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].width,o=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].height;ctx.drawImage(this.oCarLogosImgData.img,r,s,i,o,604-i/2,102-o/2+this.posY,i,o);break;case"shop":this.renderTopFlare();var C=!1;for(d=0;d<aUserGarageData.length;d++)aUserGarageData[d].body==aCarBaseData[curShopCarId].body&&(C=!0);h=(t=1)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m+1,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight-2,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);r=this.oCarLogosImgData.oData.oAtlasData["id"+curShopCarId].x,s=this.oCarLogosImgData.oData.oAtlasData["id"+curShopCarId].y,i=this.oCarLogosImgData.oData.oAtlasData["id"+curShopCarId].width,o=this.oCarLogosImgData.oData.oAtlasData["id"+curShopCarId].height;ctx.drawImage(this.oCarLogosImgData.img,r,s,i,o,604-i/2,102-o/2+this.posY,i,o);for(d=0;d<oUserCareerData.cash.toString().length;d++){h=(t=parseFloat(oUserCareerData.cash.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,41+d*this.number1Space*.8,6+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(c=Math.floor(oUserCareerData.levelNum/100),d=0;d<c.toString().length;d++){h=(t=parseFloat(c.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+d*this.number1Space*.4,6+this.posY,.4*this.oNumbers1ImgData.oData.spriteWidth,.4*this.oNumbers1ImgData.oData.spriteHeight)}c=(oUserCareerData.levelNum-100*c)/100;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o);y=0,r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,160+this.posY-y/2,aCarBaseData[curShopCarId].engine*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,195+this.posY-y/2,aCarBaseData[curShopCarId].gearBox*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,230+this.posY-y/2,aCarBaseData[curShopCarId].grip*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,265+this.posY-y/2,aCarBaseData[curShopCarId].weight*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,300+this.posY-y/2,aCarBaseData[curShopCarId].nitro*i,o+y);for(d=0;d<getRating(aCarBaseData[curShopCarId]).toString().length;d++){h=(t=parseFloat(getRating(aCarBaseData[curShopCarId]).toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,649+d*this.number1Space*.55,330+this.posY,.55*this.oNumbers1ImgData.oData.spriteWidth,.55*this.oNumbers1ImgData.oData.spriteHeight)}if(!C&&aCarBaseData[curShopCarId].cost>oUserCareerData.cash){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}else if(!C){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}if(!C&&aCarBaseData[curShopCarId].cost<=oUserCareerData.cash){g=Math.abs(Math.sin(50*this.flareRot))/2;ctx.save(),ctx.globalAlpha=g,ctx.translate(604,411+this.posY);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,-i/2,-o/2,i,o),ctx.restore()}if(C){if(C){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}}else for(d=0;d<aCarBaseData[curShopCarId].cost.toString().length;d++){h=(t=parseFloat(aCarBaseData[curShopCarId].cost.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,591+d*this.number1Space*.8,393+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}break;case"upgrade":this.renderTopFlare();C=!1;5==aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"]&&(C=!0,U=0);getAutoUpgradeCost(),h=(t=1)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m+1,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight-2,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);r=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].x,s=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].y,i=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].width,o=this.oCarLogosImgData.oData.oAtlasData["id"+aUserGarageData[oUserCareerData.curCarId].body].height;ctx.drawImage(this.oCarLogosImgData.img,r,s,i,o,604-i/2,102-o/2+this.posY,i,o);for(d=0;d<oUserCareerData.cash.toString().length;d++){h=(t=parseFloat(oUserCareerData.cash.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,41+d*this.number1Space*.8,6+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(c=Math.floor(oUserCareerData.levelNum/100),d=0;d<c.toString().length;d++){h=(t=parseFloat(c.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+d*this.number1Space*.4,6+this.posY,.4*this.oNumbers1ImgData.oData.spriteWidth,.4*this.oNumbers1ImgData.oData.spriteHeight)}c=(oUserCareerData.levelNum-100*c)/100;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o);y=0,r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,160+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].engine*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,195+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].gearBox*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,230+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].grip*i,o+y);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,265+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].weight*i,o+y);var f,v,U;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.fillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557,300+this.posY-y/2,aUserGarageData[oUserCareerData.curCarId].nitro*i,o+y);for(d=0;d<getRating(aUserGarageData[oUserCareerData.curCarId]).toString().length;d++){h=(t=parseFloat(getRating(aUserGarageData[oUserCareerData.curCarId]).toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,649+d*this.number1Space*.55,330+this.posY,.55*this.oNumbers1ImgData.oData.spriteWidth,.55*this.oNumbers1ImgData.oData.spriteHeight)}if(!C&&curUpgradeCost>oUserCareerData.cash){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}else if(C){if(C){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}}else{var r=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}if(!C&&curUpgradeCost<=oUserCareerData.cash){g=Math.abs(Math.sin(50*this.flareRot))/2;ctx.save(),ctx.globalAlpha=g,ctx.translate(604,411+this.posY);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,-i/2,-o/2,i,o),ctx.restore()}if(!C)for(d=0;d<curUpgradeCost.toString().length;d++){h=(t=parseFloat(curUpgradeCost.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,591+d*this.number1Space*.8,393+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(d=0;d<5;d++){switch(A=oImageIds["upgradeTabOff"+d],upgradeTab){case"engine":0==d&&(A=oImageIds["upgradeTabOn"+d]),U=Math.round((aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].engine.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].engine)/5*100)/100,v=aUserGarageData[oUserCareerData.curCarId].engine,f=0;break;case"acc":1==d&&(A=oImageIds["upgradeTabOn"+d]),U=Math.round((aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].acc.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].gearBox)/5*100)/100,v=aUserGarageData[oUserCareerData.curCarId].gearBox,f=1;break;case"wheels":2==d&&(A=oImageIds["upgradeTabOn"+d]),U=Math.round((aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].wheels.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].grip)/5*100)/100,v=aUserGarageData[oUserCareerData.curCarId].grip,f=2;break;case"weight":3==d&&(A=oImageIds["upgradeTabOn"+d]),U=Math.round((aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].weight.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].weight)/5*100)/100,v=aUserGarageData[oUserCareerData.curCarId].weight,f=3;break;case"nitro":4==d&&(A=oImageIds["upgradeTabOn"+d]),U=Math.round((aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].nitro.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].nitro)/5*100)/100,v=aUserGarageData[oUserCareerData.curCarId].nitro,f=4}r=this.oUiButsImgData.oData.oAtlasData[A].x,s=this.oUiButsImgData.oData.oAtlasData[A].y,i=this.oUiButsImgData.oData.oAtlasData[A].width,o=this.oUiButsImgData.oData.oAtlasData[A].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,12+95*d,55+this.posY,i,o)}r=this.oUiElementsImgData.oData.oAtlasData[oImageIds[upgradeTab+"Icon"]].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds[upgradeTab+"Icon"]].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds[upgradeTab+"Icon"]].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds[upgradeTab+"Icon"]].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,this.aUpgradePos[f][0],this.aUpgradePos[f][1]+this.posY,i,o);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds["upgradeStage"+Math.min(5,aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"])]].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds["upgradeStage"+Math.min(5,aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"])]].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds["upgradeStage"+Math.min(5,aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"])]].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds["upgradeStage"+Math.min(5,aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"])]].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,this.aUpgradePos[f][0]+30-i/2,this.aUpgradePos[f][1]+25-o/2+this.posY,i,o);for(d=0;d<Math.min(5,aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"]);d++){r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.stageBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.stageBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.stageBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.stageBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,this.aUpgradePos[f][0]+51.5+25.5*d,this.aUpgradePos[f][1]+9+this.posY-y/2,i,o+y)}if(aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"]<5){r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.upgradePreviewBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.upgradePreviewBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.upgradePreviewBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.upgradePreviewBar].height;"weight"==upgradeTab?ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557+v*i-U*i,152+35*f+this.posY,U*i,o):ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,557+v*i,152+35*f+this.posY,U*i,o)}break;case"customise":this.renderTopFlare();C=!1;switch(customiseTab){case"colour":for(var b=0;b<aUserGarageData[oUserCareerData.curCarId].aColoursOwned.length;b++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aColoursOwned[b]){C=!0;break}break;case"rims":for(b=0;b<aUserGarageData[oUserCareerData.curCarId].aRimsOwned.length;b++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aRimsOwned[b]){C=!0;break}break;case"shadow":for(b=0;b<aUserGarageData[oUserCareerData.curCarId].aNeonOwned.length;b++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aNeonOwned[b]){C=!0;break}}h=(t=2)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m+1,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight-2,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);for(d=0;d<oUserCareerData.cash.toString().length;d++){h=(t=parseFloat(oUserCareerData.cash.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,41+d*this.number1Space*.8,6+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(c=Math.floor(oUserCareerData.levelNum/100),d=0;d<c.toString().length;d++){h=(t=parseFloat(c.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+d*this.number1Space*.4,6+this.posY,.4*this.oNumbers1ImgData.oData.spriteWidth,.4*this.oNumbers1ImgData.oData.spriteHeight)}c=(oUserCareerData.levelNum-100*c)/100;var A;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o);for(d=0;d<3;d++){switch(A=oImageIds["customiseTabOff"+d],customiseTab){case"colour":0==d&&(A=oImageIds["customiseTabOn"+d]);break;case"rims":1==d&&(A=oImageIds["customiseTabOn"+d]);break;case"shadow":2==d&&(A=oImageIds["customiseTabOn"+d])}r=this.oUiButsImgData.oData.oAtlasData[A].x,s=this.oUiButsImgData.oData.oAtlasData[A].y,i=this.oUiButsImgData.oData.oAtlasData[A].width,o=this.oUiButsImgData.oData.oAtlasData[A].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,537.5-i/2+66*d,82.5-o/2+this.posY,i,o)}var x=3,S=3;"colour"==customiseTab&&(x=2,S=2);for(d=0;d<S;d++)for(b=0;b<x;b++)if("colour"==customiseTab){A=oImageIds.customBgRect0,curCustomiseButHighlight==b+d*S&&(A=oImageIds.customBgRect1);r=this.oUiElementsImgData.oData.oAtlasData[A].x,s=this.oUiElementsImgData.oData.oAtlasData[A].y,i=this.oUiElementsImgData.oData.oAtlasData[A].width,o=this.oUiElementsImgData.oData.oAtlasData[A].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,561-i/2+89*b,164-o/2+88*d+this.posY,i,o);r=this.oColoursImgData.oData.oAtlasData["id"+(4*aUserGarageData[oUserCareerData.curCarId].body+b+2*d)].x,s=this.oColoursImgData.oData.oAtlasData["id"+(4*aUserGarageData[oUserCareerData.curCarId].body+b+2*d)].y,i=this.oColoursImgData.oData.oAtlasData["id"+(4*aUserGarageData[oUserCareerData.curCarId].body+b+2*d)].width,o=this.oColoursImgData.oData.oAtlasData["id"+(4*aUserGarageData[oUserCareerData.curCarId].body+b+2*d)].height;ctx.drawImage(this.oColoursImgData.img,r,s,i,o,561-i/2+89*b,164-o/2+88*d+this.posY,i,o);for(var R=0;R<aUserGarageData[oUserCareerData.curCarId].aColoursOwned.length;R++)if(b+2*d==aUserGarageData[oUserCareerData.curCarId].aColoursOwned[R]){r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,566+89*b,171+88*d+this.posY,i,o);break}}else if("rims"==customiseTab){A=oImageIds.customBgSquare0,curCustomiseButHighlight==b+d*S+curRimScroll&&(A=oImageIds.customBgSquare1);r=this.oUiElementsImgData.oData.oAtlasData[A].x,s=this.oUiElementsImgData.oData.oAtlasData[A].y,i=this.oUiElementsImgData.oData.oAtlasData[A].width,o=this.oUiElementsImgData.oData.oAtlasData[A].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,547-i/2+58*b,150-o/2+58*d+this.posY,i,o);r=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+(b+3*d+curRimScroll)]].x,s=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+(b+3*d+curRimScroll)]].y,i=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+(b+3*d+curRimScroll)]].width,o=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+(b+3*d+curRimScroll)]].height;ctx.drawImage(this.oTruckElementsImgData.img,r,s,.75*i,.75*o,527+58*b,130+58*d+this.posY,.3*i,.3*o);for(R=0;R<aUserGarageData[oUserCareerData.curCarId].aRimsOwned.length;R++)if(b+d*S+curRimScroll==aUserGarageData[oUserCareerData.curCarId].aRimsOwned[R]){r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,539+58*b,142+58*d+this.posY,i,o);break}}else{A=oImageIds.customBgSquare0,curCustomiseButHighlight==b+d*S+curRimScroll&&(A=oImageIds.customBgSquare1);r=this.oUiElementsImgData.oData.oAtlasData[A].x,s=this.oUiElementsImgData.oData.oAtlasData[A].y,i=this.oUiElementsImgData.oData.oAtlasData[A].width,o=this.oUiElementsImgData.oData.oAtlasData[A].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,547-i/2+58*b,150-o/2+58*d+this.posY,i,o);r=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+(b+3*d+curRimScroll)]].x,s=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+(b+3*d+curRimScroll)]].y,i=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+(b+3*d+curRimScroll)]].width,o=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+(b+3*d+curRimScroll)]].height;ctx.drawImage(this.oFlagsImgData.img,r,s,i,.7*o,524+58*b,133+58*d+this.posY,i,.7*o);for(R=0;R<aUserGarageData[oUserCareerData.curCarId].aNeonOwned.length;R++)if(b+d*S+curRimScroll==aUserGarageData[oUserCareerData.curCarId].aNeonOwned[R]){r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.boughtMarker].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,539+58*b,142+58*d+this.posY,i,o);break}}if(!C&&curCustomiseCost>oUserCareerData.cash){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.cantAffordBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}else if(C){if(C){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.boughtBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}}else{r=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.buyBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}if(!C&&curCustomiseCost<=oUserCareerData.cash){g=Math.abs(Math.sin(50*this.flareRot))/2;ctx.save(),ctx.globalAlpha=g,ctx.translate(604,411+this.posY);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,-i/2,-o/2,i,o),ctx.restore()}if(!C)for(d=0;d<curCustomiseCost.toString().length;d++){h=(t=parseFloat(curCustomiseCost.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,591+d*this.number1Space*.8,393+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}break;case"raceComplete":this.renderTopFlare();h=(t=4)*this.oPanelsImgData.oData.spriteWidth%this.oPanelsImgData.img.width,m=Math.floor(t/(this.oPanelsImgData.img.width/this.oPanelsImgData.oData.spriteWidth))*this.oPanelsImgData.oData.spriteHeight;a.drawImage(this.oPanelsImgData.img,h,m+1,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight-2,0,0+this.posY,this.oPanelsImgData.oData.spriteWidth,this.oPanelsImgData.oData.spriteHeight);for(d=0;d<oUserCareerData.cash.toString().length;d++){h=(t=parseFloat(oUserCareerData.cash.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,41+d*this.number1Space*.8,6+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(c=Math.floor(oUserCareerData.levelNum/100),d=0;d<c.toString().length;d++){h=(t=parseFloat(c.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+d*this.number1Space*.4,6+this.posY,.4*this.oNumbers1ImgData.oData.spriteWidth,.4*this.oNumbers1ImgData.oData.spriteHeight)}c=(oUserCareerData.levelNum-100*c)/100;r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.levelFillBar].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,526,27+this.posY,(c+.01)*i,o),this.renderTime(oRaceProgress.userFinishTime,230,119),this.renderTime(oRaceProgress.enemyFinishTime,518,119);var P=377,T=90;oRaceProgress.userFinishTime<oRaceProgress.enemyFinishTime&&(P=90,T=377);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceWonIcon].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceWonIcon].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceWonIcon].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceWonIcon].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,P-i/2,80+this.posY,i,o);r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceLostIcon].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceLostIcon].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceLostIcon].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.raceLostIcon].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,T-i/2,80+this.posY,i,o);for(d=0;d<oRaceProgress.reward.toString().length;d++){h=(t=parseFloat(oRaceProgress.reward.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,102+d*this.number1Space*.8,213+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}var H=oRaceProgress.timeBonus.toString();for(d=0;d<H.length;d++){h=(t=parseFloat(H.charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,282+d*this.number1Space*.8,213+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(H=oRaceProgress.jumpBonus.toString(),d=0;d<H.length;d++){h=(t=parseFloat(H.charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,200+d*this.number1Space*.8,283+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(H=(50*Math.floor(oUserCareerData.levelNum/100)).toString(),d=0;d<H.length;d++){h=(t=parseFloat(H.charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,380+d*this.number1Space*.8,283+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(d=0;d<oRaceProgress.totalReward.toString().length;d++){h=(t=parseFloat(oRaceProgress.totalReward.toString().charAt(d)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(t/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,540+d*this.number1Space*1.2,240+this.posY,1.2*this.oNumbers1ImgData.oData.spriteWidth,1.2*this.oNumbers1ImgData.oData.spriteHeight)}if(oRaceProgress.newLevel){r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.newLevelBadge].x,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.newLevelBadge].y,i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.newLevelBadge].width,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.newLevelBadge].height;ctx.drawImage(this.oUiElementsImgData.img,r,s,i,o,620-i/2,20-o/2+this.posY,i,o)}if(1==oUserCareerData.careerRace&&1==oUserCareerData.careerStage){r=this.oUiButsImgData.oData.oAtlasData[oImageIds.largeRestartBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.largeRestartBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.largeRestartBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.largeRestartBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}else{r=this.oUiButsImgData.oData.oAtlasData[oImageIds.continueBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.continueBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.continueBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.continueBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,604-i/2,411-o/2+this.posY,i,o)}if(!shouldShowUpgradeTip()){g=Math.abs(Math.sin(50*this.flareRot))/2;ctx.save(),ctx.globalAlpha=g,ctx.translate(604,411+this.posY);r=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].x,s=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].y,i=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].width,o=this.oUiButsImgData.oData.oAtlasData[oImageIds.highlightBut].height;ctx.drawImage(this.oUiButsImgData.img,r,s,i,o,-i/2,-o/2,i,o),ctx.restore()}break;case"pause":a.fillStyle="rgba(0, 0, 0, 0.75)",a.fillRect(0,0,canvas.width,canvas.height)}e&&this.addButs(a)},e.prototype.renderTime=function(a,e,t){a=Math.round(a);var r=Math.floor(a/6e3).toString(),s=Math.floor((a-6e3*Math.floor(a/6e3))/100).toString();s.length<2&&(s="0"+s);var i=a.toString().charAt(a.toString().length-2)+a.toString().charAt(a.toString().length-1);i.length<2&&(i="0"+i);for(var o=0;o<2;o++){var g=parseFloat(r.charAt(o));if(r.length<2){if(0==o)continue;g=parseFloat(r.charAt(0))}var h=g*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(g/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,e+(o-1)*this.number1Space*1,t+this.posY,Math.round(1*this.oNumbers1ImgData.oData.spriteWidth),Math.round(1*this.oNumbers1ImgData.oData.spriteHeight))}for(o=0;o<2;o++){h=(g=parseFloat(s.charAt(o)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(g/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,e+34+o*this.number1Space*1,t+this.posY,1*this.oNumbers1ImgData.oData.spriteWidth,1*this.oNumbers1ImgData.oData.spriteHeight)}for(o=0;o<2;o++){h=(g=parseFloat(i.charAt(o)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,m=Math.floor(g/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,h,m,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,e+80+o*this.number1Space*.6,t+2+this.posY,.6*this.oNumbers1ImgData.oData.spriteWidth,.6*this.oNumbers1ImgData.oData.spriteHeight)}},e.prototype.showRaceData=function(){for(var a=0;a<this.oRaceData.reward.toString().length;a++){var e=parseFloat(this.oRaceData.reward.toString().charAt(a)),t=e*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,r=Math.floor(e/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,t,r,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,595+a*this.number1Space*.8,188+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(a=0;a<this.oRaceData.rating.toString().length;a++){t=(e=parseFloat(this.oRaceData.rating.toString().charAt(a)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,r=Math.floor(e/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,t,r,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,595+a*this.number1Space*.8,238+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}for(a=0;a<this.oRaceData.distance.toString().length;a++){t=(e=parseFloat(this.oRaceData.distance.toString().charAt(a)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,r=Math.floor(e/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,t,r,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,595+a*this.number1Space*.8,288+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)}t=(e=11)*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,r=Math.floor(e/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,t,r,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,595+this.oRaceData.distance.toString().length*this.number1Space*.8,288+this.posY,.8*this.oNumbers1ImgData.oData.spriteWidth,.8*this.oNumbers1ImgData.oData.spriteHeight)},e.prototype.showPins=function(){for(var a=pinPage*pinsPerMap;a<pinPage*pinsPerMap+pinsPerMap&&!(a>=aPinDisplay.length);a++){var e,t=0,r=0;switch(aPinDisplay[a].state){case 0:e=oImageIds.lockedRacePin;break;case 1:case 2:e=oImageIds["careerRacePin"+getDifficulty(aPinDisplay[a])],t=-Math.max(this.posY,0),r=3*Math.sin(this.incY+45*a);break;case 3:e=oImageIds.quickRacePin,t=-Math.max(this.posY,0),r=3*Math.sin(this.incY+45*a);break;case 4:e=oImageIds["careerRaceWonPin"+getDifficulty(aPinDisplay[a])]}if(1==aPinDisplay[a].state||2==aPinDisplay[a].state){var s=Math.sin(60*this.flareRot)/30+.3;ctx.save(),ctx.globalAlpha=1,ctx.translate(aPinPos[aPinDisplay[a].posId].x,aPinPos[aPinDisplay[a].posId].y+t),ctx.scale(s,s),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.globalAlpha=1,ctx.translate(aPinPos[aPinDisplay[a].posId].x,aPinPos[aPinDisplay[a].posId].y+t),ctx.scale(s,s),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore()}var i=this.oUiElementsImgData.oData.oAtlasData[e].x,o=this.oUiElementsImgData.oData.oAtlasData[e].y,g=this.oUiElementsImgData.oData.oAtlasData[e].width,h=this.oUiElementsImgData.oData.oAtlasData[e].height;if(ctx.drawImage(this.oUiElementsImgData.img,i,o,g,h,aPinPos[aPinDisplay[a].posId].x-g/2*.75-r/2,aPinPos[aPinDisplay[a].posId].y-h/2*.75+t+r,.75*g+r,.75*h-r),firstRun&&1==aPinDisplay[a].state){i=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].x,o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].y,g=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].width,h=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].height;ctx.drawImage(this.oUiElementsImgData.img,i,o,g,h,aPinPos[aPinDisplay[a].posId].x-g/2,aPinPos[aPinDisplay[a].posId].y+15-h/2+t-4*r-100,g,h)}}},e.prototype.renderTopFlare=function(){ctx.save(),ctx.globalAlpha=.8,ctx.translate(700,-50),ctx.scale(3,3),ctx.rotate(this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore(),ctx.save(),ctx.globalAlpha=.8,ctx.translate(700,-50),ctx.scale(3,3),ctx.rotate(-this.flareRot),ctx.drawImage(this.oTopFlareImgData.img,-this.oTopFlareImgData.img.width/2,-this.oTopFlareImgData.img.height/2),ctx.restore()},e.prototype.addButs=function(a){for(var e=0;e<this.aButs.length;e++){if("garage"==this.panelType){if(this.aButs[e].id==oImageIds.leftBut&&oUserCareerData.curCarId<1)continue;if(this.aButs[e].id==oImageIds.rightBut&&oUserCareerData.curCarId>aUserGarageData.length-2)continue}else if("shop"==this.panelType){if(this.aButs[e].id==oImageIds.leftBut&&curShopCarId<1)continue;if(this.aButs[e].id==oImageIds.rightBut&&curShopCarId>aCarBaseData.length-2)continue}else if("customise"==this.panelType&&"colour"==customiseTab&&(this.aButs[e].id==oImageIds.rightMiniBut||this.aButs[e].id==oImageIds.leftMiniBut))continue;var t=this.posY,r=0;0==this.incY||this.aButs[e].noMove||(r=3*Math.sin(this.incY+45*e)),this.aButs[e].scale||(this.aButs[e].scale=1);var s=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].x,i=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].y,o=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].width,g=this.aButs[e].oImgData.oData.oAtlasData[this.aButs[e].id].height;a.drawImage(this.aButs[e].oImgData.img,s,i,o,g,this.aButs[e].aPos[0]-o/2*this.aButs[e].scale+t-r/2,this.aButs[e].aPos[1]-g/2*this.aButs[e].scale+r/2,o*this.aButs[e].scale+r,g*this.aButs[e].scale-r)}},e}();a.Panel=e}(Elements||(Elements={})),function(a){var e=function(){function a(){this.number1Space=21,this.number2Space=17,this.startLightState=0,this.startTimerInc=0,this.clockIsOn=!1,this.gearPosY=200,this.wheelSpinInc=0,this.messageX=-700,this.messageY=0,this.messageType="greatStart",this.startTimerX=-200,this.nitroPosY=200,this.pauseStartTimer=!1,this.accPedalHeight=1,this.accPedalY=120,this.incY=0,this.gearChangeShake=0,this.oHudImgData=assetLib.getData("hud"),this.oHudElementsImgData=assetLib.getData("hudElements"),this.oUiElementsImgData=assetLib.getData("uiElements"),this.oNumbers1ImgData=assetLib.getData("numbers1"),this.oNumbers2ImgData=assetLib.getData("numbers2")}return a.prototype.tweenLights=function(){this.pauseStartTimer=!1,TweenLite.to(this,.3,{startTimerX:100,ease:"Back.easeOut"})},a.prototype.addMessage=function(a){switch(this.messageTween&&this.messageTween.kill(),this.messageType=a,this.messageX=1400,this.messageType){case"greatStart":case"perfect":this.messageY=286,this.messageTween=TweenLite.to(this,.3,{messageX:canvas.width/2,ease:"Cubic.easeOut",onComplete:this.removeMessageMidRace,onCompleteParams:[this]});break;case"endLose":this.messageY=170,this.messageTween=TweenLite.to(this,.3,{messageX:canvas.width/2,ease:"Cubic.easeOut",onComplete:this.removeMessageAtEnd,onCompleteParams:[this]});break;case"endWin":this.messageY=160,this.messageTween=TweenLite.to(this,.3,{messageX:canvas.width/2,ease:"Cubic.easeOut"})}},a.prototype.removeMessageMidRace=function(a){a.messageTween=TweenLite.to(a,.3,{messageX:-700,ease:"Cubic.easeIn",delay:1})},a.prototype.removeMessageAtEnd=function(a){a.messageTween=TweenLite.to(a,.3,{messageX:-700,ease:"Cubic.easeIn",delay:2,onComplete:initRaceComplete})},a.prototype.update=function(){this.clockIsOn&&(oRaceProgress.time+=100*delta),this.wheelSpinInc+=delta},a.prototype.render=function(){var a;ctx.drawImage(this.oHudImgData.img,0,0);for(var e=Math.round(oRaceProgress.userSpeed),t=0;t<=e.toString().length;t++){var r=(a=parseFloat(e.toString().charAt(t)))*this.oNumbers2ImgData.oData.spriteWidth%this.oNumbers2ImgData.img.width,s=Math.floor(a/(this.oNumbers2ImgData.img.width/this.oNumbers2ImgData.oData.spriteWidth))*this.oNumbers2ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers2ImgData.img,r,s,this.oNumbers2ImgData.oData.spriteWidth,this.oNumbers2ImgData.oData.spriteHeight,195+t*this.number2Space-this.number2Space*(e.toString().length+1)/2,385,this.oNumbers2ImgData.oData.spriteWidth,this.oNumbers2ImgData.oData.spriteHeight)}0==(a=oRaceProgress.userGear)&&(a=10);r=a*this.oNumbers2ImgData.oData.spriteWidth%this.oNumbers2ImgData.img.width,s=Math.floor(a/(this.oNumbers2ImgData.img.width/this.oNumbers2ImgData.oData.spriteWidth))*this.oNumbers2ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers2ImgData.img,r,s,this.oNumbers2ImgData.oData.spriteWidth,this.oNumbers2ImgData.oData.spriteHeight,494,385,this.oNumbers2ImgData.oData.spriteWidth,this.oNumbers2ImgData.oData.spriteHeight);var i=0;oRaceProgress.enemyNitroBoost>0&&(i=Math.random()*oRaceProgress.enemyNitroBoost*4-2*oRaceProgress.enemyNitroBoost),userNitroShake=oRaceProgress.userNitroBoost>0?Math.random()*oRaceProgress.userNitroBoost*4-2*oRaceProgress.userNitroBoost:Math.random()*Math.min(Math.floor(e/100),4),userNitroShake+=this.gearChangeShake;var o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,33,7.5+i,h*oRaceProgress.enemyProgress,m);o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBar].height;if(ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,33,23.5+userNitroShake,h*oRaceProgress.userProgress,m),0==oRaceProgress.time){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.accPedal].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.accPedal].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.accPedal].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.accPedal].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,570,this.accPedalY,h,m*this.accPedalHeight),ctx.save(),ctx.translate(canvas.width/2,438),ctx.rotate((180*userCar.oCarTypeData.revMeterRot-180)*radian);o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.startRevMeter].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.startRevMeter].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.startRevMeter].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.startRevMeter].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,0,-m/2,h,m),ctx.restore()}else if(oRaceProgress.userGear<userCar.oCarTypeData.gearNum&&oRaceProgress.userAccState<2){ctx.save(),ctx.translate(canvas.width/2,438),ctx.rotate((180*userCar.oCarTypeData.revMeterRot-180)*radian);o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revMeter].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revMeter].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revMeter].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revMeter].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,0,-m/2,h,m),ctx.restore()}ctx.save(),ctx.translate(canvas.width/2,440),ctx.rotate((180*oRaceProgress.userRevs-180+Math.sin(50*this.wheelSpinInc)*(1*oRaceProgress.userWheelSpin))*radian);o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revNeedle].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revNeedle].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revNeedle].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revNeedle].height;if(ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,-17,-m/2,h,m),ctx.restore(),userCar.oCarTypeData.nitro>0){this.incY+=10*delta;var n=5*Math.sin(this.incY+t);o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.boostBut].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.boostBut].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.boostBut].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.boostBut].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,50-n/2,338+this.nitroPosY+n/2,h+n,m-n)}o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearChange].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearChange].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearChange].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearChange].height;if(ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,540,330+this.gearPosY,h,m),oRaceProgress.userRevs>userCar.oCarTypeData.revMeterRot-.04&&2!=oRaceProgress.userAccState){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearHighlight].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearHighlight].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearHighlight].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearHighlight].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,516,303+this.gearPosY,h,m)}if(this.startTimerX>-700){this.pauseStartTimer||(this.startTimerInc+=delta),0==this.startLightState&&this.startTimerInc>2?(playSound("timer0"),this.startLightState=1):1==this.startLightState&&this.startTimerInc>3?(playSound("timer0"),this.startLightState=2):2==this.startLightState&&this.startTimerInc>4&&(playSound("timer1"),this.startLightState=3,raceStarted());o=this.oHudElementsImgData.oData.oAtlasData[oImageIds["startLights"+this.startLightState]].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds["startLights"+this.startLightState]].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds["startLights"+this.startLightState]].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds["startLights"+this.startLightState]].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,this.startTimerX-h/2,194-m/2,h,m)}if(2!=oRaceProgress.userAccState?this.renderTime(oRaceProgress.time):this.renderTime(oRaceProgress.userFinishTime),userCar.x-enemyCar.x>500){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBehindMarker].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBehindMarker].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBehindMarker].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distBehindMarker].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,10,220-m/2,h,m);var d=Math.round((userCar.x-enemyCar.x)/100);for(t=0;t<d.toString().length;t++){r=(a=parseFloat(d.toString().charAt(t)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,s=Math.floor(a/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,r,s,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,75+t*this.number1Space,199,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight)}r=(a=11)*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,s=Math.floor(a/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,r,s,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,75+d.toString().length*this.number1Space,199,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight)}else if(userCar.x-enemyCar.x<-500){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distInFrontMarker].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distInFrontMarker].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distInFrontMarker].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.distInFrontMarker].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,521,220-m/2,h,m);for(d=Math.round((enemyCar.x-userCar.x)/100),t=0;t<d.toString().length;t++){r=(a=parseFloat(d.toString().charAt(t)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,s=Math.floor(a/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,r,s,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,555+t*this.number1Space,199,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight)}r=(a=11)*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,s=Math.floor(a/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,r,s,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,555+d.toString().length*this.number1Space,199,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight)}if(this.messageX>-700){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds[this.messageType+"Message"]].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds[this.messageType+"Message"]].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds[this.messageType+"Message"]].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds[this.messageType+"Message"]].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,this.messageX-h/2,this.messageY-m/2,h,m)}if(firstRun){if(0==oRaceProgress.time){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revTip].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revTip].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revTip].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.revTip].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,615-h/2,354-m/2,h,m);o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].x,g=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].y,h=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].width,m=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].height;this.incY+=10*delta,ctx.drawImage(this.oUiElementsImgData.img,o,g,h,m,630-h/2,130-m/2-12*Math.sin(this.incY+45*t),h,m)}else if(0==this.gearPosY&&oRaceProgress.userGear<=2&&oRaceProgress.userRevs>userCar.oCarTypeData.revMeterRot-.2){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearTip1].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearTip1].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearTip1].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.gearTip1].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,579-h/2,250-m/2-150*(userCar.oCarTypeData.revMeterRot-oRaceProgress.userRevs),h,m)}}else if(this.startTimerInc>1&&0==oRaceProgress.time&&0==oRaceProgress.userRevs){o=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].x,g=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].y,h=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].width,m=this.oUiElementsImgData.oData.oAtlasData[oImageIds.finger].height;this.incY+=10*delta,ctx.drawImage(this.oUiElementsImgData.img,o,g,h,m,630-h/2,130-m/2-12*Math.sin(this.incY+45*t),h,m)}if(oRaceProgress.time>0&&oRaceProgress.userGear<3&&1==firstNitroStage&&!oRaceProgress.userBoostTriggered){o=this.oHudElementsImgData.oData.oAtlasData[oImageIds.nitroTip].x,g=this.oHudElementsImgData.oData.oAtlasData[oImageIds.nitroTip].y,h=this.oHudElementsImgData.oData.oAtlasData[oImageIds.nitroTip].width,m=this.oHudElementsImgData.oData.oAtlasData[oImageIds.nitroTip].height;ctx.drawImage(this.oHudElementsImgData.img,o,g,h,m,105-h/2,255-m/2,h,m)}},a.prototype.renderTime=function(a){a=Math.round(a);var e=Math.floor(a/6e3).toString(),t=Math.floor((a-6e3*Math.floor(a/6e3))/100).toString();t.length<2&&(t="0"+t);var r=a.toString().charAt(a.toString().length-2)+a.toString().charAt(a.toString().length-1);r.length<2&&(r="0"+r);for(var s=0;s<2;s++){var i=parseFloat(e.charAt(s));if(e.length<2){if(0==s)continue;i=parseFloat(e.charAt(0))}var o=i*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,g=Math.floor(i/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,o,g,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,504,11,Math.round(.68*this.oNumbers1ImgData.oData.spriteWidth),Math.round(.68*this.oNumbers1ImgData.oData.spriteHeight))}for(s=0;s<2;s++){o=(i=parseFloat(t.charAt(s)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,g=Math.floor(i/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,o,g,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,527+s*this.number1Space*.68,11,.68*this.oNumbers1ImgData.oData.spriteWidth,.68*this.oNumbers1ImgData.oData.spriteHeight)}for(s=0;s<2;s++){o=(i=parseFloat(r.charAt(s)))*this.oNumbers1ImgData.oData.spriteWidth%this.oNumbers1ImgData.img.width,g=Math.floor(i/(this.oNumbers1ImgData.img.width/this.oNumbers1ImgData.oData.spriteWidth))*this.oNumbers1ImgData.oData.spriteHeight;ctx.drawImage(this.oNumbers1ImgData.img,o,g,this.oNumbers1ImgData.oData.spriteWidth,this.oNumbers1ImgData.oData.spriteHeight,557+s*this.number1Space*.45,12,.45*this.oNumbers1ImgData.oData.spriteWidth,.45*this.oNumbers1ImgData.oData.spriteHeight)}},a}();a.Hud=e}(Elements||(Elements={})),function(a){var e=function(){function a(){this.segNum=25,this.aRowData=new Array,this.horizon=180,this.scrollY=0,this.scrollX=0,this.targScrollSpeed=0,this.scrollSpeed=0,this.maxFlySpeed=500,this.roadHeight=300,this.flyInc=300,this.lineRate=1,this.scaleFactor=450,this.maxSteer=350,this.showUserJump=!1,this.showEnemyJump=!1,this.jumpY=313,this.userJumpStartX=0,this.enemyJumpStartX=0,this.oTruckElementsImgData=assetLib.getData("truckElements"),"race"==gameState?(0==oRaceProgress.background?this.oRoadImgData=assetLib.getData("road1"):this.oRoadImgData=assetLib.getData("road0"),this.oBgImgData=assetLib.getData(["roadBg"+oRaceProgress.background])):(0==panel.oRaceData.background?this.oRoadImgData=assetLib.getData("road1"):this.oRoadImgData=assetLib.getData("road0"),this.oBgImgData=assetLib.getData(["roadBg"+panel.oRaceData.background]));for(var a=0;a<this.segNum;a++)this.aRowData.push({y:0,scale:0})}return a.prototype.triggerUserJump=function(){this.showUserJump=!0,this.userJumpStartX=userCar.x+400+2*this.scrollX},a.prototype.triggerEnemyJump=function(){this.showEnemyJump=!0,this.enemyJumpStartX=enemyCar.x+400+2*this.scrollX},a.prototype.update=function(){this.scrollX+=this.scrollSpeed*delta},a.prototype.render=function(){(r=this.scrollX/1%800)<0&&(r+=800),ctx.drawImage(this.oBgImgData.img,r,0,800,203,0,this.horizon-203+2*userNitroShake,800,203);for(var a=1e3/this.segNum,e=0,t=0;t<this.segNum;t++){var r;if(this.tempInc=t,this.easeInc=-1*(Math.sqrt(1-(this.tempInc/=this.segNum)*this.tempInc)-1)+0,this.nextRow=t+1,this.segHeightAfter=-1*(Math.sqrt(1-(this.nextRow/=this.segNum)*this.nextRow)-1)+0-this.easeInc,this.aRowData[t].y=this.horizon+this.easeInc*this.roadHeight,this.aRowData[t].scale=2*(this.easeInc+this.segHeightAfter)*this.scaleFactor,0==e&&(this.rowId=t),(e+=this.segHeightAfter*this.roadHeight)>this.lineRate)(r=(t/this.segNum*(this.scaleFactor/2)+this.scrollX)%700)<0&&(r+=700),ctx.drawImage(this.oRoadImgData.img,r,this.rowId*a+this.scrollY,700-t/this.segNum*this.scaleFactor,a,0,this.aRowData[this.rowId].y+2*userNitroShake,700,e+1),e=0}if(this.showUserJump){var s=this.userJumpStartX-2*this.scrollX;0==userCar.jumpState&&s<=userCar.x&&userCar.jump();var i=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.jump].x,o=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.jump].y,g=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.jump].width,h=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.jump].height;ctx.drawImage(this.oTruckElementsImgData.img,i,o,g,h,s,this.jumpY-h,g,h),s+g<userCar.x-400&&(this.showUserJump=!1)}if(this.showEnemyJump){s=this.enemyJumpStartX-2*this.scrollX;0==enemyCar.jumpState&&s<=enemyCar.x&&enemyCar.jump(),s+(g=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.jump].width)<enemyCar.x-400&&(this.showEnemyJump=!1)}},a}();a.ScrollGround=e}(Elements||(Elements={})),function(a){var e=function(){function a(a){this.dataGroupNum=2,this.saveDataId=a,window.famobi=window.famobi?window.famobi:{},window.famobi.localStorage=window.famobi.localStorage?window.famobi.localStorage:window.localStorage,window.famobi.sessionStorage=window.famobi.sessionStorage?window.famobi.sessionStorage:window.sessionStorage,this.clearData(),this.setInitialData()}return a.prototype.clearData=function(){this.aLevelStore=new Array,this.aLevelStore.push("0"),this.aLevelStore.push("100"),this.aLevelStore.push("11"),this.aLevelStore.push("0"),this.aLevelStore.push("0"),this.aLevelStore.push("0"),this.aLevelStore.push("0"),this.aLevelStore.push("1"),this.aLevelStore.push("100"),this.aLevelStore.push("0"),this.aLevelStore.push("0511,1,1,.1600,1,2,.0700,1,2,.0300,1,2,.1300,1,2,."),this.aLevelStore.push("000000000000000000.0.0.0")},a.prototype.resetData=function(){this.clearData(),this.saveData()},a.prototype.setInitialData=function(){null!=window.famobi.localStorage.getItem(this.saveDataId)&&""!=window.famobi.localStorage.getItem(this.saveDataId)?this.aLevelStore=window.famobi.localStorage.getItem(this.saveDataId).split("|"):this.saveData()},a.prototype.setCareerData=function(){this.aLevelStore[0]=oUserCareerData.cash,this.aLevelStore[1]=oUserCareerData.levelNum,this.aLevelStore[2]=10*oUserCareerData.careerStage+oUserCareerData.careerRace,this.aLevelStore[3]=oUserCareerData.curCarId,this.aLevelStore[4]=oUserCareerData.racesWon,this.aLevelStore[5]=oUserCareerData.totalWinnings,this.aLevelStore[6]=oUserCareerData.totalDistance,this.aLevelStore[7]=oUserCareerData.carsOwned,this.aLevelStore[8]=oUserCareerData.fuel,this.aLevelStore[9]=oUserCareerData.fuelResetTime},a.prototype.setPinData=function(){for(var a="",e=0;e<aPinDisplay.length;e++)aPinDisplay[e].posId.toString().length<2&&(a+="0"),a+=aPinDisplay[e].posId,a+=aPinDisplay[e].state,aPinDisplay[e].selected?a+="1":a+="0",a+=",",a+=aPinDisplay[e].careerStage,a+=",",a+=aPinDisplay[e].careerRace,a+=",",a+=".";this.aLevelStore[10]=a},a.prototype.setGarageData=function(){this.aLevelStore.splice(11,this.aLevelStore.length-11);for(var a=0;a<aUserGarageData.length;a++){var e="";aUserGarageData[a].body.toString().length<2&&(e+="0"),e+=aUserGarageData[a].body,aUserGarageData[a].colour.toString().length<2&&(e+="0"),e+=aUserGarageData[a].colour,aUserGarageData[a].rims.toString().length<2&&(e+="0"),e+=aUserGarageData[a].rims,aUserGarageData[a].shadow.toString().length<2&&(e+="0"),e+=aUserGarageData[a].shadow,aUserGarageData[a].engineUpgrade.toString().length<2&&(e+="0"),e+=aUserGarageData[a].engineUpgrade,aUserGarageData[a].accUpgrade.toString().length<2&&(e+="0"),e+=aUserGarageData[a].accUpgrade,aUserGarageData[a].wheelsUpgrade.toString().length<2&&(e+="0"),e+=aUserGarageData[a].wheelsUpgrade,aUserGarageData[a].weightUpgrade.toString().length<2&&(e+="0"),e+=aUserGarageData[a].weightUpgrade,aUserGarageData[a].nitroUpgrade.toString().length<2&&(e+="0"),e+=aUserGarageData[a].nitroUpgrade,e+=".";for(var t=0;t<aUserGarageData[a].aColoursOwned.length;t++)e+=aUserGarageData[a].aColoursOwned[t],t<aUserGarageData[a].aColoursOwned.length-1&&(e+=",");e+=".";for(t=0;t<aUserGarageData[a].aRimsOwned.length;t++)e+=aUserGarageData[a].aRimsOwned[t],t<aUserGarageData[a].aRimsOwned.length-1&&(e+=",");e+=".";for(t=0;t<aUserGarageData[a].aNeonOwned.length;t++)e+=aUserGarageData[a].aNeonOwned[t],t<aUserGarageData[a].aNeonOwned.length-1&&(e+=",");this.aLevelStore[11+a]=e}},a.prototype.getCareerData=function(){var a=Math.floor(this.aLevelStore[2]/10);return{cash:parseFloat(this.aLevelStore[0]),levelNum:parseFloat(this.aLevelStore[1]),careerStage:a,careerRace:parseFloat(this.aLevelStore[2])-10*a,curCarId:parseFloat(this.aLevelStore[3]),racesWon:parseFloat(this.aLevelStore[4]),totalWinnings:parseFloat(this.aLevelStore[5]),totalDistance:parseFloat(this.aLevelStore[6]),carsOwned:parseFloat(this.aLevelStore[7]),fuel:100,fuelResetTime:parseFloat(this.aLevelStore[9])}},a.prototype.getPinData=function(){for(var a=new Array,e=this.aLevelStore[10].toString();e.length>0;)a.push({posId:parseFloat(e.charAt(0)+e.charAt(1)),state:parseFloat(e.charAt(2)),selected:Boolean(parseFloat(e.charAt(3))),careerStage:parseFloat(e.split(",")[1]),careerRace:parseFloat(e.split(",")[2])}),e=e.slice(e.indexOf(".")+1);return a},a.prototype.getGarageData=function(){for(var a=new Array,e=11;e<this.aLevelStore.length;e++){var t=this.aLevelStore[e].toString(),r=t.split(".")[1].split(",");for(var s in r)r[s]=parseFloat(r[s]);var i=t.split(".")[2].split(",");for(var s in i)i[s]=parseFloat(i[s]);var o=t.split(".")[3].split(",");for(var s in o)o[s]=parseFloat(o[s]);a.push({body:parseFloat(t.charAt(0)+t.charAt(1)),colour:parseFloat(t.charAt(2)+t.charAt(3)),rims:parseFloat(t.charAt(4)+t.charAt(5)),shadow:parseFloat(t.charAt(6)+t.charAt(7)),engineUpgrade:parseFloat(t.charAt(8)+t.charAt(9)),accUpgrade:parseFloat(t.charAt(10)+t.charAt(11)),wheelsUpgrade:parseFloat(t.charAt(12)+t.charAt(13)),weightUpgrade:parseFloat(t.charAt(14)+t.charAt(15)),nitroUpgrade:parseFloat(t.charAt(16)+t.charAt(17)),gearNum:aCarBaseData[parseFloat(t.charAt(0)+t.charAt(1))].gearNum,engine:0,gearBox:0,grip:0,nitro:0,aColoursOwned:r,aRimsOwned:i,aNeonOwned:o})}return this.updateStats(a),a},a.prototype.updateStats=function(a){for(var e=0;e<a.length;e++)a[e].engine=Math.round(100*(aCarBaseData[a[e].body].engine+(aUpgradeData[a[e].body].engine.maxUpgradeLevel-aCarBaseData[a[e].body].engine)/5*a[e].engineUpgrade))/100,a[e].gearBox=Math.round(100*(aCarBaseData[a[e].body].gearBox+(aUpgradeData[a[e].body].acc.maxUpgradeLevel-aCarBaseData[a[e].body].gearBox)/5*a[e].accUpgrade))/100,a[e].grip=Math.round(100*(aCarBaseData[a[e].body].grip+(aUpgradeData[a[e].body].wheels.maxUpgradeLevel-aCarBaseData[a[e].body].grip)/5*a[e].wheelsUpgrade))/100,a[e].weight=Math.round(100*(aCarBaseData[a[e].body].weight+(aUpgradeData[a[e].body].weight.maxUpgradeLevel-aCarBaseData[a[e].body].weight)/5*a[e].weightUpgrade))/100,a[e].nitro=Math.round(100*(aCarBaseData[a[e].body].nitro+(aUpgradeData[a[e].body].nitro.maxUpgradeLevel-aCarBaseData[a[e].body].nitro)/5*a[e].nitroUpgrade))/100},a.prototype.saveData=function(){for(var a="",e=0;e<this.aLevelStore.length;e++)a+=this.aLevelStore[e],e<this.aLevelStore.length-1&&(a+="|");window.famobi.localStorage.setItem(this.saveDataId,a)},a}();a.SaveDataHandler=e}(Utils||(Utils={})),function(a){var e=function(){function a(a,e){this.bodyRot=0,this.bodyRotTarg=0,this.wheelRot=0,this.timerInc=0,this.enemyOffsetX=0,this.overtakeOffset=0,this.shadowFlash=0,this.ranShadowId=Math.ceil(4*Math.random()),this.ranShadowWidth=.5*Math.random()+.5,this.jumpHeight=0,this.bodyHeight=-190,this.wheelLeftX=-123,this.wheelRightX=123,this.wheelY=-71,this.frameY=-130,this.prevSpeed=0,this.frontWheelHeight=0,this.jumpState=0,this.exhaustX=-33,this.exhaustY=-120,this.curJumpBonus=0,this.aPartsPosData=new Array({flagX:143,flagY:-196},{flagX:146,flagY:-205},{flagX:-180,flagY:-218},{flagX:-173,flagY:-236},{flagX:-20,flagY:-239},{flagX:60,flagY:-252},{flagX:147,flagY:-199},{flagX:146,flagY:-195},{flagX:-153,flagY:-214},{flagX:156,flagY:-194},{flagX:-19,flagY:-243},{flagX:125,flagY:-230}),this.isUser=a,this.oCarTypeData=e,this.oCarImgData=assetLib.getData("truck"+this.oCarTypeData.body),this.oTruckElementsImgData=assetLib.getData("truckElements"),this.oUiElementsImgData=assetLib.getData("uiElements"),this.oFlagsImgData=assetLib.getData("flags"),Math.seedrandom(this.oCarTypeData.body),this.oCarTypeData.aGearRatios=new Array;for(var t=0;t<this.oCarTypeData.gearNum;t++)this.oCarTypeData.aGearRatios.push(.65+.2*Math.random());if(this.oCarTypeData.revMeterRot=this.oCarTypeData.aGearRatios[0],this.oCarTypeData.revRate=this.oCarTypeData.engine+(1-this.oCarTypeData.weight),this.oCarTypeData.speedMultiplier=36*(this.oCarTypeData.engine+(.5-this.oCarTypeData.weight/2)+this.oCarTypeData.gearBox/2),Math.seedrandom(),this.isUser)this.x=canvas.width/2,this.y=303,this.scale=.78;else{this.x=canvas.width/2,this.y=240,this.scale=.655,this.aEnemyGearOffset=new Array;for(t=0;t<this.oCarTypeData.gearNum;t++)this.aEnemyGearOffset.push(.2*Math.random()-.1)}}return a.prototype.revRock=function(a,e){void 0===a&&(a=1),void 0===e&&(e=1),this.rotTween&&this.rotTween.kill(),this.bodyRotTarg=a*radian,this.rotTween=a>0?TweenLite.to(this,e,{bodyRotTarg:0,ease:"Elastic.easeOut"}):TweenLite.to(this,e,{bodyRotTarg:0,ease:"Quad.easeIn"})},a.prototype.staticLand=function(a){void 0===a&&(a=0);var e=this;if(0==a){this.jumpTween0&&(this.jumpTween0.kill(),this.jumpTween1.kill(),this.jumpTween2.kill()),this.frontWheelHeight=-20,this.jumpHeight=-30,this.bodyRotTarg=this.bodyRot=-5*radian;this.jumpTween2=TweenLite.to(this,.3,{jumpHeight:10,ease:"Quad.easeIn",onComplete:function(){e.staticLand(1)}}),this.jumpTween0=TweenLite.to(this,.3,{delay:.3,frontWheelHeight:0,ease:"Back.easeOut"}),this.jumpTween1=TweenLite.to(this,.3,{delay:.3,bodyRotTarg:0,bodyRot:0*radian,ease:"Back.easeOut"})}else 1==a&&(this.jumpTween2=TweenLite.to(this,1.5,{jumpHeight:0,ease:"Elastic.easeOut"}))},a.prototype.jump=function(a){void 0===a&&(a=0);var e=this;if(0==a){this.isUser&&playSound("jump"+Math.floor(3*Math.random())),this.jumpState=1,this.curJumpBonus=0,this.jumpTween0&&(this.jumpTween0.kill(),this.jumpTween1.kill(),this.jumpTween2.kill());var t=Math.max(.8*this.prevSpeed+45*(1-this.oCarTypeData.weight),90),r=Math.max(Math.min(Math.random()*(5+this.prevSpeed/5),35),10);this.jumpTween0=TweenLite.to(this,.1,{frontWheelHeight:3*-r,ease:"Exp.easeOut"}),this.jumpTween1=TweenLite.to(this,.2,{bodyRotTarg:-r*radian,bodyRot:-r*radian,ease:"Quad.easeOut"}),this.jumpTween2=TweenLite.to(this,.5,{jumpHeight:-t,ease:"Quad.easeOut",onComplete:function(){e.jump(1)}})}else if(1==a){var s=Math.min(this.prevSpeed/300+.25*(1-this.oCarTypeData.weight),.7);t=Math.max(.8*this.prevSpeed+45*(1-this.oCarTypeData.weight),90);this.jumpTween2=TweenLite.to(this,s,{jumpHeight:Math.min(t/4,50),ease:"Quad.easeIn",onComplete:function(){e.jump(2)}}),this.jumpTween0=TweenLite.to(this,1*s,{delay:s,frontWheelHeight:0,ease:"Back.easeOut"}),this.jumpTween1=TweenLite.to(this,1*s,{delay:s,bodyRotTarg:0,bodyRot:0*radian,ease:"Back.easeOut"})}else 2==a&&(this.curJumpBonus>oRaceProgress.jumpBonus&&(oRaceProgress.jumpBonus=Math.round(this.curJumpBonus)),this.jumpState=0,this.isUser?oRaceProgress.userJumpTiggered=!1:oRaceProgress.enemyJumpTiggered=!1,this.jumpTween2=TweenLite.to(this,3,{jumpHeight:0,ease:"Elastic.easeOut"}))},a.prototype.update=function(){this.bodyRot+=5*(this.bodyRotTarg-this.bodyRot)*delta,this.jumpState&&this.isUser&&(this.curJumpBonus+=300*delta),0==oRaceProgress.time?(this.x=canvas.width/2+100*this.bodyRot,this.wheelRot=1*this.bodyRot,this.isUser||(this.timerInc-=delta,this.timerInc<0&&(this.revRock(),playSound("rev"+Math.floor(2*Math.random())),addExhaust(this),addSmoke(this),this.timerInc=1*Math.random()))):this.isUser?(this.wheelRot=scrollGround.scrollX/10,1!=this.jumpState&&(this.bodyRotTarg=Math.max((this.prevSpeed-oRaceProgress.userSpeed)/2/delta,-7)*radian),this.prevSpeed=oRaceProgress.userSpeed):(this.wheelRot=this.enemyOffsetX/10,1!=this.jumpState&&(this.bodyRotTarg=Math.max((this.prevSpeed-oRaceProgress.enemySpeed)/2/delta,-7)*radian),this.prevSpeed=oRaceProgress.enemySpeed),this.isUser?oRaceProgress.time>0&&(2!=oRaceProgress.userAccState?this.overtakeOffset+=5*(Math.max(-100,Math.min(100,(enemyCar.x-this.x)/2))-this.overtakeOffset)*delta:this.overtakeOffset+=.5*(Math.max(-100,Math.min(100,0))-this.overtakeOffset)*delta,this.x=canvas.width/2-this.overtakeOffset,oRaceProgress.userProgress=Math.min(1,oRaceProgress.userProgress+oRaceProgress.userSpeed*delta/3500/oRaceProgress.raceLength)):(2!=oRaceProgress.userAccState?this.overtakeOffset+=5*(Math.max(-100,Math.min(100,(this.x-userCar.x)/2))-this.overtakeOffset)*delta:this.overtakeOffset+=.5*(Math.max(-100,Math.min(100,0))-this.overtakeOffset)*delta,this.enemyOffsetX+=oRaceProgress.enemySpeed*delta*20,this.x=canvas.width/2-scrollGround.scrollX+this.enemyOffsetX-this.overtakeOffset,oRaceProgress.enemyProgress=Math.min(1,oRaceProgress.enemyProgress+oRaceProgress.enemySpeed*delta/3500/oRaceProgress.raceLength))},a.prototype.render=function(a){void 0===a&&(a=!0);var e=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.shadow].x,t=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.shadow].y,r=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.shadow].width,s=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.shadow].height;ctx.drawImage(this.oTruckElementsImgData.img,e,t,r,s,this.x-r/2*this.scale,this.y-s/2*this.scale,r*this.scale,s*this.scale),ctx.save(),ctx.translate(this.x+(this.wheelLeftX+40)*this.scale,this.y+(this.wheelY+this.jumpHeight)*this.scale),ctx.rotate(Math.min(this.bodyRot,.2)),ctx.scale(this.scale,this.scale);e=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.frame0].x,t=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.frame0].y,r=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.frame0].width,s=this.oTruckElementsImgData.oData.oAtlasData[oImageIds.frame0].height;if(ctx.drawImage(this.oTruckElementsImgData.img,e,t,r,s,-(r/2+this.wheelLeftX+40),-s,r,s),ctx.scale(1/this.scale,1/this.scale),ctx.rotate(-this.bodyRot),ctx.translate(-(this.x+(this.wheelLeftX+40)*this.scale),-(this.y+(this.wheelY+this.jumpHeight)*this.scale)),a){ctx.translate(this.x+(this.wheelLeftX+40)*this.scale,this.y+(this.wheelY+this.jumpHeight)*this.scale),ctx.rotate(this.bodyRot),ctx.scale(this.scale,this.scale);e=this.oCarImgData.oData.oAtlasData[oImageIds["colour"+this.oCarTypeData.colour]].x,t=this.oCarImgData.oData.oAtlasData[oImageIds["colour"+this.oCarTypeData.colour]].y,r=this.oCarImgData.oData.oAtlasData[oImageIds["colour"+this.oCarTypeData.colour]].width,s=this.oCarImgData.oData.oAtlasData[oImageIds["colour"+this.oCarTypeData.colour]].height;ctx.drawImage(this.oCarImgData.img,e,t,r,s,-(r/2+this.wheelLeftX+40),-70-s,r,s),ctx.scale(1/this.scale,1/this.scale),ctx.rotate(-this.bodyRot),ctx.translate(-(this.x+(this.wheelLeftX+40)*this.scale),-(this.y+(this.wheelY+this.jumpHeight)*this.scale)),ctx.translate(this.x+(this.wheelLeftX+40)*this.scale,this.y+(this.wheelY+this.jumpHeight)*this.scale),ctx.rotate(this.bodyRot),ctx.scale(this.scale,this.scale);e=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+this.oCarTypeData.shadow]].x,t=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+this.oCarTypeData.shadow]].y,r=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+this.oCarTypeData.shadow]].width,s=this.oFlagsImgData.oData.oAtlasData[oImageIds["flag"+this.oCarTypeData.shadow]].height;ctx.drawImage(this.oFlagsImgData.img,e,t,r,s,this.aPartsPosData[this.oCarTypeData.body].flagX+(-this.wheelLeftX-40)-r,this.aPartsPosData[this.oCarTypeData.body].flagY-this.wheelY-s,r,s),ctx.scale(1/this.scale,1/this.scale),ctx.rotate(-this.bodyRot),ctx.translate(-(this.x+(this.wheelLeftX+40)*this.scale),-(this.y+(this.wheelY+this.jumpHeight)*this.scale))}e=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+this.oCarTypeData.rims]].x,t=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+this.oCarTypeData.rims]].y,r=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+this.oCarTypeData.rims]].width,s=this.oTruckElementsImgData.oData.oAtlasData[oImageIds["rim"+this.oCarTypeData.rims]].height;if(ctx.translate(this.x+this.wheelLeftX*this.scale,this.y+(this.wheelY+Math.min(this.jumpHeight,0))*this.scale),ctx.rotate(this.wheelRot),ctx.scale(this.scale,this.scale),ctx.drawImage(this.oTruckElementsImgData.img,e,t,r,s,-r/2,-s/2,r,s),ctx.scale(1/this.scale,1/this.scale),ctx.rotate(-this.wheelRot),ctx.translate(-(this.x+this.wheelLeftX*this.scale),-(this.y+(this.wheelY+Math.min(this.jumpHeight,0))*this.scale)),ctx.translate(this.x+(this.wheelRightX+Math.min(this.frontWheelHeight,0)/6)*this.scale,this.y+(this.wheelY+Math.min(this.frontWheelHeight+this.jumpHeight,0))*this.scale),ctx.rotate(this.wheelRot),ctx.scale(this.scale,this.scale),ctx.drawImage(this.oTruckElementsImgData.img,e,t,r,s,-r/2,-s/2,r,s),ctx.restore(),oRaceProgress&&"race"==gameState){var i=2*oRaceProgress.userNitroBoost;this.isUser||(i=2*oRaceProgress.enemyNitroBoost);var o=3*Math.random()+1;e=this.oUiElementsImgData.oData.oAtlasData[oImageIds.nitroJet].x,t=this.oUiElementsImgData.oData.oAtlasData[oImageIds.nitroJet].y,r=this.oUiElementsImgData.oData.oAtlasData[oImageIds.nitroJet].width,s=this.oUiElementsImgData.oData.oAtlasData[oImageIds.nitroJet].height;ctx.drawImage(this.oUiElementsImgData.img,e,t,r,s,this.x+(this.exhaustX-r*i)*this.scale,this.y+(this.exhaustY-s/2*o+this.jumpHeight)*this.scale,r*i*this.scale,s*o*this.scale)}},a}();a.Car=e}(Elements||(Elements={}));var Elements,__extends=this.__extends||function(a,e){function t(){this.constructor=a}t.prototype=e.prototype,a.prototype=new t};!function(a){var e=function(a){function e(e){a.call(this,e,25,45,"exploding"),this.setAnimType("once","exploding"),this.animEndedFunc=function(){this.removeMe=!0}}return __extends(e,a),e.prototype.update=function(){a.prototype.updateAnimation.call(this,delta),this.x-=scrollGround.scrollX/100*delta},e.prototype.render=function(){a.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);a.Exhaust=e}(Elements||(Elements={})),function(a){var e=function(a){function e(e){a.call(this,e,15,45,"exploding"),this.incY=0,this.setAnimType("once","exploding"),this.animEndedFunc=function(){this.removeMe=!0}}return __extends(e,a),e.prototype.update=function(){a.prototype.updateAnimation.call(this,delta),this.incY+=100*delta,this.x-=scrollGround.scrollX/50*delta,this.y-=this.incY*delta},e.prototype.render=function(){a.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);a.Smoke=e}(Elements||(Elements={})),function(a){var e=function(a){function e(){a.call(this,assetLib.getData("firework"+Math.floor(2*Math.random())),30,30,"explode"),this.vy=0,this.setAnimType("once","explode"),this.animEndedFunc=function(){this.removeMe=!0},TweenLite.to(this,1,{scaleX:2,scaleY:2,ease:"Quad.easeOut"})}return __extends(e,a),e.prototype.update=function(e,t){this.vy+=150*delta,this.y+=this.vy*delta,a.prototype.updateAnimation.call(this,delta)},e.prototype.render=function(){a.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);a.Firework=e}(Elements||(Elements={})),function(a){var e=function(a){function e(e){a.call(this,e,20,45,"spraying")}return __extends(e,a),e.prototype.update=function(){a.prototype.updateAnimation.call(this,delta),this.scaleX=this.scaleY=Math.min(oRaceProgress.userSpeed/100,1),this.x=userCar.x-this.scaleX*this.centreX-90,this.y=userCar.y-this.scaleY*(this.centreY-5)},e.prototype.render=function(){userCar.jumpHeight>=-5&&a.prototype.renderSimple.call(this,ctx)},e}(Utils.AnimSprite);a.DustSpray=e}(Elements||(Elements={}));var previousTime,canvasX,canvasY,canvasScaleX,canvasScaleY,requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60,(new Date).getTime())},canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");canvas.width=700,canvas.height=450;var sound,music,splash,assetLib,preAssetLib,delta,div=document.getElementById("canvas-wrapper"),audioType=0,muted=!1,splashTimer=0,rotatePause=!1,manualPause=!1,isMobile=!1,gameState="loading",aLangs=new Array("EN"),curLang="",isBugBrowser=!1,isIE10=!1,radian=Math.PI/180,raceType="career",firstRun=!0,ios9FirstTouch=!1,saveDataHandler=new Utils.SaveDataHandler("racingmonstertrucks"),visibilityManagerIsOn=!0,hasFocus=!0;navigator.userAgent.match(/MSIE\s([\d]+)/)&&(isIE10=!0);var deviceAgent=navigator.userAgent.toLowerCase();(deviceAgent.match(/(iphone|ipod|ipad)/)||deviceAgent.match(/(android)/)||deviceAgent.match(/(iemobile)/)||deviceAgent.match(/iphone/i)||deviceAgent.match(/ipad/i)||deviceAgent.match(/ipod/i)||deviceAgent.match(/blackberry/i)||deviceAgent.match(/bada/i))&&(isMobile=!0,deviceAgent.match(/(android)/)&&!/Chrome/.test(navigator.userAgent)&&(isBugBrowser=!0));var panel,hud,background,userInput=new Utils.UserInput(canvas,isBugBrowser);function visibleResume(){hasFocus||(userInput&&userInput.checkKeyFocus(),1!=audioType||muted||"pause"==gameState||(Howler.unmute(),music.pause(),music.play())),hasFocus=!0}function visiblePause(){hasFocus=!1,1!=audioType||muted||"pause"==gameState||"loading"==gameState||"splash"==gameState||(Howler.mute(),music.pause())}if(resizeCanvas(),window.onresize=function(){resizeCanvas()},window.onpageshow=function(){hasFocus||(userInput&&userInput.checkKeyFocus(),muted||"pause"==gameState||(Howler.unmute(),music.pause(),music.play())),hasFocus=!0},window.onpagehide=function(){hasFocus=!1,Howler.mute(),music.pause()},window.addEventListener("load",function(){resizeCanvas(),window.addEventListener("orientationchange",function(){resizeCanvas()},!1)}),isIE10||void 0===window.AudioContext&&void 0===window.webkitAudioContext&&-1!=navigator.userAgent.indexOf("Android"))audioType=0;else{audioType=1;var musicLoaded=new Promise(function(a,e){music=new Howl({urls:["audio/music.ogg","audio/music.m4a"],volume:.001,loop:!0,onload:function(){a()},onloaderror:function(){e()}})}),soundLoaded=new Promise(function(a,e){sound=new Howl({urls:["audio/sound.ogg","audio/sound.m4a"],sprite:{startSpin0:[0,2e3],startSpin1:[2500,2e3],startSpin2:[5500,1800],buy:[7500,1600],click:[9500,400],nitro:[1e4,1600],perfectGear:[12e3,1200],goodGear:[13500,1300],endLose:[15e3,1300],endWin:[16500,2500],engineStart:[19500,2e3],rev0:[22e3,1600],rev1:[24e3,2e3],driveOff:[26500,5e3],changeGear0:[32e3,3e3],changeGear1:[35500,2500],changeGear2:[38500,2500],changeGear3:[41500,2500],timer0:[44500,700],timer1:[45500,700],engineHum:[46500,6200],firework:[53e3,1600],silence:[31e3,200],jump0:[55e3,2700],jump1:[58e3,2700],jump2:[61500,2700]},onload:function(){a()},onloaderror:function(){e()}})})}var panelFrame,oLogoBut,musicTween,scrollGround,userCar,enemyCar,oRaceProgress,userRevTween,enemyRevTween,userNitroTween,enemyNitroTween,curUpgradeCost,curCustomiseCost,aOverEffects,aUnderEffects,aFireworks,curPinSelectedId,oPrevCareerData,dustSpray,aTutorials=new Array,oLogoData={},oImageIds={},oUserCareerData={},aUserGarageData=new Array,accPedalIsDown=!1,aCarBaseData=new Array({id:"blini",body:0,colour:0,rims:0,gearNum:6,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[0],aNeonOwned:[0]},{id:"owldi",body:1,colour:0,rims:2,gearNum:6,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[2],aNeonOwned:[0]},{id:"merlindese",body:2,colour:0,rims:4,gearNum:6,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[4],aNeonOwned:[0]},{id:"amw",body:3,colour:0,rims:1,gearNum:6,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[1],aNeonOwned:[0]},{id:"globus",body:4,colour:0,rims:5,gearNum:6,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[5],aNeonOwned:[0]},{id:"puma",body:5,colour:0,rims:3,gearNum:7,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[3],aNeonOwned:[0]},{id:"konstig",body:6,colour:0,rims:9,gearNum:7,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[9],aNeonOwned:[0]},{id:"fellani",body:7,colour:0,rims:10,gearNum:7,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[10],aNeonOwned:[0]},{id:"limbodani",body:8,colour:0,rims:6,gearNum:7,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[6],aNeonOwned:[0]},{id:"maclean",body:9,colour:0,rims:8,gearNum:8,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[8],aNeonOwned:[0]},{id:"bugazzi",body:10,colour:0,rims:7,gearNum:8,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[7],aNeonOwned:[0]},{id:"tykan",body:11,colour:0,rims:11,gearNum:8,shadow:0,nitro:0,engineUpgrade:0,accUpgrade:0,wheelsUpgrade:0,weightUpgrade:0,nitroUpgrade:0,aColoursOwned:[0],aRimsOwned:[11],aNeonOwned:[0]}),aUpgradeData=new Array,aCustomiseData=new Array,aPinPos=new Array({x:347,y:88},{x:593,y:229},{x:433,y:311},{x:533,y:326},{x:491,y:219},{x:342,y:284},{x:254,y:327},{x:538,y:122},{x:400,y:191},{x:287,y:186},{x:639,y:118},{x:646,y:327},{x:442,y:70},{x:249,y:71},{x:152,y:317},{x:50,y:335},{x:195,y:215},{x:155,y:119},{x:100,y:225},{x:56,y:104}),aPinDisplay=new Array,curShopCarId=0,upgradeTab="engine",customiseTab="colour",curRimScroll=0,curCustomiseButHighlight=0,oCustomiseSaveData={colour:0,rims:0,shadow:0},firstNitroStage=0,swayX=0,pinsPerMap=10,pinPage=0,aMapColours=new Array("rgba(255, 246, 172,","rgba(250, 179, 161,","rgba(159, 113, 142,","rgba(48, 60, 110,","rgba(98, 167, 146,","rgba(134, 159, 166,","rgba(159, 0, 255,","rgba(129, 18, 27,","rgba(255, 132, 83,"),newPinPage=!1,userNitroShake=0,firstTouchAfterLoading=!0,newCarBought=!1,oGearChanges={perfect:0,good:0,regular:0,perfectStart:null},raceEndBonusId=0,configHasLoaded=!1,gameHasLoaded=!1,temp=0,gameComplete=!1,smokeInc=0,defaultConfig={raceRewardMultiplier:1,enemyDifficultyMultiplier:1.02,carSaleMultiplier:1,gold_pack_small:1e4,gold_pack_medium:5e4,gold_pack_big:1e5,carBaseStats:{blini:{engine:.29,gearBox:.19,grip:.23,weight:.54,cost:1595,upgrades:{engine:{startCost:150,increaseAmount:1.2,maxUpgradeLevel:.34},acc:{startCost:100,increaseAmount:1.2,maxUpgradeLevel:.26},wheels:{startCost:75,increaseAmount:1.2,maxUpgradeLevel:.37},weight:{startCost:75,increaseAmount:1.2,maxUpgradeLevel:.41},nitro:{startCost:150,increaseAmount:1.2,maxUpgradeLevel:.31}},customise:{colour:{startCost:100,increaseAmount:1.05},rims:{startCost:75,increaseAmount:1.05},shadow:{startCost:150,increaseAmount:1.05}}},owldi:{engine:.33,gearBox:.24,grip:.36,weight:.62,cost:2795,upgrades:{engine:{startCost:200,increaseAmount:1.2,maxUpgradeLevel:.43},acc:{startCost:150,increaseAmount:1.2,maxUpgradeLevel:.33},wheels:{startCost:100,increaseAmount:1.2,maxUpgradeLevel:.43},weight:{startCost:100,increaseAmount:1.2,maxUpgradeLevel:.5},nitro:{startCost:200,increaseAmount:1.2,maxUpgradeLevel:.37}},customise:{colour:{startCost:150,increaseAmount:1.05},rims:{startCost:100,increaseAmount:1.05},shadow:{startCost:200,increaseAmount:1.05}}},merlindese:{engine:.41,gearBox:.32,grip:.38,weight:.74,cost:5995,upgrades:{engine:{startCost:275,increaseAmount:1.2,maxUpgradeLevel:.48},acc:{startCost:200,increaseAmount:1.2,maxUpgradeLevel:.43},wheels:{startCost:150,increaseAmount:1.2,maxUpgradeLevel:.49},weight:{startCost:150,increaseAmount:1.2,maxUpgradeLevel:.6},nitro:{startCost:275,increaseAmount:1.2,maxUpgradeLevel:.44}},customise:{colour:{startCost:200,increaseAmount:1.05},rims:{startCost:150,increaseAmount:1.05},shadow:{startCost:275,increaseAmount:1.05}}},amw:{engine:.45,gearBox:.39,grip:.44,weight:.48,cost:9995,upgrades:{engine:{startCost:350,increaseAmount:1.2,maxUpgradeLevel:.54},acc:{startCost:275,increaseAmount:1.2,maxUpgradeLevel:.5},wheels:{startCost:250,increaseAmount:1.2,maxUpgradeLevel:.57},weight:{startCost:250,increaseAmount:1.2,maxUpgradeLevel:.32},nitro:{startCost:350,increaseAmount:1.2,maxUpgradeLevel:.51}},customise:{colour:{startCost:275,increaseAmount:1.05},rims:{startCost:250,increaseAmount:1.05},shadow:{startCost:350,increaseAmount:1.05}}},globus:{engine:.52,gearBox:.44,grip:.57,weight:.32,cost:15495,upgrades:{engine:{startCost:450,increaseAmount:1.2,maxUpgradeLevel:.57},acc:{startCost:400,increaseAmount:1.2,maxUpgradeLevel:.58},wheels:{startCost:350,increaseAmount:1.2,maxUpgradeLevel:.67},weight:{startCost:350,increaseAmount:1.2,maxUpgradeLevel:.24},nitro:{startCost:450,increaseAmount:1.2,maxUpgradeLevel:.59}},customise:{colour:{startCost:400,increaseAmount:1.05},rims:{startCost:350,increaseAmount:1.05},shadow:{startCost:450,increaseAmount:1.05}}},puma:{engine:.55,gearBox:.58,grip:.53,weight:.54,cost:22e3,upgrades:{engine:{startCost:550,increaseAmount:1.2,maxUpgradeLevel:.63},acc:{startCost:500,increaseAmount:1.2,maxUpgradeLevel:.6},wheels:{startCost:450,increaseAmount:1.2,maxUpgradeLevel:.64},weight:{startCost:450,increaseAmount:1.2,maxUpgradeLevel:.46},nitro:{startCost:550,increaseAmount:1.2,maxUpgradeLevel:.61}},customise:{colour:{startCost:500,increaseAmount:1.05},rims:{startCost:450,increaseAmount:1.05},shadow:{startCost:550,increaseAmount:1.05}}},konstig:{engine:.59,gearBox:.54,grip:.62,weight:.47,cost:35495,upgrades:{engine:{startCost:750,increaseAmount:1.2,maxUpgradeLevel:.65},acc:{startCost:650,increaseAmount:1.2,maxUpgradeLevel:.71},wheels:{startCost:550,increaseAmount:1.2,maxUpgradeLevel:.7},weight:{startCost:550,increaseAmount:1.2,maxUpgradeLevel:.36},nitro:{startCost:750,increaseAmount:1.2,maxUpgradeLevel:.66}},customise:{colour:{startCost:650,increaseAmount:1.05},rims:{startCost:550,increaseAmount:1.05},shadow:{startCost:750,increaseAmount:1.05}}},fellani:{engine:.62,gearBox:.68,grip:.69,weight:.5,cost:48e3,upgrades:{engine:{startCost:1e3,increaseAmount:1.2,maxUpgradeLevel:.7},acc:{startCost:750,increaseAmount:1.2,maxUpgradeLevel:.74},wheels:{startCost:500,increaseAmount:1.2,maxUpgradeLevel:.73},weight:{startCost:500,increaseAmount:1.2,maxUpgradeLevel:.38},nitro:{startCost:1e3,increaseAmount:1.2,maxUpgradeLevel:.7}},customise:{colour:{startCost:750,increaseAmount:1.05},rims:{startCost:500,increaseAmount:1.05},shadow:{startCost:1e3,increaseAmount:1.05}}},limbodani:{engine:.64,gearBox:.61,grip:.67,weight:.52,cost:62e3,upgrades:{engine:{startCost:1200,increaseAmount:1.2,maxUpgradeLevel:.77},acc:{startCost:800,increaseAmount:1.2,maxUpgradeLevel:.76},wheels:{startCost:600,increaseAmount:1.2,maxUpgradeLevel:.81},weight:{startCost:600,increaseAmount:1.2,maxUpgradeLevel:.33},nitro:{startCost:1200,increaseAmount:1.2,maxUpgradeLevel:.74}},customise:{colour:{startCost:800,increaseAmount:1.05},rims:{startCost:600,increaseAmount:1.05},shadow:{startCost:1200,increaseAmount:1.05}}},maclean:{engine:.76,gearBox:.72,grip:.81,weight:.46,cost:99e3,upgrades:{engine:{startCost:1500,increaseAmount:1.2,maxUpgradeLevel:.85},acc:{startCost:1e3,increaseAmount:1.2,maxUpgradeLevel:.81},wheels:{startCost:750,increaseAmount:1.2,maxUpgradeLevel:.81},weight:{startCost:750,increaseAmount:1.2,maxUpgradeLevel:.26},nitro:{startCost:1500,increaseAmount:1.2,maxUpgradeLevel:.79}},customise:{colour:{startCost:1e3,increaseAmount:1.05},rims:{startCost:750,increaseAmount:1.05},shadow:{startCost:1500,increaseAmount:1.05}}},bugazzi:{engine:.84,gearBox:.74,grip:.56,weight:.61,cost:15e4,upgrades:{engine:{startCost:2e3,increaseAmount:1.2,maxUpgradeLevel:.91},acc:{startCost:1500,increaseAmount:1.2,maxUpgradeLevel:.85},wheels:{startCost:1e3,increaseAmount:1.2,maxUpgradeLevel:.76},weight:{startCost:1e3,increaseAmount:1.2,maxUpgradeLevel:.43},nitro:{startCost:2e3,increaseAmount:1.2,maxUpgradeLevel:.9}},customise:{colour:{startCost:1500,increaseAmount:1.05},rims:{startCost:1e3,increaseAmount:1.05},shadow:{startCost:2e3,increaseAmount:1.05}}},tykan:{engine:.82,gearBox:.78,grip:.78,weight:.41,cost:25e4,upgrades:{engine:{startCost:3e3,increaseAmount:1.2,maxUpgradeLevel:.97},acc:{startCost:2e3,increaseAmount:1.2,maxUpgradeLevel:.93},wheels:{startCost:1500,increaseAmount:1.2,maxUpgradeLevel:.92},weight:{startCost:1500,increaseAmount:1.2,maxUpgradeLevel:.27},nitro:{startCost:3e3,increaseAmount:1.2,maxUpgradeLevel:.95}},customise:{colour:{startCost:2e3,increaseAmount:1.05},rims:{startCost:1500,increaseAmount:1.05},shadow:{startCost:3e3,increaseAmount:1.05}}}}};function setConfig(){for(var a=0;a<aCarBaseData.length;a++)aCarBaseData[a].engine=defaultConfig.carBaseStats[aCarBaseData[a].id].engine,aCarBaseData[a].gearBox=defaultConfig.carBaseStats[aCarBaseData[a].id].gearBox,aCarBaseData[a].grip=defaultConfig.carBaseStats[aCarBaseData[a].id].grip,aCarBaseData[a].weight=defaultConfig.carBaseStats[aCarBaseData[a].id].weight,aCarBaseData[a].cost=defaultConfig.carBaseStats[aCarBaseData[a].id].cost,aUpgradeData[a]=defaultConfig.carBaseStats[aCarBaseData[a].id].upgrades,aCustomiseData[a]=defaultConfig.carBaseStats[aCarBaseData[a].id].customise}function extGameLoad(){loadPreAssets()}function preloadAudio(){Promise.all([musicLoaded,soundLoaded]).catch(function(){console.log("error while preloading audio"),audioType=0}).then(gameLoaded)}function gameLoaded(){gameHasLoaded=!0,setConfig(),initSplash()}function initSplash(){gameState="splash",resizeCanvas(),splash=new Elements.Splash(assetLib.getData("splash"),canvas.width,canvas.height),userInput.addHitArea("moreGames",butEventHandler,null,"rect",{aRect:[0,0,canvas.width,canvas.height]},!0),oUserCareerData=saveDataHandler.getCareerData(),aUserGarageData=saveDataHandler.getGarageData(),aPinDisplay=saveDataHandler.getPinData(),pinPage=Math.floor(aPinDisplay.length/pinsPerMap-.1),oPrevCareerData={careerStage:aPinDisplay[0].careerStage,careerRace:aPinDisplay[0].careerRace,posId:aPinDisplay[0].posId},curShopCarId=Math.min(aCarBaseData.length-1,oUserCareerData.curCarId+1);for(var a=0;a<aPinDisplay.length;a++)if(aPinDisplay[a].selected){curPinSelectedId=aPinDisplay[a].posId;break}firstNitroStage=0;for(a=0;a<aUserGarageData.length;a++)aUserGarageData[a].nitroUpgrade>0&&(firstNitroStage=2);window.famobi_onPauseRequested=function(){audioType>0&&!muted&&"pause"!=gameState&&(Howler.mute(),music.pause())},window.famobi_onResumeRequested=function(){audioType>0&&!muted&&"pause"!=gameState&&(Howler.unmute(),music.pause(),music.play())},window.famobi.localStorage.getItem("muted")&&(muted=!1,toggleMute(!0)),1==audioType&&!muted&&hasFocus&&(music.pause(),music.play()),initStartScreen()}function initStartScreen(){gameState="start",userInput.removeHitArea("moreGames"),userInput.addHitArea("mute",butEventHandler,null,"rect",{aRect:[655,0,canvas.width,42]},!0),1==audioType&&(musicTween&&musicTween.kill(),musicTween=TweenLite.to(music,.1,{volume:.5,ease:"Linear.easeNone"})),oUserCareerData=saveDataHandler.getCareerData(),aUserGarageData=saveDataHandler.getGarageData(),curShopCarId=Math.min(aCarBaseData.length-1,oUserCareerData.curCarId+1),firstRun=1==oUserCareerData.careerStage&&1==oUserCareerData.careerRace&&250==oUserCareerData.cash,firstNitroStage=0;for(var a=0;a<aUserGarageData.length;a++)aUserGarageData[a].nitroUpgrade>0&&(firstNitroStage=2);background=new Elements.Background("title"),userInput.addHitArea("mute",butEventHandler,null,"rect",{aRect:[655,0,canvas.width,42]},!0),userInput.addHitArea("gotoMapFromStart",butEventHandler,null,"rect",{aRect:[506,367,canvas.width,canvas.height]},!0);var e={oImgData:assetLib.getData("moreGamesBut"),aPos:[88,405],id:"none",scale:.25,noMove:!0},t={oImgData:assetLib.getData("uiButs"),aPos:[628,27],id:oImageIds.creditsBut,noMove:!0};userInput.addHitArea("moreGames",butEventHandler,null,"image",e),userInput.addHitArea("credits",butEventHandler,null,"image",t);var r=new Array(e,t);(panel=new Elements.Panel(gameState,r)).titleTween(),previousTime=(new Date).getTime(),updateStartScreenEvent()}function initCreditsScreen(){gameState="credits",background=new Elements.Background("title");try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_CREDITS)}catch(a){}var a={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.backBut,noMove:!0},e={oImgData:assetLib.getData("uiButs"),aPos:[659,425],id:oImageIds.resetDataBut,noMove:!0};userInput.addHitArea("backFromCredits",butEventHandler,null,"image",a),userInput.addHitArea("clearData",butEventHandler,null,"image",e);var t=new Array(a,e);(panel=new Elements.Panel(gameState,t)).startTween2(),previousTime=(new Date).getTime(),updateCreditsScreenEvent()}function initStats(){gameState="stats";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_OTHER,"trophies")}catch(a){}(background=new Elements.Background("garage")).renderState="none";var a={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.backBut,noMove:!0};userInput.addHitArea("backFromStats",butEventHandler,null,"image",a);var e=new Array(a);(panel=new Elements.Panel(gameState,e)).startTween2(),aFireworks=new Array,previousTime=(new Date).getTime(),updateStatsScreenEvent()}function initRaceSelect(a){void 0===a&&(a=!0),gameState="raceSelect";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_LEVELSELECT)}catch(a){}(background=new Elements.Background("mapBg")).setMapPos(),background.renderState="map",firstRun=1==oUserCareerData.careerStage&&1==oUserCareerData.careerRace;var e=new Array;if(!firstRun){var t={oImgData:assetLib.getData("uiButs"),aPos:[149,425],id:oImageIds.garageBut,noMove:!0},r={oImgData:assetLib.getData("uiButs"),aPos:[283,425],id:oImageIds.upgradeBut,noMove:!0},s={oImgData:assetLib.getData("uiButs"),aPos:[417,425],id:oImageIds.customiseBut,noMove:!0},i={oImgData:assetLib.getData("uiButs"),aPos:[551,425],id:oImageIds.shopBut,noMove:!0},o={oImgData:assetLib.getData("uiButs"),aPos:[660,425],id:oImageIds.statsBut,noMove:!0};userInput.addHitArea("gotoGarageFromRaceSelect",butEventHandler,null,"image",t),userInput.addHitArea("gotoUpgradeFromRaceSelect",butEventHandler,null,"image",r),userInput.addHitArea("gotoCustomiseFromRaceSelect",butEventHandler,null,"image",s),userInput.addHitArea("gotoShopFromRaceSelect",butEventHandler,null,"image",i),userInput.addHitArea("gotoStatsFromRaceSelect",butEventHandler,null,"image",o),e.push(t,i,r,s,o)}if(pinPage>0){var g={oImgData:assetLib.getData("uiButs"),aPos:[21,canvas.height/2],id:oImageIds.leftBut,noMove:!0};userInput.addHitArea("mapLeftBut",butEventHandler,null,"image",g),e.push(g)}if(pinPage<Math.floor(aPinDisplay.length/pinsPerMap-.1)){var h={oImgData:assetLib.getData("uiButs"),aPos:[canvas.width-21,canvas.height/2],id:oImageIds.rightBut,noMove:!0};userInput.addHitArea("mapRightBut",butEventHandler,null,"image",h),e.push(h)}for(var m=pinPage*pinsPerMap;m<pinPage*pinsPerMap+pinsPerMap&&!(m>=aPinDisplay.length);m++)if(aPinDisplay[m].state>0){var n=aPinDisplay[m].posId;userInput.addHitArea("pinSelect",butEventHandler,{arrayId:m,state:aPinDisplay[m].state,posId:n},"rect",{aRect:[aPinPos[n].x-40,aPinPos[n].y-45,aPinPos[n].x+40,aPinPos[n].y+45]},!1)}if(panel=new Elements.Panel(gameState,e),a&&panel.startTween1(),newPinPage)panel.newMapMessage(),newPinPage=!1,oUserCareerData.cash+=Math.round(1e3*pinPage),saveDataHandler.setCareerData(),saveDataHandler.setGarageData(),saveDataHandler.saveData(),playSound("buy");else if(newPinPage&&gameComplete){try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_TOTALSCORE,{levelName:oUserCareerData.careerStage.toString(),levelScore:oUserCareerData.cash})}catch(a){}panel.newMapMessage(),newPinPage=!1,playSound("buy")}previousTime=(new Date).getTime(),updateRaceSelectEvent()}function initRacePreview(){gameState="racePreview";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_LEVELINTRO)}catch(a){}var a=setRaceSelectButs();userCar=new Elements.Car(!0,aUserGarageData[oUserCareerData.curCarId]),enemyCar=new Elements.Car(!1,getEnemy()),accPedalIsDown=!1,aOverEffects=new Array,aUnderEffects=new Array,aFireworks=new Array,(panel=new Elements.Panel(gameState,a)).oRaceData=getRaceData(),scrollGround=new Elements.ScrollGround,swayX=0,panel.startTween1(),previousTime=(new Date).getTime(),updateRacePreviewEvent()}function setRaceSelectButs(){var a=new Array,e={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.backBut,noMove:!0};return userInput.addHitArea("gotoMapFromRacePreview",butEventHandler,null,"image",e),userInput.addHitArea("gotoRaceStart",butEventHandler,null,"rect",{aRect:[506,367,canvas.width,canvas.height]},!0),a.push(e),a}function updateMapPins(a){if("career"==raceType&&pinPage==Math.floor(aPinDisplay.length/pinsPerMap-.1)){for(var e=!0,t=pinPage*pinsPerMap;t<aPinDisplay.length;t++)1==aPinDisplay[t].state&&(aPinDisplay[t].state=2),0==aPinDisplay[t].state&&(e=!1,aPinDisplay[t].state=1),1==aPinDisplay[t].selected&&(aPinDisplay[t].state=4,aPinDisplay[t].selected=!1),2==aPinDisplay[t].state&&(e=!1);1==oUserCareerData.careerStage&&2==oUserCareerData.careerRace&&(aPinDisplay[1].selected=!0,e=!1),aPinDisplay.length/pinsPerMap<Math.ceil(aPinDisplay.length/pinsPerMap)&&(aPinDisplay.push({posId:getEmptyPinPos(),state:0,selected:!1,careerStage:getNextPinCareerData().careerStage,careerRace:getNextPinCareerData().careerRace}),e=!1);for(t=0;t<aPinDisplay.length;t++)if(2==aPinDisplay[t].state){aPinDisplay[t].selected=!0,curPinSelectedId=aPinDisplay[t].posId;break}if(e){if(newPinPage=!0,pinPage>=9)return void(gameComplete=!0);pinPage++,aPinDisplay.push({posId:getEmptyPinPos(),state:1,selected:!1,careerStage:getNextPinCareerData().careerStage,careerRace:getNextPinCareerData().careerRace}),aPinDisplay.push({posId:getEmptyPinPos(),state:1,selected:!1,careerStage:getNextPinCareerData().careerStage,careerRace:getNextPinCareerData().careerRace}),aPinDisplay.push({posId:getEmptyPinPos(),state:1,selected:!1,careerStage:getNextPinCareerData().careerStage,careerRace:getNextPinCareerData().careerRace}),aPinDisplay.push({posId:getEmptyPinPos(),state:1,selected:!1,careerStage:getNextPinCareerData().careerStage,careerRace:getNextPinCareerData().careerRace}),aPinDisplay.push({posId:getEmptyPinPos(),state:0,selected:!1,careerStage:getNextPinCareerData().careerStage,careerRace:getNextPinCareerData().careerRace})}}saveDataHandler.setPinData()}function getNextPinCareerData(){var a={careerStage:aPinDisplay[aPinDisplay.length-1].careerStage,careerRace:aPinDisplay[aPinDisplay.length-1].careerRace};return++a.careerRace>getMaxRaces(a)&&(a.careerStage++,a.careerRace=1),a}function getDifficulty(a){return Math.max(Math.min(Math.floor((getRating(getPrevEnemy(a))-200)/150),3),0)}function getEmptyPinPos(){for(var a=Math.floor(Math.random()*aPinPos.length),e=!1;!e;){e=!0;for(var t=pinPage*pinsPerMap;t<aPinDisplay.length;t++)if(aPinDisplay[t].posId==a){e=!1,a=Math.floor(Math.random()*aPinPos.length);break}}return a}function initRace(){if(gameState="race",oGearChanges={perfect:0,good:0,regular:0,perfectStart:null},"career"==raceType||"prevCareer"==raceType){oUserCareerData.careerRace;for(var a=0;a<oUserCareerData.careerStage-1;a++)getRaceNumInStage(a+1)}1==audioType&&(musicTween.kill(),musicTween=TweenLite.to(music,.5,{volume:.75,ease:"Linear.easeNone"})),playSound("engineStart"),setRaceProgress(),userInput.addHitArea("accPedal",butEventHandler,{multiTouch:!0},"rect",{aRect:[558,126,684,290]},!0),userInput.addHitArea("pause",butEventHandler,null,"rect",{aRect:[610,9,646,45]},!0),scrollGround=new Elements.ScrollGround,userCar=new Elements.Car(!0,aUserGarageData[oUserCareerData.curCarId]),enemyCar=new Elements.Car(!1,getEnemy()),accPedalIsDown=!1,aOverEffects=new Array,aUnderEffects=new Array,aFireworks=new Array,dustSpray=new Elements.DustSpray(assetLib.getData("dustSpray")),hud=new Elements.Hud,1==oUserCareerData.careerStage&&1==oUserCareerData.careerRace&&firstRun?hud.pauseStartTimer=!0:hud.tweenLights(),previousTime=(new Date).getTime(),updateRaceEvent()}function initGarage(){gameState="garage";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_OTHER,"garage")}catch(a){}(background=new Elements.Background("garage")).renderState="none",aFireworks=new Array,aUserGarageData.length>1&&userInput.addHitArea("sellCar",butEventHandler,null,"rect",{aRect:[506,153,canvas.width,215]},!0);var a=new Array,e={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.backBut,noMove:!0};userInput.addHitArea("gotoMapFromGarage",butEventHandler,null,"image",e);var t={oImgData:assetLib.getData("uiButs"),aPos:[149,425],id:oImageIds.upgradeBut,noMove:!0},r={oImgData:assetLib.getData("uiButs"),aPos:[283,425],id:oImageIds.customiseBut,noMove:!0},s={oImgData:assetLib.getData("uiButs"),aPos:[417,425],id:oImageIds.shopBut,noMove:!0};userInput.addHitArea("gotoUpgradeFromGarage",butEventHandler,null,"image",t),userInput.addHitArea("gotoCustomiseFromGarage",butEventHandler,null,"image",r),userInput.addHitArea("gotoShopFromGarage",butEventHandler,null,"image",s);var i={oImgData:assetLib.getData("uiButs"),aPos:[21,291],id:oImageIds.leftBut,noMove:!0},o={oImgData:assetLib.getData("uiButs"),aPos:[488,291],id:oImageIds.rightBut,noMove:!0};userInput.addHitArea("garageScrollLeft",butEventHandler,null,"image",i),userInput.addHitArea("garageScrollRight",butEventHandler,null,"image",o),a.push(t,s,r,i,o,e),(panel=new Elements.Panel(gameState,a)).oRaceData=getRaceData(),scrollGround=new Elements.ScrollGround,(userCar=new Elements.Car(!0,aUserGarageData[oUserCareerData.curCarId])).staticLand(),panel.startTween1(),previousTime=(new Date).getTime(),updateGarageEvent()}function initShop(a){gameState="shop";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_SHOP)}catch(a){}(background=new Elements.Background("dealerBg")).renderState="none",aFireworks=new Array,userInput.addHitArea("shopBuy",butEventHandler,null,"rect",{aRect:[506,367,canvas.width,canvas.height]},!0);var e={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.backBut,noMove:!0},t={oImgData:assetLib.getData("uiButs"),aPos:[21,291],id:oImageIds.leftBut,noMove:!0},r={oImgData:assetLib.getData("uiButs"),aPos:[488,291],id:oImageIds.rightBut,noMove:!0};userInput.addHitArea("backToMapFromShop",butEventHandler,null,"image",e),userInput.addHitArea("shopScrollLeft",butEventHandler,null,"image",t),userInput.addHitArea("shopScrollRight",butEventHandler,null,"image",r);var s=new Array(e,t,r);(userCar=new Elements.Car(!0,aCarBaseData[curShopCarId])).staticLand(),(panel=new Elements.Panel(gameState,s)).oRaceData=getRaceData(),scrollGround=new Elements.ScrollGround,panel.startTween1(),previousTime=(new Date).getTime(),updateShopEvent()}function initUpgrade(a){gameState="upgrade";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_OTHER,"upgrade")}catch(a){}(background=new Elements.Background("garage")).renderState="none",aFireworks=new Array,userInput.addHitArea("upgradeBuy",butEventHandler,null,"rect",{aRect:[506,367,canvas.width,canvas.height]},!0),userInput.addHitArea("engineTab",butEventHandler,null,"rect",{aRect:[23,64,111,115]},!0),userInput.addHitArea("accTab",butEventHandler,null,"rect",{aRect:[117,64,206,115]},!0),userInput.addHitArea("wheelsTab",butEventHandler,null,"rect",{aRect:[213,64,301,115]},!0),userInput.addHitArea("weightTab",butEventHandler,null,"rect",{aRect:[309,64,396,115]},!0),userInput.addHitArea("nitroTab",butEventHandler,null,"rect",{aRect:[403,64,491,125]},!0);var e={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.backBut,noMove:!0};userInput.addHitArea("backToMapFromUpgrade",butEventHandler,null,"image",e);var t=new Array(e);changeUpgradeTab(upgradeTab),panel=new Elements.Panel(gameState,t),userCar=new Elements.Car(!0,aUserGarageData[oUserCareerData.curCarId]),panel.oRaceData=getRaceData(),panel.startTween1(),previousTime=(new Date).getTime(),updateUpgradeEvent()}function initCustomise(){gameState="customise";try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_OTHER,"customise")}catch(a){}aFireworks=new Array,(background=new Elements.Background("garage")).renderState="none",userInput.addHitArea("colourTab",butEventHandler,null,"rect",{aRect:[507,56,567,107]},!0),userInput.addHitArea("rimsTab",butEventHandler,null,"rect",{aRect:[573,56,632,107]},!0),userInput.addHitArea("shadowTab",butEventHandler,null,"rect",{aRect:[639,56,697,107]},!0),userInput.addHitArea("customiseBuy",butEventHandler,null,"rect",{aRect:[506,367,canvas.width,canvas.height]},!0);var a={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.backBut,noMove:!0},e={oImgData:assetLib.getData("uiButs"),aPos:[662,327],id:oImageIds.rightMiniBut,noMove:!0};userInput.addHitArea("backToGarageFromCustomise",butEventHandler,null,"image",a),userInput.addHitArea("customiseScrollRight",butEventHandler,null,"image",e);var t=new Array(a,e);oCustomiseSaveData={colour:aUserGarageData[oUserCareerData.curCarId].colour,rims:aUserGarageData[oUserCareerData.curCarId].rims,shadow:aUserGarageData[oUserCareerData.curCarId].shadow},changeCustomiseTab(customiseTab),(userCar=new Elements.Car(!0,aUserGarageData[oUserCareerData.curCarId])).staticLand(),(panel=new Elements.Panel(gameState,t)).oRaceData=getRaceData(),panel.startTween1(),previousTime=(new Date).getTime(),updateCustomiseEvent()}function initRaceComplete(){var a=getRaceData();try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_LEVELRESULT)}catch(a){}window.famobi.showAd(function(){if(userCar=new Elements.Car(!0,aUserGarageData[oUserCareerData.curCarId]),enemyCar=new Elements.Car(!1,getEnemy()),"career"==raceType||"prevCareer"==raceType){var e=oUserCareerData.careerRace;"career";for(var t=0;t<oUserCareerData.careerStage-1;t++)e+=getRaceNumInStage(t+1);"career"==raceType?e:0}1==audioType&&(musicTween.kill(),musicTween=TweenLite.to(music,1,{volume:.5,ease:"Linear.easeNone"}));var r=oRaceProgress.enemyFinishTime-oRaceProgress.userFinishTime;if(firstRun=!1,oRaceProgress.userNitroBoost=0,1==firstNitroStage&&(firstNitroStage=2),r>=0&&(oRaceProgress.timeBonus=r<25?Math.round(oRaceProgress.reward/10):r<50?Math.round(oRaceProgress.reward/7):r<100?Math.round(oRaceProgress.reward/5):r<200?Math.round(oRaceProgress.reward/3):Math.round(oRaceProgress.reward/2)),oRaceProgress.userFinishTime>oRaceProgress.enemyFinishTime){try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELFAIL,{levelName:oUserCareerData.careerStage.toString(),reason:"dead"})}catch(a){}!1,oRaceProgress.reward=Math.round(oRaceProgress.reward/4)}else{!0;var s={careerRace:oUserCareerData.careerRace,careerStage:oUserCareerData.careerStage};try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELSUCCESS,{levelName:oUserCareerData.careerStage.toString()})}catch(a){}"career"==raceType?(++oUserCareerData.careerRace>getMaxRaces()&&(oUserCareerData.careerStage++,oUserCareerData.careerRace=1),updateMapPins(s)):"prevCareer"==raceType&&updateMapPins(s),oUserCareerData.racesWon++}oUserCareerData.totalDistance+=1e3*oRaceProgress.raceLength,oRaceProgress.totalReward=Math.round(oRaceProgress.reward+oRaceProgress.timeBonus+oRaceProgress.jumpBonus+50*Math.floor(oUserCareerData.levelNum/100)),oUserCareerData.cash+=oRaceProgress.totalReward,oUserCareerData.totalWinnings+=oRaceProgress.totalReward;try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELSCORE,{levelName:oUserCareerData.careerStage.toString(),levelScore:oUserCareerData.cash})}catch(a){}var i=oUserCareerData.levelNum;oUserCareerData.levelNum=Math.round(oUserCareerData.levelNum+oRaceProgress.totalReward/12/Math.floor(oUserCareerData.levelNum/100)),Math.floor(oUserCareerData.levelNum/100)>Math.floor(i/100)&&(oRaceProgress.newLevel=!0),saveDataHandler.setCareerData(),saveDataHandler.setGarageData(),saveDataHandler.saveData();Math.floor(oUserCareerData.levelNum/100),oRaceProgress.totalReward,a.rating,a.distance,oGearChanges.regular,oGearChanges.good,oGearChanges.perfect,Math.round(oRaceProgress.userFinishTime),oGearChanges.perfectStart,oUserCareerData.curCarId;initRaceCompleteDisplay()})}function initRaceCompleteDisplay(){var a;gameState="raceComplete",userInput.removeHitArea("gearChange"),userInput.removeKey("gearChange"),userInput.removeHitArea("nitroBoost"),userInput.removeHitArea("pause"),(background=new Elements.Background("title")).renderState="none";var e=new Array;userInput.addHitArea("gotoMapFromComplete",butEventHandler,null,"rect",{aRect:[506,367,canvas.width,canvas.height]},!0),shouldShowUpgradeTip()?(a={oImgData:assetLib.getData("uiButs"),aPos:[283,425],id:oImageIds.upgradeBut,noMove:!1},userInput.addHitArea("gotoUpgradeFromComplete",butEventHandler,null,"image",a),e.push(a),a={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.restartBut,noMove:!0},userInput.addHitArea("restartRaceFromComplete",butEventHandler,null,"image",a),e.push(a)):(1!=oUserCareerData.careerRace&&2!=oUserCareerData.careerRace||1!=oUserCareerData.careerStage)&&(a={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.restartBut,noMove:!0},userInput.addHitArea("restartRaceFromComplete",butEventHandler,null,"image",a),e.push(a)),changeUpgradeTab(upgradeTab),(panel=new Elements.Panel(gameState,e)).oRaceData=getRaceData(),panel.startTween1(),previousTime=(new Date).getTime(),updateRaceCompleteEvent()}function butEventHandler(a,e){switch(firstTouchAfterLoading&&(firstTouchAfterLoading=!1),a){case"langSelect":curLang=e.lang,ctx.clearRect(0,0,canvas.width,canvas.height),userInput.removeHitArea("langSelect"),(preAssetLib=new Utils.AssetLoader(curLang,[{id:"preloadImage",file:"images/preloadImage.jpg"}],ctx,canvas.width,canvas.height,!1)).onReady(initLoadAssets);break;case"credits":playSound("click"),userInput.removeHitArea("gotoMapFromStart"),userInput.removeHitArea("moreGames"),userInput.removeHitArea("credits"),initCreditsScreen();break;case"backFromCredits":playSound("click"),userInput.removeHitArea("backFromCredits"),userInput.removeHitArea("clearData"),initStartScreen();break;case"clearData":playSound("click"),saveDataHandler.resetData(),oUserCareerData=saveDataHandler.getCareerData(),aUserGarageData=saveDataHandler.getGarageData(),aPinDisplay=saveDataHandler.getPinData(),pinPage=Math.floor(aPinDisplay.length/pinsPerMap-.1),oPrevCareerData={careerStage:aPinDisplay[0].careerStage,careerRace:aPinDisplay[0].careerRace,posId:aPinDisplay[0].posId},userInput.removeHitArea("clearData"),userInput.removeHitArea("backFromCredits"),initStartScreen();break;case"backFromStats":playSound("click"),userInput.removeHitArea("backFromStats"),userInput.removeHitArea("clearData"),initRaceSelect();break;case"moreGames":case"moreGamesPause":playSound("click");try{window.famobi.moreGamesLink()}catch(a){}break;case"sellCar":playSound("buy"),oUserCareerData.cash+=getSellCost();Math.floor(oUserCareerData.levelNum/100),oUserCareerData.curCarId,getSellCost();aUserGarageData.splice(oUserCareerData.curCarId,1),oUserCareerData.curCarId=aUserGarageData.length-1,saveDataHandler.setCareerData(),saveDataHandler.setGarageData(),saveDataHandler.saveData(),userInput.removeHitArea("gotoMapFromGarage"),userInput.removeHitArea("gotoCustomiseFromGarage"),userInput.removeHitArea("gotoUpgradeFromGarage"),userInput.removeHitArea("gotoShopFromGarage"),userInput.removeHitArea("sellCar"),userInput.removeHitArea("garageScrollLeft"),userInput.removeHitArea("garageScrollRight"),newCarBought=!1,initGarage();for(var t=0;t<3;t++)addFirework(100*Math.random()+480,50*Math.random()+215,.5*Math.random()+1);break;case"gotoMapFromStart":playSound("click"),userInput.removeHitArea("gotoMapFromStart"),userInput.removeHitArea("moreGames"),userInput.removeHitArea("credits"),initRaceSelect();break;case"doNothing":break;case"pinSelect":playSound("click"),userInput.removeHitArea("pinSelect"),userInput.removeHitArea("gotoRaceStart"),userInput.removeHitArea("gotoGarageFromRaceSelect"),userInput.removeHitArea("gotoUpgradeFromRaceSelect"),userInput.removeHitArea("gotoCustomiseFromRaceSelect"),userInput.removeHitArea("gotoShopFromRaceSelect"),userInput.removeHitArea("gotoStatsFromRaceSelect"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),curPinSelectedId=e.posId;for(t=0;t<aPinDisplay.length;t++)aPinDisplay[t].selected=!1;aPinDisplay[e.arrayId].selected=!0,1==e.state||2==e.state?(raceType="career",oPrevCareerData={careerStage:aPinDisplay[e.arrayId].careerStage,careerRace:aPinDisplay[e.arrayId].careerRace,posId:aPinDisplay[e.arrayId].posId}):4==e.state&&(raceType="prevCareer",oPrevCareerData={careerStage:aPinDisplay[e.arrayId].careerStage,careerRace:aPinDisplay[e.arrayId].careerRace,posId:aPinDisplay[e.arrayId].posId}),panel.oRaceData=getRaceData(),panel.aButs=setRaceSelectButs(),panel.panelType=gameState,initRacePreview();break;case"gotoMapFromRacePreview":playSound("click"),userInput.removeHitArea("gotoMapFromRacePreview"),userInput.removeHitArea("gotoRaceStart"),initRaceSelect();break;case"gotoRaceStart":playSound("click"),userInput.removeHitArea("gotoMapFromRacePreview"),userInput.removeHitArea("gotoRaceStart");try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELSTART,{levelName:oUserCareerData.careerStage.toString()})}catch(a){}initRace();break;case"gotoGarageFromRaceSelect":playSound("click"),userInput.removeHitArea("pinSelect"),userInput.removeHitArea("gotoRaceStart"),userInput.removeHitArea("gotoGarageFromRaceSelect"),userInput.removeHitArea("gotoUpgradeFromRaceSelect"),userInput.removeHitArea("gotoCustomiseFromRaceSelect"),userInput.removeHitArea("gotoShopFromRaceSelect"),userInput.removeHitArea("gotoStatsFromRaceSelect"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),initGarage();break;case"gotoStatsFromRaceSelect":playSound("click"),userInput.removeHitArea("pinSelect"),userInput.removeHitArea("gotoRaceStart"),userInput.removeHitArea("gotoGarageFromRaceSelect"),userInput.removeHitArea("gotoUpgradeFromRaceSelect"),userInput.removeHitArea("gotoCustomiseFromRaceSelect"),userInput.removeHitArea("gotoShopFromRaceSelect"),userInput.removeHitArea("gotoStatsFromRaceSelect"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),initStats();break;case"gotoUpgradeFromRaceSelect":playSound("click"),userInput.removeHitArea("pinSelect"),userInput.removeHitArea("gotoRaceStart"),userInput.removeHitArea("gotoGarageFromRaceSelect"),userInput.removeHitArea("gotoUpgradeFromRaceSelect"),userInput.removeHitArea("gotoCustomiseFromRaceSelect"),userInput.removeHitArea("gotoShopFromRaceSelect"),userInput.removeHitArea("gotoStatsFromRaceSelect"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),initUpgrade("map");break;case"gotoShopFromRaceSelect":playSound("click"),userInput.removeHitArea("pinSelect"),userInput.removeHitArea("gotoRaceStart"),userInput.removeHitArea("gotoGarageFromRaceSelect"),userInput.removeHitArea("gotoUpgradeFromRaceSelect"),userInput.removeHitArea("gotoCustomiseFromRaceSelect"),userInput.removeHitArea("gotoShopFromRaceSelect"),userInput.removeHitArea("gotoStatsFromRaceSelect"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),initShop("map");break;case"gotoCustomiseFromRaceSelect":playSound("click"),userInput.removeHitArea("pinSelect"),userInput.removeHitArea("gotoRaceStart"),userInput.removeHitArea("gotoGarageFromRaceSelect"),userInput.removeHitArea("gotoUpgradeFromRaceSelect"),userInput.removeHitArea("gotoCustomiseFromRaceSelect"),userInput.removeHitArea("gotoShopFromRaceSelect"),userInput.removeHitArea("gotoStatsFromRaceSelect"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),initCustomise();break;case"mapLeftBut":playSound("click"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),userInput.removeHitArea("pinSelect"),pinPage--,initRaceSelect(!1);break;case"mapRightBut":playSound("click"),userInput.removeHitArea("mapLeftBut"),userInput.removeHitArea("mapRightBut"),userInput.removeHitArea("pinSelect"),pinPage++,initRaceSelect(!1);break;case"gotoMapFromGarage":playSound("click"),userInput.removeHitArea("gotoMapFromGarage"),userInput.removeHitArea("gotoCustomiseFromGarage"),userInput.removeHitArea("gotoUpgradeFromGarage"),userInput.removeHitArea("gotoShopFromGarage"),userInput.removeHitArea("sellCar"),newCarBought=!1,userInput.removeHitArea("garageScrollLeft"),userInput.removeHitArea("garageScrollRight"),initRaceSelect();break;case"gotoCustomiseFromGarage":playSound("click"),userInput.removeHitArea("gotoMapFromGarage"),userInput.removeHitArea("gotoCustomiseFromGarage"),userInput.removeHitArea("gotoUpgradeFromGarage"),userInput.removeHitArea("gotoShopFromGarage"),userInput.removeHitArea("sellCar"),newCarBought=!1,userInput.removeHitArea("garageScrollLeft"),userInput.removeHitArea("garageScrollRight"),initCustomise();break;case"gotoUpgradeFromGarage":playSound("click"),userInput.removeHitArea("gotoMapFromGarage"),userInput.removeHitArea("gotoCustomiseFromGarage"),userInput.removeHitArea("gotoUpgradeFromGarage"),userInput.removeHitArea("gotoShopFromGarage"),userInput.removeHitArea("sellCar"),newCarBought=!1,userInput.removeHitArea("garageScrollLeft"),userInput.removeHitArea("garageScrollRight"),initUpgrade("garage");break;case"gotoShopFromGarage":playSound("click"),userInput.removeHitArea("gotoMapFromGarage"),userInput.removeHitArea("gotoCustomiseFromGarage"),userInput.removeHitArea("gotoUpgradeFromGarage"),userInput.removeHitArea("gotoShopFromGarage"),userInput.removeHitArea("sellCar"),newCarBought=!1,userInput.removeHitArea("garageScrollLeft"),userInput.removeHitArea("garageScrollRight"),initShop("garage");break;case"garageScrollLeft":playSound("click"),panel.garageScrollEvent("left"),newCarBought=!1;break;case"garageScrollRight":playSound("click"),panel.garageScrollEvent("right"),newCarBought=!1;break;case"shopScrollLeft":playSound("click"),panel.shopScrollEvent("left");break;case"shopScrollRight":playSound("click"),panel.shopScrollEvent("right");break;case"shopBuy":var r=!1;for(t=0;t<aUserGarageData.length;t++)aUserGarageData[t].body==aCarBaseData[curShopCarId].body&&(r=!0);if(!r&&aCarBaseData[curShopCarId].cost<=oUserCareerData.cash){playSound("buy"),aUserGarageData.push(cloneObject(aCarBaseData[curShopCarId])),console.log(aCarBaseData[curShopCarId]),oUserCareerData.cash-=aCarBaseData[curShopCarId].cost,oUserCareerData.curCarId=aUserGarageData.length-1,oUserCareerData.carsOwned++,saveDataHandler.setCareerData(),saveDataHandler.setGarageData(),saveDataHandler.saveData(),userInput.removeHitArea("shopBuy"),userInput.removeHitArea("backToGarageFromShop"),userInput.removeHitArea("backToMapFromShop"),userInput.removeHitArea("shopScrollLeft"),userInput.removeHitArea("shopScrollRight"),oUserCareerData.cash>aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].wheels.startCost&&(newCarBought=!0);Math.floor(oUserCareerData.levelNum/100),oUserCareerData.curCarId,aCarBaseData[curShopCarId].cost;initGarage();for(t=0;t<10;t++)addFirework(600*Math.random()+50,350*Math.random()+50,.5*Math.random()+1)}break;case"backToGarageFromShop":playSound("click"),userInput.removeHitArea("shopBuy"),userInput.removeHitArea("backToGarageFromShop"),userInput.removeHitArea("backToMapFromShop"),userInput.removeHitArea("shopScrollLeft"),userInput.removeHitArea("shopScrollRight"),userInput.removeHitArea("gotoIAPFromShop"),initGarage();break;case"backToMapFromShop":playSound("click"),userInput.removeHitArea("shopBuy"),userInput.removeHitArea("backToGarageFromShop"),userInput.removeHitArea("backToMapFromShop"),userInput.removeHitArea("shopScrollLeft"),userInput.removeHitArea("shopScrollRight"),userInput.removeHitArea("gotoIAPFromShop"),initRaceSelect();break;case"backToGarageFromUpgrade":playSound("click"),userInput.removeHitArea("backToGarageFromUpgrade"),userInput.removeHitArea("backToMapFromUpgrade"),userInput.removeHitArea("engineTab"),userInput.removeHitArea("accTab"),userInput.removeHitArea("wheelsTab"),userInput.removeHitArea("weightTab"),userInput.removeHitArea("nitroTab"),userInput.removeHitArea("upgradeBuy"),userInput.removeHitArea("autoUpgradeBuy"),userInput.removeHitArea("gotoIAPFromUpgrade"),initGarage();break;case"backToMapFromUpgrade":playSound("click"),userInput.removeHitArea("backToGarageFromUpgrade"),userInput.removeHitArea("backToMapFromUpgrade"),userInput.removeHitArea("engineTab"),userInput.removeHitArea("accTab"),userInput.removeHitArea("wheelsTab"),userInput.removeHitArea("weightTab"),userInput.removeHitArea("nitroTab"),userInput.removeHitArea("upgradeBuy"),userInput.removeHitArea("autoUpgradeBuy"),userInput.removeHitArea("gotoIAPFromUpgrade"),initRaceSelect();break;case"engineTab":playSound("click"),changeUpgradeTab("engine");break;case"accTab":playSound("click"),changeUpgradeTab("acc");break;case"wheelsTab":playSound("click"),changeUpgradeTab("wheels");break;case"weightTab":playSound("click"),changeUpgradeTab("weight");break;case"nitroTab":playSound("click"),changeUpgradeTab("nitro");break;case"upgradeBuy":r=!1;if(5==aUserGarageData[oUserCareerData.curCarId][upgradeTab+"Upgrade"]&&(r=!0),!r&&curUpgradeCost<=oUserCareerData.cash){playSound("buy");var s,i=getAutoUpgradeCost(),o=!1;switch(i<=oUserCareerData.cash&&0!=i&&(o=!0),upgradeTab){case"engine":aUserGarageData[oUserCareerData.curCarId].engineUpgrade++,s=aUserGarageData[oUserCareerData.curCarId].engineUpgrade;break;case"acc":aUserGarageData[oUserCareerData.curCarId].accUpgrade++,s=aUserGarageData[oUserCareerData.curCarId].accUpgrade;break;case"wheels":aUserGarageData[oUserCareerData.curCarId].wheelsUpgrade++,s=aUserGarageData[oUserCareerData.curCarId].wheelsUpgrade;break;case"weight":aUserGarageData[oUserCareerData.curCarId].weightUpgrade++,s=aUserGarageData[oUserCareerData.curCarId].weightUpgrade;break;case"nitro":aUserGarageData[oUserCareerData.curCarId].nitroUpgrade++,s=aUserGarageData[oUserCareerData.curCarId].nitroUpgrade,0==firstNitroStage&&(firstNitroStage=1)}for(Math.floor(oUserCareerData.levelNum/100),oUserCareerData.curCarId,t=0;t<3;t++)addFirework(200*Math.random()+475,100*Math.random()+340,.5*Math.random()+1);oUserCareerData.cash-=curUpgradeCost,saveDataHandler.updateStats(aUserGarageData),changeUpgradeTab(upgradeTab),saveDataHandler.setCareerData(),saveDataHandler.setGarageData(),saveDataHandler.saveData()}break;case"customiseSelect":if("colour"==customiseTab&&e.id>4)return;if(playSound("click"),curCustomiseButHighlight=e.id+curRimScroll,updateCustomiseCost(),"colour"==customiseTab){userCar.oCarTypeData.colour=e.id;for(var g=0;g<aUserGarageData[oUserCareerData.curCarId].aColoursOwned.length;g++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aColoursOwned[g]){oCustomiseSaveData.colour=userCar.oCarTypeData.colour;break}}else if("rims"==customiseTab){userCar.oCarTypeData.rims=e.id+curRimScroll;for(g=0;g<aUserGarageData[oUserCareerData.curCarId].aRimsOwned.length;g++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aRimsOwned[g]){oCustomiseSaveData.rims=userCar.oCarTypeData.rims;break}}else if("shadow"==customiseTab){userCar.oCarTypeData.shadow=e.id+curRimScroll;for(g=0;g<aUserGarageData[oUserCareerData.curCarId].aNeonOwned.length;g++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aNeonOwned[g]){oCustomiseSaveData.shadow=userCar.oCarTypeData.shadow;break}}break;case"backToGarageFromCustomise":playSound("click"),userInput.removeHitArea("backToGarageFromCustomise"),userInput.removeHitArea("colourTab"),userInput.removeHitArea("rimsTab"),userInput.removeHitArea("shadowTab"),userInput.removeHitArea("customiseBuy"),userInput.removeHitArea("customiseSelect"),userInput.removeHitArea("customiseScrollRight"),userInput.removeHitArea("customiseScrollLeft"),userInput.removeHitArea("gotoIAPFromCustomise"),aUserGarageData[oUserCareerData.curCarId].colour=oCustomiseSaveData.colour,aUserGarageData[oUserCareerData.curCarId].rims=oCustomiseSaveData.rims,aUserGarageData[oUserCareerData.curCarId].shadow=oCustomiseSaveData.shadow,initRaceSelect();break;case"colourTab":playSound("click"),changeCustomiseTab("colour");break;case"rimsTab":playSound("click"),changeCustomiseTab("rims");break;case"shadowTab":playSound("click"),changeCustomiseTab("shadow");break;case"customiseScrollLeft":"colour"!=customiseTab&&panel.customiseScrollEvent("left");break;case"customiseScrollRight":"colour"!=customiseTab&&panel.customiseScrollEvent("right");break;case"customiseBuy":r=!1;switch(customiseTab){case"colour":var h=!1;for(g=0;g<aUserGarageData[oUserCareerData.curCarId].aColoursOwned.length;g++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aColoursOwned[g]){h=!0;break}!h&&oCustomiseSaveData.colour!=curCustomiseButHighlight&&curCustomiseCost<=oUserCareerData.cash&&(oCustomiseSaveData.colour=aUserGarageData[oUserCareerData.curCarId].colour,r=!0,aUserGarageData[oUserCareerData.curCarId].aColoursOwned.push(oCustomiseSaveData.colour));break;case"rims":for(h=!1,g=0;g<aUserGarageData[oUserCareerData.curCarId].aRimsOwned.length;g++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aRimsOwned[g]){h=!0;break}!h&&oCustomiseSaveData.rims!=curCustomiseButHighlight&&curCustomiseCost<=oUserCareerData.cash&&(oCustomiseSaveData.rims=aUserGarageData[oUserCareerData.curCarId].rims,r=!0,aUserGarageData[oUserCareerData.curCarId].aRimsOwned.push(oCustomiseSaveData.rims));break;case"shadow":for(h=!1,g=0;g<aUserGarageData[oUserCareerData.curCarId].aNeonOwned.length;g++)if(curCustomiseButHighlight==aUserGarageData[oUserCareerData.curCarId].aNeonOwned[g]){h=!0;break}!h&&oCustomiseSaveData.shadow!=curCustomiseButHighlight&&curCustomiseCost<=oUserCareerData.cash&&(oCustomiseSaveData.shadow=aUserGarageData[oUserCareerData.curCarId].shadow,r=!0,aUserGarageData[oUserCareerData.curCarId].aNeonOwned.push(oCustomiseSaveData.shadow))}if(r){playSound("buy"),oUserCareerData.cash-=curCustomiseCost;for(Math.floor(oUserCareerData.levelNum/100),oUserCareerData.curCarId,t=0;t<3;t++)addFirework(200*Math.random()+475,100*Math.random()+340,.5*Math.random()+1);saveDataHandler.setCareerData(),saveDataHandler.setGarageData(),saveDataHandler.saveData()}break;case"gotoMapFromComplete":if(playSound("click"),userInput.removeHitArea("gotoMapFromComplete"),userInput.removeHitArea("restartRaceFromComplete"),userInput.removeHitArea("gotoUpgradeFromComplete"),1==oUserCareerData.careerRace&&1==oUserCareerData.careerStage){try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELRESTART,{levelName:oUserCareerData.careerStage.toString()})}catch(a){}initRace()}else initRaceSelect();break;case"gotoUpgradeFromComplete":playSound("click"),userInput.removeHitArea("gotoMapFromComplete"),userInput.removeHitArea("restartRaceFromComplete"),userInput.removeHitArea("gotoUpgradeFromComplete"),initUpgrade("garage");break;case"restartRaceFromComplete":playSound("click"),userInput.removeHitArea("gotoMapFromComplete"),userInput.removeHitArea("restartRaceFromComplete"),userInput.removeHitArea("gotoUpgradeFromComplete");try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELRESTART,{levelName:oUserCareerData.careerStage.toString()})}catch(a){}initRace();break;case"mute":manualPause||(playSound("click"),toggleMute());break;case"accPedal":e.isDown?(playSound("rev"+Math.floor(2*Math.random())),accPedalIsDown=!0,hud.accPedalTween&&hud.accPedalTween.kill(),hud.accPedalHeight=.9,hud.accPedalY=134,userCar.revRock(3),addExhaust(userCar),addSmoke(userCar),firstRun&&hud.pauseStartTimer&&hud.tweenLights()):(accPedalIsDown=!1,hud.accPedalTween=TweenLite.to(hud,.5,{accPedalHeight:1,accPedalY:120,ease:"Bounce.easeOut"}));break;case"gearChange":oRaceProgress.userRevs>userCar.oCarTypeData.revMeterRot-.15&&oRaceProgress.userGear<userCar.oCarTypeData.gearNum&&userChangeGear();break;case"nitroBoost":if(0==hud.nitroPosY&&!oRaceProgress.userBoostTriggered){oRaceProgress.userBoostTriggered=!0,TweenLite.to(hud,.5,{nitroPosY:200,ease:"Back.easeIn"}),userInput.removeHitArea("nitroBoost"),playSound("startSpin"+Math.floor(3*Math.random())),playSound("nitro"),addSmoke(userCar);for(t=0;t<3;t++)addFirework(200*Math.random(),200*Math.random()+275,.5*Math.random()+1);userNitroTween=TweenLite.to(oRaceProgress,8*userCar.oCarTypeData.nitro,{userNitroBoost:1,ease:"Cubic.easeOut",onComplete:userNitroEndEvent})}break;case"pause":case"resumeFromPause":playSound("click"),toggleManualPause();break;case"quitFromPause":playSound("click"),toggleManualPause(),userInput.removeHitArea("pause"),userInput.removeHitArea("accPedal"),userInput.removeHitArea("gearChange"),userInput.removeKey("gearChange"),userInput.removeHitArea("nitroBoost"),userInput.removeHitArea("quitFromPause"),userInput.removeHitArea("resumeFromPause"),userInput.removeHitArea("moreGamesPause"),userInput.removeHitArea("restartFromPause"),userInput.removeHitArea("clearData"),userNitroTween&&userNitroTween.kill(),userRevTween&&userRevTween.kill(),enemyRevTween&&enemyRevTween.kill(),userCar.jumpTween0&&(userCar.jumpTween0.kill(),userCar.jumpTween1.kill(),userCar.jumpTween2.kill()),enemyCar.jumpTween0&&(enemyCar.jumpTween0.kill(),enemyCar.jumpTween1.kill(),enemyCar.jumpTween2.kill()),initRaceSelect();break;case"restartFromPause":playSound("click"),gameState="null",toggleManualPause();Math.floor(oUserCareerData.levelNum/100),oUserCareerData.curCarId;userInput.removeHitArea("pause"),userInput.removeHitArea("accPedal"),userInput.removeHitArea("gearChange"),userInput.removeKey("gearChange"),userInput.removeHitArea("nitroBoost"),userInput.removeHitArea("quitFromPause"),userInput.removeHitArea("resumeFromPause"),userInput.removeHitArea("moreGamesPause"),userInput.removeHitArea("restartFromPause"),userNitroTween&&userNitroTween.kill(),userRevTween&&userRevTween.kill(),enemyRevTween&&enemyRevTween.kill(),userCar.jumpTween0&&(userCar.jumpTween0.kill(),userCar.jumpTween1.kill(),userCar.jumpTween2.kill()),enemyCar.jumpTween0&&(enemyCar.jumpTween0.kill(),enemyCar.jumpTween1.kill(),enemyCar.jumpTween2.kill());try{window.famobi_analytics.trackEvent(famobi_analytics.EVENT_LEVELRESTART,{levelName:oUserCareerData.careerStage.toString()})}catch(a){}initRace()}}function getUpgradeTotal(){return aUserGarageData[oUserCareerData.curCarId].engineUpgrade+aUserGarageData[oUserCareerData.curCarId].accUpgrade+aUserGarageData[oUserCareerData.curCarId].wheelsUpgrade+aUserGarageData[oUserCareerData.curCarId].weightUpgrade+aUserGarageData[oUserCareerData.curCarId].nitroUpgrade}function addExhaust(a){if(a==userCar){if(aOverEffects.length>5)return}else if(aUnderEffects.length>5)return;var e=new Elements.Exhaust(assetLib.getData("exhaust"));e.x=a.x+(a.exhaustX-56*(2*a.oCarTypeData.engine+.5))*a.scale,e.y=a.y+(a.exhaustY+a.jumpHeight)*a.scale,e.scaleX=e.scaleY=a.scale*(2*a.oCarTypeData.engine)+.5,a==userCar?aOverEffects.push(e):aUnderEffects.push(e)}function addFirework(a,e,t){if(void 0===t&&(t=1),!(aFireworks.length>10)){var r=new Elements.Firework;r.x=a,r.y=e,r.scaleX=r.scaleY=t,aFireworks.push(r)}}function addSmoke(a,e){if(void 0===e&&(e=1),a==userCar){if(aOverEffects.length>5)return}else if(aUnderEffects.length>5)return;var t=new Elements.Smoke(assetLib.getData("smoke"));t.x=a.x+(a.exhaustX-25)*a.scale,t.y=a.y+(a.exhaustY+a.jumpHeight)*a.scale,t.scaleX=t.scaleY=3*a.scale*e,a==userCar?aOverEffects.push(t):aUnderEffects.push(t)}function shouldShowUpgradeTip(){return aUserGarageData[oUserCareerData.curCarId].engineUpgrade<4&&aUserGarageData[oUserCareerData.curCarId].accUpgrade<4&&aUserGarageData[oUserCareerData.curCarId].wheelsUpgrade<4&&aUserGarageData[oUserCareerData.curCarId].weightUpgrade<4&&aUserGarageData[oUserCareerData.curCarId].nitroUpgrade<4&&oUserCareerData.cash>getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].engine,3)&&oRaceProgress.userFinishTime>oRaceProgress.enemyFinishTime&&!(1==oUserCareerData.careerRace&&1==oUserCareerData.careerStage)}function getUpgradeIncreaseCost(a,e){for(var t=a.startCost,r=0;r<e;r++)t*=a.increaseAmount;return Math.round(t)}function userNitroEndEvent(){userNitroTween&&userNitroTween.kill(),userNitroTween=TweenLite.to(oRaceProgress,4*userCar.oCarTypeData.nitro,{userNitroBoost:0,ease:"Cubic.easeIn"})}function enemyNitroEndEvent(){enemyNitroTween&&enemyNitroTween.kill(),enemyNitroTween=TweenLite.to(oRaceProgress,4*enemyCar.oCarTypeData.nitro,{enemyNitroBoost:0,ease:"Cubic.easeIn"})}function setRaceProgress(){oRaceProgress={enemyProgress:0,enemySpeed:0,enemyRevs:0,enemyGear:0,enemyWheelSpin:0,enemyGearAccuracy:0,enemyAccState:0,enemyReverseRevs:0,enemyFinishTime:0,enemyNitroBoost:0,enemyNitroBoostTime:.6*Math.random()+.05,userProgress:0,userSpeed:0,userRevs:0,userGear:0,userWheelSpin:0,userGearAccuracy:0,userAccState:0,userReverseRevs:0,userFinishTime:0,userNitroBoost:0,time:0,raceLength:getRaceData().distance/1e3,reward:getRaceData().reward,background:getRaceData().background,startMultiplier:1,gearShiftMultiplierTotal:0,gearsShifted:0,gearShiftmultiplier:1,timeBonus:0,totalReward:0,newLevel:!1,userBoostTriggered:!1,enemyBoostTriggered:!1,userJumpTiggered:!1,enemyJumpTriggered:!1,userJumpNum:0,enemyJumpNum:0,aJumpPos:getJumpArray(),jumpBonus:0}}function getJumpArray(){for(var a=new Array,e=.3*Math.random()+.1;e<1;)a.push(e),e+=.3*Math.random()+.25;return a}function cloneObject(a){var e=a.constructor();for(var t in a)a.hasOwnProperty(t)&&(e[t]=a[t]);return e}function changeUpgradeTab(a){curUpgradeCost=getUpgradeCost(upgradeTab=a)}function getAutoUpgradeCost(){var a=0;return aUserGarageData[oUserCareerData.curCarId].engineUpgrade<5&&(a+=getUpgradeCost("engine")),aUserGarageData[oUserCareerData.curCarId].accUpgrade<5&&(a+=getUpgradeCost("acc")),aUserGarageData[oUserCareerData.curCarId].wheelsUpgrade<5&&(a+=getUpgradeCost("wheels")),aUserGarageData[oUserCareerData.curCarId].weightUpgrade<5&&(a+=getUpgradeCost("weight")),aUserGarageData[oUserCareerData.curCarId].nitroUpgrade<5&&(a+=getUpgradeCost("nitro")),a}function getUpgradeCost(a){var e;switch(a){case"engine":e=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].engine,aUserGarageData[oUserCareerData.curCarId].engineUpgrade);break;case"acc":e=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].acc,aUserGarageData[oUserCareerData.curCarId].accUpgrade);break;case"wheels":e=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].wheels,aUserGarageData[oUserCareerData.curCarId].wheelsUpgrade);break;case"weight":e=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].weight,aUserGarageData[oUserCareerData.curCarId].weightUpgrade);break;case"nitro":e=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].nitro,aUserGarageData[oUserCareerData.curCarId].nitroUpgrade)}return e}function changeCustomiseTab(a){switch(userInput.removeHitArea("customiseSelect"),customiseTab=a,curRimScroll=0,aUserGarageData[oUserCareerData.curCarId].colour=oCustomiseSaveData.colour,aUserGarageData[oUserCareerData.curCarId].rims=oCustomiseSaveData.rims,aUserGarageData[oUserCareerData.curCarId].shadow=oCustomiseSaveData.shadow,customiseTab){case"colour":curCustomiseButHighlight=aUserGarageData[oUserCareerData.curCarId].colour;for(var e=0,t=0;t<2;t++)for(var r=0;r<2;r++)userInput.addHitArea("customiseSelect",butEventHandler,{id:e},"rect",{aRect:[521+89*r,123+88*t,599+89*r,205+88*t]},!1),e++;break;case"rims":curCustomiseButHighlight=aUserGarageData[oUserCareerData.curCarId].rims;for(e=0,t=0;t<3;t++)for(r=0;r<3;r++)userInput.addHitArea("customiseSelect",butEventHandler,{id:e},"rect",{aRect:[521+58*r,124+58*t,572+58*r,175+58*t]},!1),e++;break;case"shadow":curCustomiseButHighlight=aUserGarageData[oUserCareerData.curCarId].shadow;for(e=0,t=0;t<3;t++)for(r=0;r<3;r++)userInput.addHitArea("customiseSelect",butEventHandler,{id:e},"rect",{aRect:[521+58*r,124+58*t,572+58*r,175+58*t]},!1),e++}updateCustomiseCost()}function updateCustomiseCost(){switch(customiseTab){case"colour":curCustomiseCost=getUpgradeIncreaseCost(aCustomiseData[aUserGarageData[oUserCareerData.curCarId].body].colour,curCustomiseButHighlight);break;case"rims":curCustomiseCost=getUpgradeIncreaseCost(aCustomiseData[aUserGarageData[oUserCareerData.curCarId].body].rims,curCustomiseButHighlight);break;case"shadow":curCustomiseCost=getUpgradeIncreaseCost(aCustomiseData[aUserGarageData[oUserCareerData.curCarId].body].shadow,curCustomiseButHighlight)}}function raceStarted(){if(!hud.clockIsOn){if(hud.gearChangeShake=3,TweenLite.to(hud,2,{gearChangeShake:0,ease:"Elastic.easeOut"}),hud.clockIsOn=!0,playSound("startSpin"+Math.floor(3*Math.random())),playSound("driveOff"),playSound("engineHum"),Math.abs(oRaceProgress.userRevs-userCar.oCarTypeData.revMeterRot)<=.075){oRaceProgress.userGearAccuracy=.1,hud.addMessage("greatStart"),playSound("perfectGear");for(var a=0;a<5;a++)addFirework(600*Math.random()+50,100*Math.random()+60,1*Math.random()+1);oGearChanges.perfectStart=!0}else oRaceProgress.userGearAccuracy=.1+Math.min(1.5,10*Math.abs(oRaceProgress.userRevs-userCar.oCarTypeData.revMeterRot)-.5),oGearChanges.perfectStart=!1;oRaceProgress.startMultiplier=Math.max(1,Math.round(10*(1.5-(oRaceProgress.userGearAccuracy-.1)))/10),TweenLite.to(hud,.3,{startTimerX:-700,ease:"Cubic.easeIn",delay:1}),oRaceProgress.enemyRevs=enemyCar.oCarTypeData.revMeterRot+.2*Math.random()-.1,Math.abs(oRaceProgress.enemyRevs-enemyCar.oCarTypeData.revMeterRot)<=.05?oRaceProgress.enemyGearAccuracy=.1:oRaceProgress.enemyGearAccuracy=.1+Math.min(1.5,10*Math.abs(oRaceProgress.enemyRevs-enemyCar.oCarTypeData.revMeterRot)-.5),userInput.removeHitArea("accPedal"),TweenLite.to(hud,.5,{gearPosY:0,ease:"Back.easeOut",delay:.2}),TweenLite.to(hud,.5,{nitroPosY:0,ease:"Back.easeOut"}),userInput.addHitArea("gearChange",butEventHandler,null,"rect",{aRect:[524,324,680,canvas.height]},!0),userInput.addKey("gearChange",butEventHandler,null,32),userCar.oCarTypeData.nitro>0&&userInput.addHitArea("nitroBoost",butEventHandler,null,"rect",{aRect:[58,341,148,433]},!0),oRaceProgress.userGear=1,oRaceProgress.enemyGear=1,TweenLite.to(userCar.oCarTypeData,.2,{revMeterRot:userCar.oCarTypeData.aGearRatios[oRaceProgress.userGear],ease:"Quad.easeInOut"}),enemyCar.oCarTypeData.revMeterRot=enemyCar.oCarTypeData.aGearRatios[oRaceProgress.enemyGear],oRaceProgress.userWheelSpin=1,oRaceProgress.enemyWheelSpin=1,userRevTween=TweenLite.to(oRaceProgress,(1-userCar.oCarTypeData.gearBox)/2+.2,{userRevs:.2,ease:"Quad.easeOut",onComplete:userRevEvent}),enemyRevTween=TweenLite.to(oRaceProgress,(1-enemyCar.oCarTypeData.gearBox)/2+.2,{enemyRevs:.2,ease:"Quad.easeOut",onComplete:enemyRevEvent}),oRaceProgress.userAccState=0,oRaceProgress.enemyAccState=0}}function userRevEvent(){if(userRevTween&&userRevTween.kill(),oRaceProgress.userWheelSpin>0){var a=(1-userCar.oCarTypeData.grip+.1)*Math.max(0,1-(oRaceProgress.userGear-1)/(userCar.oCarTypeData.gearNum/1.5));a*=oRaceProgress.userGearAccuracy,userRevTween=TweenLite.to(oRaceProgress,a,{userWheelSpin:0,ease:"Quad.easeIn",onComplete:userRevEvent})}else userRevTween=oRaceProgress.userGear<userCar.oCarTypeData.gearNum?TweenLite.to(oRaceProgress,oRaceProgress.userGearAccuracy/1+.5+4*(oRaceProgress.userGear/userCar.oCarTypeData.gearNum+oRaceProgress.userGear/userCar.oCarTypeData.gearNum)+(2-userCar.oCarTypeData.revRate),{userRevs:.95,ease:"Quad.easeInOut"}):TweenLite.to(oRaceProgress,oRaceProgress.userGearAccuracy/1+2.5+4*(oRaceProgress.userGear/userCar.oCarTypeData.gearNum+oRaceProgress.userGear/userCar.oCarTypeData.gearNum)+(2-userCar.oCarTypeData.revRate),{userRevs:.95,ease:"Quad.easeInOut"}),oRaceProgress.userAccState=1}function enemyRevEvent(){if(enemyRevTween&&enemyRevTween.kill(),oRaceProgress.enemyWheelSpin>0){var a=(1-enemyCar.oCarTypeData.grip+.1)*Math.max(0,1-(oRaceProgress.enemyGear-1)/(enemyCar.oCarTypeData.gearNum/1.5));a*=oRaceProgress.enemyGearAccuracy,enemyRevTween=TweenLite.to(oRaceProgress,a,{enemyWheelSpin:0,ease:"Quad.easeIn",onComplete:enemyRevEvent})}else enemyRevTween=oRaceProgress.enemyGear<enemyCar.oCarTypeData.gearNum?TweenLite.to(oRaceProgress,oRaceProgress.enemyGearAccuracy/1+.5+4*(oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum+oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum)+(2-enemyCar.oCarTypeData.revRate),{enemyRevs:.95,ease:"Quad.easeInOut"}):TweenLite.to(oRaceProgress,oRaceProgress.enemyGearAccuracy/1+2.5+4*(oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum+oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum)+(2-enemyCar.oCarTypeData.revRate),{enemyRevs:.95,ease:"Quad.easeInOut"}),oRaceProgress.enemyAccState=1}function userChangeGear(){if(hud.gearChangeShake=3,TweenLite.to(hud,2,{gearChangeShake:0,ease:"Elastic.easeOut"}),hud.gearPosY=20,TweenLite.to(hud,.5,{gearPosY:0,ease:"Back.easeOut"}),playSound("changeGear"+Math.floor(4*Math.random())),playSound("engineHum"),oRaceProgress.userGear++,addExhaust(userCar),addSmoke(userCar),oRaceProgress.userGearAccuracy=Math.min(2,30*Math.abs(oRaceProgress.userRevs-userCar.oCarTypeData.revMeterRot)),oRaceProgress.gearsShifted++,oRaceProgress.gearShiftMultiplierTotal+=2-oRaceProgress.userGearAccuracy,TweenLite.to(userCar.oCarTypeData,.3,{revMeterRot:userCar.oCarTypeData.aGearRatios[oRaceProgress.userGear],ease:"Quad.easeInOut"}),oRaceProgress.userGear==userCar.oCarTypeData.gearNum&&(userInput.removeHitArea("gearChange"),userInput.removeKey("gearChange"),TweenLite.to(hud,.5,{gearPosY:200,ease:"Back.easeIn"})),oRaceProgress.userGearAccuracy<.4){hud.addMessage("perfect"),oGearChanges.perfect++,playSound("perfectGear");for(var a=0;a<5;a++)addFirework(600*Math.random()+50,100*Math.random()+60,1*Math.random()+1)}else if(oRaceProgress.userGearAccuracy<.6){oGearChanges.good++,playSound("goodGear");for(a=0;a<2;a++)addFirework(600*Math.random()+50,100*Math.random()+60,1*Math.random()+1)}else oGearChanges.regular++;oRaceProgress.userAccState=0,oRaceProgress.userWheelSpin=1-oRaceProgress.userGear/userCar.oCarTypeData.gearNum/2,userRevTween=TweenLite.to(oRaceProgress,(1-userCar.oCarTypeData.gearBox)/2+.2,{userRevs:.2+oRaceProgress.userGear/userCar.oCarTypeData.gearNum/4-oRaceProgress.userGearAccuracy/10,ease:"Quad.easeOut",onComplete:userRevEvent})}function enemyChangeGear(){oRaceProgress.enemyGear++,playSound("engineHum"),addExhaust(enemyCar),addSmoke(enemyCar),oRaceProgress.enemyGearAccuracy=Math.min(2,30*Math.abs(oRaceProgress.enemyRevs-enemyCar.oCarTypeData.revMeterRot)),TweenLite.to(enemyCar.oCarTypeData,.3,{revMeterRot:enemyCar.oCarTypeData.aGearRatios[oRaceProgress.enemyGear],ease:"Quad.easeInOut"}),oRaceProgress.enemyAccState=0,oRaceProgress.enemyWheelSpin=1-oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum/2,enemyRevTween=TweenLite.to(oRaceProgress,(1-enemyCar.oCarTypeData.gearBox)/2+.2,{enemyRevs:.2+oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum/4-oRaceProgress.enemyGearAccuracy/10,ease:"Quad.easeOut",onComplete:enemyRevEvent})}function userRaceComplete(){oRaceProgress.userAccState=2,userInput.removeHitArea("pause"),0==oRaceProgress.gearsShifted?oRaceProgress.gearShiftMultiplier=1:oRaceProgress.gearShiftMultiplier=Math.max(1,Math.round(oRaceProgress.gearShiftMultiplierTotal/oRaceProgress.gearsShifted*9)/10),userRevTween&&userRevTween.kill(),oRaceProgress.userFinishTime=oRaceProgress.time,2==oRaceProgress.enemyAccState?(hud.addMessage("endLose"),playSound("endLose")):(hud.addMessage("endWin"),playSound("endWin")),userRevTween=TweenLite.to(oRaceProgress,3,{userRevs:.2,ease:"Quad.easeInOut"})}function enemyRaceComplete(){oRaceProgress.enemyAccState=2,enemyRevTween&&enemyRevTween.kill(),oRaceProgress.enemyFinishTime=oRaceProgress.time,2==oRaceProgress.userAccState&&(userInput.removeHitArea("pause"),hud.removeMessageAtEnd(hud)),enemyRevTween=TweenLite.to(oRaceProgress,3,{enemyRevs:.2,ease:"Quad.easeInOut"})}function getMaxRaces(a){return void 0===a&&(a=oUserCareerData),a.careerStage<=3?3:a.careerStage<=7?5:7}function getRaceNumInStage(a){return a<=3?3:a<=7?5:7}function getRaceData(){var a,e;return"career"!=raceType&&"prevCareer"!=raceType||(Math.seedrandom(oPrevCareerData.careerStage+oPrevCareerData.careerRace+oPrevCareerData.posId),a=30+Math.round(oPrevCareerData.careerStage/1.3*100)+Math.round(getRating(getEnemy())/2),e=250+250*Math.round(Math.random()*Math.min(5,oPrevCareerData.careerStage/3))),{reward:Math.round(a*defaultConfig.raceRewardMultiplier),rating:getRating(getEnemy()),distance:e,background:Math.floor(3*Math.random()),difficulty:Math.floor((getRating(getEnemy())-150)/100)}}function getPrevEnemy(a){var e;Math.seedrandom(a.careerStage+a.careerRace+a.posId),e=0;var t,r=a.careerStage-1+a.careerRace/10;return 1==a.careerStage&&1==a.careerRace||(e=Math.min(.85,Math.floor(Math.random()*a.careerStage*7.5)/100)),1==a.careerStage&&1==a.careerRace&&"career"==raceType?{body:0,colour:1,rims:2,gearNum:aCarBaseData[0].gearNum,shadow:3,engine:Math.min(.99,.25+.063*r)*defaultConfig.enemyDifficultyMultiplier,gearBox:Math.min(.99,.15+.073*r)*defaultConfig.enemyDifficultyMultiplier,grip:Math.min(.99,.2+.068*r)*defaultConfig.enemyDifficultyMultiplier,nitro:e*defaultConfig.enemyDifficultyMultiplier,weight:Math.max(.15,.59-.033*r)*(2-defaultConfig.enemyDifficultyMultiplier)}:{body:t=Math.max(0,Math.min(11,Math.round(.5*(a.careerStage-1))+Math.round(3*Math.random()-1))),colour:Math.floor(4*Math.random()),rims:Math.floor(18*Math.random()),gearNum:aCarBaseData[t].gearNum,shadow:Math.floor(18*Math.random()),engine:Math.min(.99,.25+.063*r+.1*Math.random()-.05)*defaultConfig.enemyDifficultyMultiplier,gearBox:Math.min(.99,.15+.073*r+.1*Math.random()-.05)*defaultConfig.enemyDifficultyMultiplier,grip:Math.min(.99,.2+.068*r+.1*Math.random()-.05)*defaultConfig.enemyDifficultyMultiplier,nitro:e*defaultConfig.enemyDifficultyMultiplier,weight:Math.max(.15,.59-.033*r+.1*Math.random()-.05)*(2-defaultConfig.enemyDifficultyMultiplier)}}function getEnemy(){var a;if("prevCareer"==raceType||"career"==raceType){Math.seedrandom(oPrevCareerData.careerStage+oPrevCareerData.careerRace+oPrevCareerData.posId),a=0;var e,t=oPrevCareerData.careerStage-1+oPrevCareerData.careerRace/10;return 1==oPrevCareerData.careerStage&&1==oPrevCareerData.careerRace||(a=Math.min(.85,Math.floor(Math.random()*oPrevCareerData.careerStage*7.5)/100)),1==oUserCareerData.careerStage&&1==oUserCareerData.careerRace&&"career"==raceType?{body:1,colour:1,rims:2,gearNum:aCarBaseData[0].gearNum,shadow:1,engine:Math.min(.99,.25+.063*t)*defaultConfig.enemyDifficultyMultiplier,gearBox:Math.min(.99,.15+.073*t)*defaultConfig.enemyDifficultyMultiplier,grip:Math.min(.99,.2+.068*t)*defaultConfig.enemyDifficultyMultiplier,nitro:a*defaultConfig.enemyDifficultyMultiplier,weight:Math.max(.15,.59-.033*t)*(2-defaultConfig.enemyDifficultyMultiplier)}:{body:e=Math.max(0,Math.min(11,Math.round(.5*(oPrevCareerData.careerStage-1))+Math.round(3*Math.random()-1))),colour:Math.floor(4*Math.random()),rims:Math.floor(18*Math.random()),gearNum:aCarBaseData[e].gearNum,shadow:Math.floor(18*Math.random()),engine:Math.min(.99,.25+.063*t+.1*Math.random()-.05)*defaultConfig.enemyDifficultyMultiplier,gearBox:Math.min(.99,.15+.073*t+.1*Math.random()-.05)*defaultConfig.enemyDifficultyMultiplier,grip:Math.min(.99,.2+.068*t+.1*Math.random()-.05)*defaultConfig.enemyDifficultyMultiplier,nitro:a*defaultConfig.enemyDifficultyMultiplier,weight:Math.max(.15,.59-.033*t+.1*Math.random()-.05)*(2-defaultConfig.enemyDifficultyMultiplier)}}return Math.seedrandom(oUserCareerData.cash),"quickRaceEasy"==raceType?{body:e=Math.max(0,Math.min(11,aUserGarageData[oUserCareerData.curCarId].body+Math.round(-2*Math.random()))),colour:Math.floor(5*Math.random()),rims:Math.floor(25*Math.random()),gearNum:aCarBaseData[e].gearNum,shadow:Math.floor(5*Math.random()),engine:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].engine+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,gearBox:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].gearBox+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,grip:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].grip+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,nitro:Math.max(0,aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].nitro+Math.round(.2*Math.random()-.1))*defaultConfig.enemyDifficultyMultiplier,weight:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].weight+.08*Math.random()-.04)*(2-defaultConfig.enemyDifficultyMultiplier)}:"quickRaceMedium"==raceType?{body:e=Math.max(0,Math.min(11,aUserGarageData[oUserCareerData.curCarId].body+Math.round(2*Math.random()-1))),colour:Math.floor(5*Math.random()),rims:Math.floor(25*Math.random()),gearNum:aCarBaseData[e].gearNum,shadow:Math.floor(5*Math.random()),engine:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].engine+.5*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].engine.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].engine)+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,gearBox:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].gearBox+.5*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].acc.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].gearBox)+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,grip:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].grip+.5*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].wheels.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].grip)+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,nitro:Math.max(0,.5*aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].nitro.maxUpgradeLevel+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,weight:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].weight+.5*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].weight.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].weight)+.08*Math.random()-.04)*(2-defaultConfig.enemyDifficultyMultiplier)}:"quickRaceHard"==raceType?{body:e=Math.max(0,Math.min(11,aUserGarageData[oUserCareerData.curCarId].body+Math.round(2*Math.random()))),colour:Math.floor(5*Math.random()),rims:Math.floor(25*Math.random()),gearNum:aCarBaseData[e].gearNum,shadow:Math.floor(5*Math.random()),engine:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].engine+1*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].engine.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].engine)+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,gearBox:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].gearBox+1*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].acc.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].gearBox)+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,grip:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].grip+1*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].wheels.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].grip)+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,nitro:Math.max(0,1*aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].nitro.maxUpgradeLevel+.08*Math.random()-.04)*defaultConfig.enemyDifficultyMultiplier,weight:(aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].weight+1*(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].weight.maxUpgradeLevel-aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].weight)+.08*Math.random()-.04)*(2-defaultConfig.enemyDifficultyMultiplier)}:void 0}function getRating(a){return Math.round(200*a.engine+150*a.gearBox+150*a.grip+150*(1-a.weight)+100*a.nitro)}function getSellCost(){var a=.75*aCarBaseData[aUserGarageData[oUserCareerData.curCarId].body].cost;return a+=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].engine,aUserGarageData[oUserCareerData.curCarId].engineUpgrade)-aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].engine.startCost,a+=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].acc,aUserGarageData[oUserCareerData.curCarId].accUpgrade)-aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].acc.startCost,a+=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].wheels,aUserGarageData[oUserCareerData.curCarId].wheelsUpgrade)-aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].wheels.startCost,a+=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].weight,aUserGarageData[oUserCareerData.curCarId].weightUpgrade)-aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].weight.startCost,a+=getUpgradeIncreaseCost(aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].nitro,aUserGarageData[oUserCareerData.curCarId].nitroUpgrade)-aUpgradeData[aUserGarageData[oUserCareerData.curCarId].body].nitro.startCost,Math.round(a*defaultConfig.carSaleMultiplier)}function getCutomBonus(){var a=0;return a+=(aUserGarageData[oUserCareerData.curCarId].aColoursOwned.length-1)*(10*(aUserGarageData[oUserCareerData.curCarId].body/2+1)),a+=(aUserGarageData[oUserCareerData.curCarId].aRimsOwned.length-1)*(10*(aUserGarageData[oUserCareerData.curCarId].body/2+1)),a+=(aUserGarageData[oUserCareerData.curCarId].aNeonOwned.length-1)*(10*(aUserGarageData[oUserCareerData.curCarId].body/2+1)),Math.round(a)}function updateRaceEvent(){if(!manualPause&&!rotatePause&&"race"==gameState){delta=getDelta(),oRaceProgress.userProgress>=oRaceProgress.aJumpPos[oRaceProgress.userJumpNum]&&!oRaceProgress.userJumpTiggered&&(oRaceProgress.userJumpTiggered=!0,scrollGround.triggerUserJump(),oRaceProgress.userJumpNum++),oRaceProgress.enemyProgress>=oRaceProgress.aJumpPos[oRaceProgress.enemyJumpNum]&&!oRaceProgress.enemyJumpTiggered&&(oRaceProgress.enemyJumpTiggered=!0,scrollGround.triggerEnemyJump(),oRaceProgress.enemyJumpNum++),scrollGround.update(),scrollGround.render(),oRaceProgress.enemyProgress>oRaceProgress.enemyNitroBoostTime&&!oRaceProgress.enemyBoostTriggered&&(oRaceProgress.enemyBoostTriggered=!0,enemyNitroTween=TweenLite.to(oRaceProgress,8*enemyCar.oCarTypeData.nitro,{enemyNitroBoost:1,ease:"Cubic.easeOut",onComplete:enemyNitroEndEvent}),addSmoke(enemyCar)),0==oRaceProgress.time?accPedalIsDown?(oRaceProgress.userWheelSpin=(oRaceProgress.userRevs-userCar.oCarTypeData.revMeterRot)/(.95-userCar.oCarTypeData.revMeterRot)*1,oRaceProgress.userRevs=Math.min(1,oRaceProgress.userRevs+(1.5-oRaceProgress.userRevs)*(1+1.5*userCar.oCarTypeData.engine)*delta)):oRaceProgress.userRevs=Math.max(0,oRaceProgress.userRevs-(1.5-oRaceProgress.userRevs)*(1+.5*userCar.oCarTypeData.engine)*delta):(oRaceProgress.userReverseRevs=oRaceProgress.enemyReverseRevs=0,oRaceProgress.userRevs>userCar.oCarTypeData.revMeterRot-.1&&1==oRaceProgress.userAccState&&(oRaceProgress.userReverseRevs=(oRaceProgress.userRevs-(userCar.oCarTypeData.revMeterRot-.1))/.12*oRaceProgress.userRevs,oRaceProgress.userRevs>userCar.oCarTypeData.revMeterRot&&(oRaceProgress.userWheelSpin=(oRaceProgress.userRevs-userCar.oCarTypeData.revMeterRot)/(.95-userCar.oCarTypeData.revMeterRot)*1)),oRaceProgress.enemyRevs>enemyCar.oCarTypeData.revMeterRot-.1&&1==oRaceProgress.enemyAccState&&(oRaceProgress.enemyReverseRevs=(oRaceProgress.enemyRevs-(enemyCar.oCarTypeData.revMeterRot-.1))/.12*oRaceProgress.enemyRevs,oRaceProgress.enemyRevs>enemyCar.oCarTypeData.revMeterRot&&(oRaceProgress.enemyWheelSpin=(oRaceProgress.enemyRevs-enemyCar.oCarTypeData.revMeterRot)/(.95-enemyCar.oCarTypeData.revMeterRot)*1)),2!=oRaceProgress.userAccState&&1!=userCar.jumpState?oRaceProgress.userSpeed+=Math.max(0,oRaceProgress.userRevs-oRaceProgress.userReverseRevs+oRaceProgress.userNitroBoost*(2*oRaceProgress.userProgress))*delta*(userCar.oCarTypeData.speedMultiplier*(1.2-oRaceProgress.userGear/userCar.oCarTypeData.gearNum)):(oRaceProgress.userWheelSpin=0,oRaceProgress.userSpeed=Math.max(0,oRaceProgress.userSpeed-Math.max(0,oRaceProgress.userRevs-oRaceProgress.userReverseRevs)*delta*(userCar.oCarTypeData.speedMultiplier*(1.2-oRaceProgress.userGear/userCar.oCarTypeData.gearNum))),(oRaceProgress.userProgress>=1&&oRaceProgress.enemyProgress<1||oRaceProgress.enemyFinishTime>oRaceProgress.userFinishTime)&&Math.random()<.1&&(playSound("firework"),addFirework(600*Math.random()+50,350*Math.random()+50,1*Math.random()+2))),2!=oRaceProgress.enemyAccState&&1!=enemyCar.jumpState?oRaceProgress.enemySpeed+=Math.max(0,oRaceProgress.enemyRevs-oRaceProgress.enemyReverseRevs+oRaceProgress.enemyNitroBoost*(2*oRaceProgress.enemyProgress))*delta*(enemyCar.oCarTypeData.speedMultiplier*(1.2-oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum)):(oRaceProgress.enemyWheelSpin=0,oRaceProgress.enemySpeed=Math.max(0,oRaceProgress.enemySpeed-Math.max(0,oRaceProgress.enemyRevs-oRaceProgress.enemyReverseRevs)*delta*(enemyCar.oCarTypeData.speedMultiplier*(1.2-oRaceProgress.enemyGear/enemyCar.oCarTypeData.gearNum)))),1==oRaceProgress.enemyAccState&&oRaceProgress.enemyRevs>=enemyCar.oCarTypeData.revMeterRot+enemyCar.aEnemyGearOffset[oRaceProgress.enemyGear]&&oRaceProgress.enemyGear<enemyCar.oCarTypeData.gearNum&&enemyChangeGear(),scrollGround.scrollX+=oRaceProgress.userSpeed*delta*20),userCar.update(),enemyCar.update(),enemyCar.render();for(var a=0;a<aUnderEffects.length;a++)aUnderEffects[a].update(),aUnderEffects[a].render(ctx),aUnderEffects[a].removeMe&&(aUnderEffects.splice(a,1),a-=1);userCar.render(),dustSpray.update(),dustSpray.render();for(a=0;a<aOverEffects.length;a++)aOverEffects[a].update(),aOverEffects[a].render(ctx),aOverEffects[a].removeMe&&(aOverEffects.splice(a,1),a-=1);1==oRaceProgress.userProgress&&2!=oRaceProgress.userAccState&&userRaceComplete(),1==oRaceProgress.enemyProgress&&2!=oRaceProgress.enemyAccState&&enemyRaceComplete(),hud.update(),hud.render();for(a=0;a<aFireworks.length;a++)aFireworks[a].update(),aFireworks[a].render(ctx),aFireworks[a].removeMe&&(aFireworks.splice(a,1),a-=1);renderMuteBut(),requestAnimFrame(updateRaceEvent)}}function updateCreditsScreenEvent(){rotatePause||"credits"!=gameState||(delta=getDelta(),background.render(ctx),panel.update(delta),panel.render(ctx),renderMuteBut(),ctx.fillStyle="#000000",ctx.textAlign="center",ctx.font="12px Helvetica",ctx.fillText("v1.0.6",canvas.width/2,canvas.height-5),requestAnimFrame(updateCreditsScreenEvent))}function updateStatsScreenEvent(){if(!rotatePause&&"stats"==gameState){delta=getDelta(),background.render(ctx),panel.update(delta),panel.render(ctx),(smokeInc+=delta)>.25&&(addFirework(600*Math.random()+50,350*Math.random()+50,1*Math.random()+1),smokeInc=-1*Math.random());for(var a=0;a<aFireworks.length;a++)aFireworks[a].update(),aFireworks[a].render(ctx),aFireworks[a].removeMe&&(aFireworks.splice(a,1),a-=1);renderMuteBut(),requestAnimFrame(updateStatsScreenEvent)}}function updateSplashScreenEvent(){if(!rotatePause&&"splash"==gameState){if(delta=getDelta(),(splashTimer+=delta)>2.5)return 1==audioType&&!muted&&hasFocus&&(music.pause(),music.play()),void initStartScreen();splash.render(ctx,delta),requestAnimFrame(updateSplashScreenEvent)}}function updateRaceSelectEvent(){rotatePause||"raceSelect"!=gameState||(delta=getDelta(),background.render(ctx),panel.update(delta),panel.render(ctx),renderMuteBut(),requestAnimFrame(updateRaceSelectEvent))}function updateRacePreviewEvent(){if(!rotatePause&&"racePreview"==gameState){delta=getDelta(),scrollGround.update(),scrollGround.render(),swayX+=.75*delta,scrollGround.scrollX=50*Math.sin(swayX),userCar.x=canvas.width/2-2*scrollGround.scrollX-100,enemyCar.x=canvas.width/2-1.5*scrollGround.scrollX-75,enemyCar.render(),userCar.render(),(smokeInc+=delta)>.25&&(addSmoke(userCar,.5),smokeInc=0);for(var a=0;a<aOverEffects.length;a++)aOverEffects[a].update(),aOverEffects[a].render(ctx),aOverEffects[a].removeMe&&(aOverEffects.splice(a,1),a-=1);panel.update(delta),panel.render(ctx),renderMuteBut(),requestAnimFrame(updateRacePreviewEvent)}}function updateGarageEvent(){if(!rotatePause&&"garage"==gameState){delta=getDelta(),background.render(ctx),userCar.scale=1,userCar.y=375,userCar.x=250,userCar.render(),panel.update(delta),panel.render(ctx);for(var a=0;a<aFireworks.length;a++)aFireworks[a].update(),aFireworks[a].render(ctx),aFireworks[a].removeMe&&(aFireworks.splice(a,1),a-=1);renderMuteBut(),requestAnimFrame(updateGarageEvent)}}function updateShopEvent(){if(!rotatePause&&"shop"==gameState){delta=getDelta(),background.render(ctx),userCar.scale=1,userCar.y=375,userCar.x=250,userCar.render(),panel.update(delta),panel.render(ctx);for(var a=0;a<aFireworks.length;a++)aFireworks[a].update(),aFireworks[a].render(ctx),aFireworks[a].removeMe&&(aFireworks.splice(a,1),a-=1);renderMuteBut(),requestAnimFrame(updateShopEvent)}}function updateUpgradeEvent(){if(!rotatePause&&"upgrade"==gameState){delta=getDelta(),background.render(ctx),userCar.scale=1,userCar.y=375,userCar.x=250,userCar.render(!1),panel.update(delta),panel.render(ctx);for(var a=0;a<aFireworks.length;a++)aFireworks[a].update(),aFireworks[a].render(ctx),aFireworks[a].removeMe&&(aFireworks.splice(a,1),a-=1);renderMuteBut(),requestAnimFrame(updateUpgradeEvent)}}function updateCustomiseEvent(){if(!rotatePause&&"customise"==gameState){delta=getDelta(),background.render(ctx),userCar.scale=1,userCar.y=375,userCar.x=250,userCar.render(),panel.update(delta),panel.render(ctx);for(var a=0;a<aFireworks.length;a++)aFireworks[a].update(),aFireworks[a].render(ctx),aFireworks[a].removeMe&&(aFireworks.splice(a,1),a-=1);renderMuteBut(),requestAnimFrame(updateCustomiseEvent)}}function updateRaceCompleteEvent(){rotatePause||"raceComplete"!=gameState||(delta=getDelta(),background.render(ctx),panel.update(delta),panel.render(ctx),userCar.scale=.23,userCar.x=166,userCar.y=173+panel.posY,enemyCar.scale=.23,enemyCar.x=454,enemyCar.y=173+panel.posY,userCar.render(),enemyCar.render(),renderMuteBut(),requestAnimFrame(updateRaceCompleteEvent))}function updateStartScreenEvent(){rotatePause||"start"!=gameState||(delta=getDelta(),background.render(ctx),panel.update(delta),panel.render(ctx),renderMuteBut(),requestAnimFrame(updateStartScreenEvent))}function getDelta(){var a=(new Date).getTime(),e=(a-previousTime)/1e3;return previousTime=a,e>.5&&(e=0),e}function checkSpriteCollision(a,e){var t=a.x,r=a.y,s=e.x,i=e.y;return(t-s)*(t-s)+(r-i)*(r-i)<a.radius*e.radius}function getScaleImageToMax(a,e){return a.isSpriteSheet?e[0]/a.oData.spriteWidth<e[1]/a.oData.spriteHeight?Math.min(e[0]/a.oData.spriteWidth,1):Math.min(e[1]/a.oData.spriteHeight,1):e[0]/a.img.width<e[1]/a.img.height?Math.min(e[0]/a.img.width,1):Math.min(e[1]/a.img.height,1)}function getCentreFromTopLeft(a,e,t){var r=new Array;return r.push(a[0]+e.oData.spriteWidth/2*t),r.push(a[1]+e.oData.spriteHeight/2*t),r}function loadPreAssets(){if(aLangs.length>1){for(var a=new Array,e=0;e<aLangs.length;e++)a.push({id:"lang"+aLangs[e],file:"images/lang"+aLangs[e]+".png"});(preAssetLib=new Utils.AssetLoader(curLang,a,ctx,canvas.width,canvas.height,!1)).onReady(initLangSelect)}else curLang=aLangs[0],(preAssetLib=new Utils.AssetLoader(curLang,[{id:"preloadImage",file:"images/preloadImage.jpg"}],ctx,canvas.width,canvas.height,!1)).onReady(initLoadAssets)}function initLangSelect(){for(var a,e,t,r,s=0,i=0;i<aLangs.length&&(i+1)*(1*(a=preAssetLib.getData("lang"+aLangs[i])).img.width)+10*(i+2)<canvas.width;i++)s++;r=Math.ceil(aLangs.length/s);for(i=0;i<aLangs.length;i++){a=preAssetLib.getData("lang"+aLangs[i]),e=canvas.width/2-s/2*(1*a.img.width)-(s-1)/2*10,e+=i%s*(1*a.img.width+10),t=canvas.height/2-r/2*(1*a.img.height)-(r-1)/2*10,t+=Math.floor(i/s)%r*(1*a.img.height+10),ctx.drawImage(a.img,0,0,a.img.width,a.img.height,e,t,1*a.img.width,1*a.img.height);var o={oImgData:a,aPos:[e+1*a.img.width/2,t+1*a.img.height/2],scale:1,id:"none",noMove:!0};userInput.addHitArea("langSelect",butEventHandler,{lang:aLangs[i]},"image",o)}}function initLoadAssets(){var a=preAssetLib.getData("preloadImage");ctx.drawImage(a.img,0,0),loadAssets()}function loadAssets(){var a;try{a=window.famobi.getMoreGamesButtonImage()}catch(e){a="images/BrandingPlaceholderButton.png"}assetLib=new Utils.AssetLoader(curLang,[{id:"garage",file:"images/garageBg.jpg"},{id:"title",file:"images/title.jpg"},{id:"mapBg",file:"images/mapBg.jpg"},{id:"road0",file:"images/road0.jpg"},{id:"road1",file:"images/road1.jpg"},{id:"topFlare",file:"images/topFlare.png"},{id:"rotateDeviceMessage",file:"images/rotateDeviceMessage.jpg"},{id:"splash",file:"images/splashScreen.jpg"},{id:"hud",file:"images/hud.png"},{id:"uiButs",file:"images/uiButs.png",oAtlasData:{id0:{x:212,y:657,width:48,height:48},id1:{x:216,y:303,width:148,height:70},id10:{x:213,y:452,width:210,height:101},id11:{x:496,y:0,width:108,height:70},id12:{x:366,y:375,width:108,height:70},id13:{x:428,y:144,width:108,height:70},id14:{x:476,y:303,width:108,height:70},id15:{x:425,y:447,width:108,height:70},id16:{x:618,y:144,width:78,height:70},id17:{x:606,y:0,width:78,height:70},id18:{x:638,y:72,width:78,height:70},id19:{x:428,y:72,width:108,height:70},id2:{x:216,y:231,width:148,height:70},id20:{x:366,y:303,width:108,height:70},id21:{x:424,y:627,width:108,height:70},id22:{x:424,y:555,width:108,height:70},id23:{x:386,y:0,width:108,height:70},id24:{x:586,y:292,width:78,height:70},id25:{x:622,y:216,width:78,height:70},id26:{x:538,y:144,width:78,height:70},id27:{x:0,y:638,width:210,height:81},id28:{x:516,y:216,width:104,height:74},id29:{x:538,y:72,width:98,height:70},id3:{x:0,y:128,width:214,height:106},id30:{x:216,y:128,width:210,height:101},id31:{x:534,y:595,width:104,height:74},id32:{x:0,y:344,width:214,height:106},id33:{x:476,y:375,width:56,height:65},id34:{x:535,y:451,width:56,height:65},id35:{x:0,y:452,width:211,height:101},id36:{x:534,y:519,width:104,height:74},id37:{x:0,y:0,width:234,height:126},id38:{x:0,y:236,width:214,height:106},id39:{x:0,y:555,width:210,height:81},id4:{x:366,y:231,width:148,height:70},id40:{x:212,y:555,width:210,height:100},id5:{x:236,y:0,width:148,height:70},id6:{x:216,y:375,width:148,height:70},id7:{x:640,y:451,width:60,height:80},id8:{x:640,y:533,width:59,height:81},id9:{x:535,y:375,width:104,height:74}}},{id:"uiElements",file:"images/uiElements.png",oAtlasData:{id0:{x:0,y:592,width:128,height:16},id1:{x:547,y:384,width:35,height:27},id10:{x:272,y:558,width:56,height:57},id11:{x:0,y:0,width:204,height:23},id12:{x:130,y:557,width:64,height:70},id13:{x:323,y:290,width:110,height:132},id14:{x:398,y:0,width:110,height:132},id15:{x:323,y:424,width:110,height:132},id16:{x:435,y:290,width:110,height:132},id17:{x:523,y:146,width:63,height:72},id18:{x:534,y:424,width:63,height:72},id19:{x:534,y:498,width:63,height:72},id2:{x:0,y:25,width:197,height:131},id20:{x:523,y:72,width:63,height:72},id21:{x:447,y:134,width:74,height:110},id22:{x:0,y:610,width:100,height:10},id23:{x:510,y:0,width:70,height:70},id24:{x:199,y:554,width:71,height:71},id25:{x:435,y:424,width:97,height:99},id26:{x:435,y:525,width:97,height:99},id27:{x:330,y:558,width:42,height:29},id28:{x:490,y:246,width:39,height:29},id29:{x:374,y:558,width:41,height:29},id3:{x:199,y:25,width:197,height:131},id30:{x:374,y:589,width:41,height:29},id31:{x:330,y:589,width:42,height:29},id32:{x:447,y:246,width:41,height:29},id33:{x:534,y:572,width:38,height:41},id34:{x:199,y:158,width:122,height:130},id35:{x:199,y:290,width:122,height:130},id36:{x:199,y:422,width:122,height:130},id37:{x:323,y:158,width:122,height:130},id38:{x:574,y:572,width:35,height:33},id4:{x:0,y:291,width:197,height:131},id5:{x:0,y:424,width:197,height:131},id6:{x:0,y:158,width:197,height:131},id7:{x:0,y:557,width:128,height:33},id8:{x:547,y:302,width:61,height:80},id9:{x:547,y:220,width:61,height:80}}},{id:"colours",file:"images/colours.png",oAtlasData:{id0:{x:207,y:142,width:67,height:69},id1:{x:414,y:284,width:67,height:69},id10:{x:345,y:142,width:67,height:69},id11:{x:345,y:71,width:67,height:69},id12:{x:345,y:0,width:67,height:69},id13:{x:276,y:426,width:67,height:69},id14:{x:276,y:355,width:67,height:69},id15:{x:276,y:284,width:67,height:69},id16:{x:276,y:213,width:67,height:69},id17:{x:276,y:142,width:67,height:69},id18:{x:276,y:71,width:67,height:69},id19:{x:276,y:0,width:67,height:69},id2:{x:414,y:213,width:67,height:69},id20:{x:207,y:426,width:67,height:69},id21:{x:207,y:355,width:67,height:69},id22:{x:207,y:284,width:67,height:69},id23:{x:207,y:213,width:67,height:69},id24:{x:414,y:355,width:67,height:69},id25:{x:207,y:71,width:67,height:69},id26:{x:207,y:0,width:67,height:69},id27:{x:138,y:426,width:67,height:69},id28:{x:138,y:355,width:67,height:69},id29:{x:138,y:284,width:67,height:69},id3:{x:414,y:142,width:67,height:69},id30:{x:138,y:213,width:67,height:69},id31:{x:138,y:142,width:67,height:69},id32:{x:138,y:71,width:67,height:69},id33:{x:138,y:0,width:67,height:69},id34:{x:69,y:426,width:67,height:69},id35:{x:69,y:355,width:67,height:69},id36:{x:69,y:284,width:67,height:69},id37:{x:69,y:213,width:67,height:69},id38:{x:69,y:142,width:67,height:69},id39:{x:69,y:71,width:67,height:69},id4:{x:414,y:71,width:67,height:69},id40:{x:69,y:0,width:67,height:69},id41:{x:0,y:426,width:67,height:69},id42:{x:0,y:355,width:67,height:69},id43:{x:0,y:284,width:67,height:69},id44:{x:0,y:213,width:67,height:69},id45:{x:0,y:142,width:67,height:69},id46:{x:0,y:71,width:67,height:69},id47:{x:0,y:0,width:67,height:69},id5:{x:414,y:0,width:67,height:69},id6:{x:345,y:426,width:67,height:69},id7:{x:345,y:355,width:67,height:69},id8:{x:345,y:284,width:67,height:69},id9:{x:345,y:213,width:67,height:69}}},{id:"hudElements",file:"images/hudElements.png",oAtlasData:{id0:{x:0,y:869,width:450,height:22},id1:{x:592,y:853,width:123,height:164},id10:{x:579,y:509,width:112,height:81},id11:{x:514,y:640,width:370,height:211},id12:{x:0,y:640,width:512,height:227},id13:{x:0,y:509,width:577,height:129},id14:{x:0,y:509,width:577,height:129},id15:{x:672,y:0,width:200,height:229},id16:{x:608,y:271,width:200,height:230},id17:{x:810,y:231,width:200,height:230},id18:{x:452,y:869,width:138,height:171},id19:{x:0,y:271,width:606,height:236},id2:{x:717,y:853,width:106,height:165},id20:{x:0,y:893,width:176,height:94},id21:{x:178,y:893,width:175,height:94},id22:{x:0,y:0,width:670,height:269},id3:{x:807,y:503,width:103,height:102},id4:{x:0,y:989,width:128,height:12},id5:{x:693,y:503,width:112,height:96},id6:{x:886,y:607,width:84,height:209},id7:{x:886,y:818,width:84,height:209},id8:{x:960,y:0,width:84,height:209},id9:{x:874,y:0,width:84,height:209}}},{id:"carLogos",file:"images/carLogos.png",oAtlasData:{id0:{x:0,y:230,width:174,height:45},id1:{x:180,y:66,width:146,height:74},id10:{x:327,y:142,width:140,height:73},id11:{x:0,y:66,width:178,height:37},id2:{x:180,y:142,width:145,height:76},id3:{x:0,y:0,width:180,height:64},id4:{x:0,y:165,width:176,height:63},id5:{x:0,y:277,width:173,height:64},id6:{x:176,y:230,width:169,height:65},id7:{x:0,y:343,width:171,height:72},id8:{x:0,y:105,width:178,height:58},id9:{x:173,y:343,width:170,height:62}}},{id:"panels",file:window.famobi.__("images/panels_700x450.png")},{id:"numbers1",file:"images/numbers1_28x45.png"},{id:"numbers2",file:"images/numbers2_29x55.png"},{id:"roadBg0",file:"images/roadBg0.jpg"},{id:"roadBg1",file:"images/roadBg1.jpg"},{id:"roadBg2",file:"images/roadBg2.jpg"},{id:"muteBut",file:"images/mute_49x49.png"},{id:"exhaust",file:"images/exhaust_169x155.png",oAnims:{exploding:[0,1,2,3,4,5,6,7,8,9,10]}},{id:"smoke",file:"images/smoke_81x83.png",oAnims:{exploding:[0,1,2,3,4,5,6,7,8,9,10,11,12]}},{id:"dustSpray",file:"images/dustSpray_299x94.png",oAnims:{spraying:[0,1,2,3,4,5,6,7,8,9,10,11]}},{id:"firework0",file:"images/firework0_175x175.png",oAnims:{explode:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]}},{id:"firework1",file:"images/firework1_175x175.png",oAnims:{explode:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29]}},{id:"letters",file:"images/letters_12x17.png"},{id:"truckElements",file:"images/truckElements.png",oAtlasData:{id0:{x:0,y:142,width:325,height:128},id1:{x:0,y:0,width:421,height:26},id10:{x:573,y:143,width:141,height:141},id11:{x:572,y:600,width:141,height:141},id12:{x:143,y:558,width:141,height:141},id13:{x:144,y:272,width:141,height:141},id14:{x:286,y:558,width:141,height:141},id15:{x:0,y:558,width:141,height:141},id16:{x:143,y:415,width:141,height:141},id17:{x:0,y:415,width:141,height:141},id18:{x:0,y:272,width:142,height:141},id19:{x:572,y:457,width:141,height:141},id2:{x:0,y:28,width:366,height:112},id20:{x:286,y:415,width:141,height:141},id3:{x:572,y:314,width:141,height:141},id4:{x:511,y:0,width:141,height:141},id5:{x:430,y:171,width:141,height:141},id6:{x:429,y:558,width:141,height:141},id7:{x:429,y:415,width:141,height:141},id8:{x:368,y:28,width:141,height:141},id9:{x:287,y:272,width:141,height:141}}},{id:"truck0",file:"images/truck0.png",oAtlasData:{id0:{x:0,y:124,width:366,height:122},id1:{x:0,y:248,width:366,height:122},id2:{x:0,y:372,width:366,height:122},id3:{x:0,y:0,width:366,height:122}}},{id:"truck1",file:"images/truck1.png",oAtlasData:{id0:{x:0,y:143,width:360,height:141},id1:{x:0,y:286,width:360,height:141},id2:{x:0,y:429,width:360,height:141},id3:{x:0,y:0,width:360,height:141}}},{id:"truck2",file:"images/truck2.png",oAtlasData:{id0:{x:0,y:137,width:380,height:135},id1:{x:0,y:274,width:380,height:135},id2:{x:0,y:411,width:380,height:135},id3:{x:0,y:0,width:380,height:135}}},{id:"truck3",file:"images/truck3.png",oAtlasData:{id0:{x:0,y:150,width:386,height:148},id1:{x:0,y:300,width:386,height:148},id2:{x:0,y:450,width:386,height:148},id3:{x:0,y:0,width:386,height:148}}},{id:"truck4",file:"images/truck4.png",oAtlasData:{id0:{x:0,y:115,width:394,height:113},id1:{x:0,y:230,width:394,height:113},id2:{x:0,y:345,width:394,height:113},id3:{x:0,y:0,width:394,height:113}}},{id:"truck5",file:"images/truck5.png",oAtlasData:{id0:{x:0,y:137,width:376,height:135},id1:{x:0,y:274,width:376,height:135},id2:{x:0,y:411,width:376,height:135},id3:{x:0,y:0,width:376,height:135}}},{id:"truck6",file:"images/truck6.png",oAtlasData:{id0:{x:0,y:131,width:376,height:129},id1:{x:0,y:262,width:376,height:129},id2:{x:0,y:393,width:376,height:129},id3:{x:0,y:0,width:376,height:129}}},{id:"truck7",file:"images/truck7.png",oAtlasData:{id0:{x:0,y:103,width:400,height:101},id1:{x:0,y:206,width:400,height:101},id2:{x:0,y:309,width:400,height:101},id3:{x:0,y:0,width:400,height:101}}},{id:"truck8",file:"images/truck8.png",oAtlasData:{id0:{x:0,y:117,width:412,height:115},id1:{x:0,y:234,width:412,height:115},id2:{x:0,y:351,width:412,height:115},id3:{x:0,y:0,width:412,height:115}}},{id:"truck9",file:"images/truck9.png",oAtlasData:{id0:{x:0,y:160,width:352,height:158},id1:{x:0,y:320,width:352,height:158},id2:{x:0,y:480,width:352,height:158},id3:{x:0,y:0,width:352,height:158}}},{id:"truck10",file:"images/truck10.png",oAtlasData:{id0:{x:0,y:139,width:376,height:137},id1:{x:0,y:278,width:376,height:137},id2:{x:0,y:417,width:376,height:137},id3:{x:0,y:0,width:376,height:137}}},{id:"truck11",file:"images/truck11.png",oAtlasData:{id0:{x:0,y:138,width:404,height:136},id1:{x:0,y:276,width:404,height:136},id2:{x:0,y:414,width:404,height:136},id3:{x:0,y:0,width:404,height:136}}},{id:"titleElements",file:"images/titleElements.png",oAtlasData:{id0:{x:357,y:470,width:162,height:25},id1:{x:0,y:388,width:399,height:80},id2:{x:0,y:470,width:355,height:116},id3:{x:0,y:0,width:438,height:386}}},{id:"flags",file:"images/flags.png",oAtlasData:{id0:{x:0,y:240,width:1,height:1},id1:{x:208,y:0,width:50,height:58},id10:{x:52,y:180,width:50,height:58},id11:{x:52,y:120,width:50,height:58},id12:{x:52,y:60,width:50,height:58},id13:{x:52,y:0,width:50,height:58},id14:{x:0,y:180,width:50,height:58},id15:{x:0,y:120,width:50,height:58},id16:{x:0,y:60,width:50,height:58},id17:{x:0,y:0,width:50,height:58},id2:{x:156,y:180,width:50,height:58},id3:{x:156,y:120,width:50,height:58},id4:{x:156,y:60,width:50,height:58},id5:{x:156,y:0,width:50,height:58},id6:{x:104,y:180,width:50,height:58},id7:{x:104,y:120,width:50,height:58},id8:{x:104,y:60,width:50,height:58},id9:{x:104,y:0,width:50,height:58}}},{id:"dealerBg",file:"images/dealerBg.jpg"},{id:"moreGamesBut",file:a}],ctx,canvas.width,canvas.height),oImageIds.racingText="id0",oImageIds.monsterText="id1",oImageIds.trucksText="id2",oImageIds.titleTruck="id3",oImageIds.colour0="id0",oImageIds.colour1="id1",oImageIds.colour2="id2",oImageIds.colour3="id3",oImageIds.flag0="id0",oImageIds.flag1="id1",oImageIds.flag2="id2",oImageIds.flag3="id3",oImageIds.flag4="id4",oImageIds.flag5="id5",oImageIds.flag6="id6",oImageIds.flag7="id7",oImageIds.flag8="id8",oImageIds.flag9="id9",oImageIds.flag10="id10",oImageIds.flag11="id11",oImageIds.flag12="id12",oImageIds.flag13="id13",oImageIds.flag14="id14",oImageIds.flag15="id15",oImageIds.flag16="id16",oImageIds.flag17="id17",oImageIds.frame0="id0",oImageIds.shadow="id1",oImageIds.jump="id2",oImageIds.rim0="id3",oImageIds.rim1="id4",oImageIds.rim2="id5",oImageIds.rim3="id6",oImageIds.rim4="id7",oImageIds.rim5="id8",oImageIds.rim6="id9",oImageIds.rim7="id10",oImageIds.rim8="id11",oImageIds.rim9="id12",oImageIds.rim10="id13",oImageIds.rim11="id14",oImageIds.rim12="id15",oImageIds.rim13="id16",oImageIds.rim14="id17",oImageIds.rim15="id18",oImageIds.rim16="id19",oImageIds.rim17="id20",oImageIds.distBar="id0",oImageIds.accPedal="id1",oImageIds.gearChange="id2",oImageIds.boostBut="id3",oImageIds.revNeedle="id4",oImageIds.revMeter="id5",oImageIds.startLights0="id6",oImageIds.startLights1="id7",oImageIds.startLights2="id8",oImageIds.startLights3="id9",oImageIds.startRevMeter="id10",oImageIds.endLoseMessage="id11",oImageIds.endWinMessage="id12",oImageIds.perfectMessage="id13",oImageIds.greatStartMessage="id14",oImageIds.revTip="id15",oImageIds.gearTip1="id16",oImageIds.nitroTip="id17",oImageIds.gearHighlight="id18",oImageIds.newLocationMessage="id19",oImageIds.distBehindMarker="id20",oImageIds.distInFrontMarker="id21",oImageIds.gameCompleteMessage="id22",oImageIds.fillBar="id0",oImageIds.stageBar="id1",oImageIds.engineIcon="id2",oImageIds.accIcon="id3",oImageIds.wheelsIcon="id4",oImageIds.weightIcon="id5",oImageIds.nitroIcon="id6",oImageIds.upgradePreviewBar="id7",oImageIds.raceLostIcon="id8",oImageIds.raceWonIcon="id9",oImageIds.newLevelBadge="id10",oImageIds.nitroJet="id11",oImageIds.lockedRacePin="id12",oImageIds.careerRacePin0="id13",oImageIds.careerRacePin1="id14",oImageIds.careerRacePin2="id15",oImageIds.careerRacePin3="id16",oImageIds.careerRaceWonPin0="id17",oImageIds.careerRaceWonPin1="id18",oImageIds.careerRaceWonPin2="id19",oImageIds.careerRaceWonPin3="id20",oImageIds.finger="id21",oImageIds.levelFillBar="id22",oImageIds.customBgSquare0="id23",oImageIds.customBgSquare1="id24",oImageIds.customBgRect0="id25",oImageIds.customBgRect1="id26",oImageIds.upgradeStage0="id27",oImageIds.upgradeStage1="id28",oImageIds.upgradeStage2="id29",oImageIds.upgradeStage3="id30",oImageIds.upgradeStage4="id31",oImageIds.upgradeStage5="id32",oImageIds.boughtMarker="id33",oImageIds.cup0="id34",oImageIds.cup1="id35",oImageIds.cup2="id36",oImageIds.cup3="id37",oImageIds.vsText="id38",oImageIds.colour0="id0",oImageIds.colour1="id1",oImageIds.colour2="id2",oImageIds.colour3="id3",oImageIds.colour4="id4",oImageIds.creditsBut="id0",oImageIds.moreGamesBut="id1",oImageIds.garageBut="id2",oImageIds.raceBut="id3",oImageIds.shopBut="id4",oImageIds.upgradeBut="id5",oImageIds.customiseBut="id6",oImageIds.leftBut="id7",oImageIds.rightBut="id8",oImageIds.backBut="id9",oImageIds.buyBut="id10",oImageIds.upgradeTabOff0="id11",oImageIds.upgradeTabOff1="id12",oImageIds.upgradeTabOff2="id13",oImageIds.upgradeTabOff3="id14",oImageIds.upgradeTabOff4="id15",oImageIds.customiseTabOff0="id16",oImageIds.customiseTabOff1="id17",oImageIds.customiseTabOff2="id18",oImageIds.upgradeTabOn0="id19",oImageIds.upgradeTabOn1="id20",oImageIds.upgradeTabOn2="id21",oImageIds.upgradeTabOn3="id22",oImageIds.upgradeTabOn4="id23",oImageIds.customiseTabOn0="id24",oImageIds.customiseTabOn1="id25",oImageIds.customiseTabOn2="id26",oImageIds.sellBut="id27",oImageIds.restartBut="id28",oImageIds.quitBut="id29",oImageIds.continueBut="id30",oImageIds.statsBut="id31",oImageIds.raceStartBut="id32",oImageIds.leftMiniBut="id33",oImageIds.rightMiniBut="id34",oImageIds.cantAffordBut="id35",oImageIds.resetDataBut="id36",oImageIds.highlightBut="id37",oImageIds.largeRestartBut="id38",oImageIds.lockedSellBut="id39",oImageIds.boughtBut="id40",assetLib.onReady(preloadAudio)}function resizeCanvas(){setTimeout(function(){resizeCanvasDelayed()},500)}function resizeCanvasDelayed(){var a=window.innerWidth,e=window.innerHeight,t=canvas.width,r=canvas.height;a>480&&(a-=1,e-=1),e>a&&isMobile&&"loading"!=gameState||rotatePause&&isMobile&&rotatePauseOff(),a/e<canvas.width/canvas.height?(canvas.style.width=a+"px",canvas.style.height=a*r/t+"px",canvasX=0,canvasY=(e-a*r/t)/2,canvasScaleX=canvasScaleY=t/a):(canvas.style.width=e/r*t+"px",canvas.style.height=e+"px",canvasX=(a-e/r*t)/2,canvasY=0,canvasScaleX=canvasScaleY=r/e),canvas.style.marginTop=canvasY+"px",canvas.style.marginLeft=canvasX+"px",userInput.setCanvas(canvasX,canvasY,canvasScaleX,canvasScaleY),window.scrollTo(0,0)}function playSound(a,e){void 0===e&&(e=1),1==audioType&&(sound.play(a),sound.volume(e))}function toggleMute(a){muted=!muted,1==audioType?muted?(Howler.mute(),music.pause(),musicTween&&musicTween.kill(),a||(window.famobi_analytics.trackEvent(famobi_analytics.EVENT_VOLUMECHANGE,{bgmVolume:0,sfxVolume:0}),window.famobi.localStorage.setItem("muted","1"))):(Howler.unmute(),music.pause(),music.play(),musicTween&&musicTween.kill(),music.volume="game"==gameState?.75:.5,a||(window.famobi_analytics.trackEvent(famobi_analytics.EVENT_VOLUMECHANGE,{bgmVolume:1,sfxVolume:1}),window.famobi.localStorage.removeItem("muted"))):2==audioType&&(muted?music.pause():(music.pause(),music.play())),renderMuteBut()}function renderMuteBut(){if(0!=audioType){var a=assetLib.getData("muteBut"),e=0;muted&&(e=1);var t=e*a.oData.spriteWidth%a.img.width,r=Math.floor(e/(a.img.width/a.oData.spriteWidth))*a.oData.spriteHeight;ctx.drawImage(a.img,t,r,a.oData.spriteWidth,a.oData.spriteHeight,651,2,a.oData.spriteWidth,a.oData.spriteHeight)}}function toggleManualPause(){if(manualPause)manualPause=!1,userInput.removeHitArea("quitFromPause"),userInput.removeHitArea("resumeFromPause"),userInput.removeHitArea("moreGamesPause"),userInput.removeHitArea("restartFromPause"),userInput.removeHitArea("clearData"),pauseCoreOff();else{manualPause=!0,pauseCoreOn();var a={oImgData:assetLib.getData("uiButs"),aPos:[40,425],id:oImageIds.quitBut},e={oImgData:assetLib.getData("uiButs"),aPos:[canvas.width/2,canvas.height/2],id:oImageIds.continueBut},t={oImgData:assetLib.getData("uiButs"),aPos:[canvas.width/2,325],id:oImageIds.restartBut},r=new Array(a,e,t);userInput.addHitArea("quitFromPause",butEventHandler,null,"image",a),userInput.addHitArea("resumeFromPause",butEventHandler,null,"image",e),userInput.addHitArea("restartFromPause",butEventHandler,null,"image",t),(panel=new Elements.Panel("pause",r)).render(ctx),userInput.addHitArea("pause",butEventHandler,null,"rect",{aRect:[610,9,646,45]},!0)}}function rotatePauseOn(){rotatePause=!0,ctx.drawImage(assetLib.getImg("rotateDeviceMessage"),0,0),userInput.pauseIsOn=!0,pauseCoreOn()}function rotatePauseOff(){rotatePause=!1,userInput.removeHitArea("quitFromPause"),userInput.removeHitArea("resumeFromPause"),userInput.removeHitArea("moreGamesPause"),pauseCoreOff()}function pauseCoreOn(){try{window.famobi_analytics.trackScreen(famobi_analytics.SCREEN_PAUSE)}catch(a){}switch(1==audioType?(Howler.mute(),music.pause()):2==audioType&&music.pause(),gameState){case"start":case"help":break;case"race":userRevTween&&userRevTween.pause(),enemyRevTween&&enemyRevTween.pause(),userNitroTween&&userNitroTween.pause(),enemyNitroTween&&enemyNitroTween.pause(),userCar.jumpTween0&&(userCar.jumpTween0.pause(),userCar.jumpTween1.pause(),userCar.jumpTween2.pause()),enemyCar.jumpTween0&&(enemyCar.jumpTween0.pause(),enemyCar.jumpTween1.pause(),enemyCar.jumpTween2.pause()),userInput.removeHitArea("accPedal"),userInput.removeHitArea("gearChange"),userInput.removeKey("gearChange"),userInput.removeHitArea("nitroBoost")}}function pauseCoreOff(){switch(1==audioType?muted||(Howler.unmute(),music.pause(),music.play()):2==audioType&&(muted||(music.pause(),music.play())),previousTime=(new Date).getTime(),userInput.pauseIsOn=!1,gameState){case"splash":updateSplashScreenEvent();break;case"start":initStartScreen();break;case"credits":initCreditsScreen();break;case"raceSelect":initRaceSelect();break;case"garage":initGarage();break;case"racePreview":initRacePreview();break;case"shop":initShop("shop");break;case"customise":initCustomise();break;case"upgrade":initUpgrade("garage");break;case"race":manualPause?(manualPause=!1,updateRaceEvent(),toggleManualPause()):(userRevTween&&userRevTween.play(),enemyRevTween&&enemyRevTween.play(),userNitroTween&&userNitroTween.play(),enemyNitroTween&&enemyNitroTween.play(),userCar.jumpTween0&&(userCar.jumpTween0.play(),userCar.jumpTween1.play(),userCar.jumpTween2.play()),enemyCar.jumpTween0&&(enemyCar.jumpTween0.play(),enemyCar.jumpTween1.play(),enemyCar.jumpTween2.play()),userInput.addHitArea("pause",butEventHandler,null,"rect",{aRect:[610,9,646,45]},!0),0==oRaceProgress.time?userInput.addHitArea("accPedal",butEventHandler,{multiTouch:!0},"rect",{aRect:[558,126,684,290]},!0):(userInput.addHitArea("gearChange",butEventHandler,null,"rect",{aRect:[524,324,680,canvas.height]},!0),userInput.addKey("gearChange",butEventHandler,null,32)),!oRaceProgress.userBoostTriggered&&userCar.oCarTypeData.nitro>0&&userInput.addHitArea("nitroBoost",butEventHandler,null,"rect",{aRect:[58,341,148,433]},!0),updateRaceEvent());break;case"raceComplete":initRaceCompleteDisplay()}}